[
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1569, 
        "numberRunning": 1570, 
        "numberFailing": 0, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "com.fasterxml.jackson.databind.JsonMappingException", 
            "isError": true, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 0
      }, 
      "failingModule": "/root/workspace/FasterXML/jackson-databind/176912167", 
      "failureDetails": [
        {
          "failureName": "com.fasterxml.jackson.databind.JsonMappingException", 
          "detail": "Could not find creator property with name 'intField' (in class com.fasterxml.jackson.databind.creators.Creator1476Test$SimplePojo)\n at [Source: { \"intField\": 1, \"stringField\": \"foo\" }; line: 1, column: 1]", 
          "isError": true, 
          "testMethod": "testConstructorChoice", 
          "testClass": "com.fasterxml.jackson.databind.creators.Creator1476Test"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 0, 
          "numberRunning": 1, 
          "testClass": "com.fasterxml.jackson.databind.creators.Creator1476Test", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/190405643", 
        "date": "Jan 9, 2017 10:46:51 PM", 
        "id": 190405643
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/176912167", 
        "date": "Nov 18, 2016 4:09:26 AM", 
        "id": 176912167
      }
    }, 
    "repository": {
      "name": "FasterXML-jackson-databind", 
      "url": "https://github.com/FasterXML/jackson-databind", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 3038937
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/d44600d3750e5dba9fac68aee7248ed2a80a2225", 
        "sha": "d44600d3750e5dba9fac68aee7248ed2a80a2225", 
        "branchName": "2.7", 
        "date": "Jan 9, 2017 10:42:27 PM", 
        "repoName": "FasterXML/jackson-databind"
      }, 
      "buggyBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/002a9a3e9b98ebebf53e43aed0536d3c50851c84", 
        "sha": "002a9a3e9b98ebebf53e43aed0536d3c50851c84", 
        "branchName": "2.7", 
        "date": "Nov 18, 2016 4:05:35 AM", 
        "repoName": "FasterXML/jackson-databind"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/FasterXML-jackson-databind-176912167-190405643", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 30, 
        "numberDeleted": 24
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_1", 
    "diff": "diff --git a/src/main/java/com/fasterxml/jackson/databind/deser/impl/CreatorCollector.java b/src/main/java/com/fasterxml/jackson/databind/deser/impl/CreatorCollector.java\nindex 8e38f5d..a530e4b 100644\n--- a/src/main/java/com/fasterxml/jackson/databind/deser/impl/CreatorCollector.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/deser/impl/CreatorCollector.java\n@@ -162,36 +162,39 @@ public class CreatorCollector\n             SettableBeanProperty[] injectables)\n     {\n         if (creator.getParameterType(0).isCollectionLikeType()) {\n-            verifyNonDup(creator, C_ARRAY_DELEGATE, explicit);\n-            _arrayDelegateArgs = injectables;\n+            if (verifyNonDup(creator, C_ARRAY_DELEGATE, explicit)) {\n+                _arrayDelegateArgs = injectables;\n+            }\n         } else {\n-            verifyNonDup(creator, C_DELEGATE, explicit);\n-            _delegateArgs = injectables;\n+            if (verifyNonDup(creator, C_DELEGATE, explicit)) {\n+                _delegateArgs = injectables;\n+            }\n         }\n     }\n     \n     public void addPropertyCreator(AnnotatedWithParams creator, boolean explicit,\n             SettableBeanProperty[] properties)\n     {\n-        verifyNonDup(creator, C_PROPS, explicit);\n-        // Better ensure we have no duplicate names either...\n-        if (properties.length > 1) {\n-            HashMap<String,Integer> names = new HashMap<String,Integer>();\n-            for (int i = 0, len = properties.length; i < len; ++i) {\n-                String name = properties[i].getName();\n-                /* [Issue-13]: Need to consider Injectables, which may not have\n-                 *   a name at all, and need to be skipped\n-                 */\n-                if (name.length() == 0 && properties[i].getInjectableValueId() != null) {\n-                    continue;\n-                }\n-                Integer old = names.put(name, Integer.valueOf(i));\n-                if (old != null) {\n-                    throw new IllegalArgumentException(\"Duplicate creator property \\\"\"+name+\"\\\" (index \"+old+\" vs \"+i+\")\");\n+        if (verifyNonDup(creator, C_PROPS, explicit)) {\n+            // Better ensure we have no duplicate names either...\n+            if (properties.length > 1) {\n+                HashMap<String,Integer> names = new HashMap<String,Integer>();\n+                for (int i = 0, len = properties.length; i < len; ++i) {\n+                    String name = properties[i].getName();\n+                    /* [Issue-13]: Need to consider Injectables, which may not have\n+                     *   a name at all, and need to be skipped\n+                     */\n+                    if (name.length() == 0 && properties[i].getInjectableValueId() != null) {\n+                        continue;\n+                    }\n+                    Integer old = names.put(name, Integer.valueOf(i));\n+                    if (old != null) {\n+                        throw new IllegalArgumentException(\"Duplicate creator property \\\"\"+name+\"\\\" (index \"+old+\" vs \"+i+\")\");\n+                    }\n                 }\n             }\n+            _propertyBasedArgs = properties;\n         }\n-        _propertyBasedArgs = properties;\n     }\n \n     public void addIncompeteParameter(AnnotatedParameter parameter) {\n@@ -293,7 +296,10 @@ public class CreatorCollector\n         return member;\n     }\n \n-    protected void verifyNonDup(AnnotatedWithParams newOne, int typeIndex, boolean explicit)\n+    /**\n+     * @return True if specified Creator is to be used\n+     */\n+    protected boolean verifyNonDup(AnnotatedWithParams newOne, int typeIndex, boolean explicit)\n     {\n         final int mask = (1 << typeIndex);\n         _hasNonDefaultCreator = true;\n@@ -301,11 +307,10 @@ public class CreatorCollector\n         // already had an explicitly marked one?\n         if (oldOne != null) {\n             boolean verify;\n-\n             if ((_explicitCreators & mask) != 0) { // already had explicitly annotated, leave as-is\n                 // but skip, if new one not annotated\n                 if (!explicit) {\n-                    return;\n+                    return false;\n                 }\n                 // both explicit: verify\n                 verify = true;\n@@ -327,7 +332,7 @@ public class CreatorCollector\n                 // otherwise, which one to choose?\n                 if (newType.isAssignableFrom(oldType)) {\n                     // new type more generic, use old\n-                    return;\n+                    return false;\n                 }\n                 // new type more specific, use it\n             }\n@@ -336,6 +341,7 @@ public class CreatorCollector\n             _explicitCreators |= mask;\n         }\n         _creators[typeIndex] = _fixAccess(newOne);\n+        return true;\n     }\n \n     /*\n", 
    "projectMetrics": {
      "numberSourceFiles": 389, 
      "numberLibrariesFailingModule": 14, 
      "numberTestFiles": 362, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 172426376, 
        "hostName": "local", 
        "totalMemory": 396886016, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 6:44:09 PM", 
      "projectRootPomPath": "./workspace/FasterXML/jackson-databind/176912167/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            51
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 51
        }, 
        "testing": {
          "stepDurations": [
            31
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 31
        }, 
        "cloning": {
          "stepDurations": [
            57
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 57
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 6:41:02 PM", 
      "totalDuration": 181
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1570, 
        "numberRunning": 1571, 
        "numberFailing": 0, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "com.fasterxml.jackson.databind.JsonMappingException", 
            "isError": true, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 0
      }, 
      "failingModule": "/root/workspace/FasterXML/jackson-databind/190405643", 
      "failingClasses": [
        {
          "numberPassing": 30, 
          "numberRunning": 31, 
          "testClass": "com.fasterxml.jackson.databind.deser.TestMapDeserialization", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "com.fasterxml.jackson.databind.JsonMappingException", 
          "testMethod": "testcharSequenceKeyMap", 
          "testClass": "com.fasterxml.jackson.databind.deser.TestMapDeserialization", 
          "detail": "Can not find a (Map) Key deserializer for type [simple type, class java.lang.CharSequence]\n at [Source: {\"a\":\"b\"}; line: 1, column: 1]", 
          "isError": true
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/195044059", 
        "date": "Jan 25, 2017 4:02:17 AM", 
        "id": 195044059
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/190405643", 
        "date": "Jan 9, 2017 10:46:51 PM", 
        "id": 190405643
      }
    }, 
    "repository": {
      "name": "FasterXML-jackson-databind", 
      "url": "https://github.com/FasterXML/jackson-databind", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 3038937
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/23a733207bc88a06ee486a5896b7b0c4ebbbfef4", 
        "sha": "23a733207bc88a06ee486a5896b7b0c4ebbbfef4", 
        "branchName": "2.7", 
        "date": "Jan 25, 2017 3:58:19 AM", 
        "repoName": "FasterXML/jackson-databind"
      }, 
      "buggyBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/d44600d3750e5dba9fac68aee7248ed2a80a2225", 
        "sha": "d44600d3750e5dba9fac68aee7248ed2a80a2225", 
        "branchName": "2.7", 
        "date": "Jan 9, 2017 10:42:27 PM", 
        "repoName": "FasterXML/jackson-databind"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/FasterXML-jackson-databind-190405643-195044059", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 389, 
      "numberLibrariesFailingModule": 14, 
      "numberTestFiles": 362, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 1, 
        "numberDeleted": 1
      }
    }, 
    "bugId": "Bears_2", 
    "diff": "diff --git a/src/main/java/com/fasterxml/jackson/databind/deser/std/StdKeyDeserializer.java b/src/main/java/com/fasterxml/jackson/databind/deser/std/StdKeyDeserializer.java\nindex d95749a..8bddce4 100644\n--- a/src/main/java/com/fasterxml/jackson/databind/deser/std/StdKeyDeserializer.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/deser/std/StdKeyDeserializer.java\n@@ -72,7 +72,7 @@ public class StdKeyDeserializer extends KeyDeserializer\n         int kind;\n \n         // first common types:\n-        if (raw == String.class || raw == Object.class) {\n+        if (raw == String.class || raw == Object.class || raw == CharSequence.class) {\n             return StringKD.forType(raw);\n         } else if (raw == UUID.class) {\n             kind = TYPE_UUID;\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 201092024, 
        "hostName": "local", 
        "totalMemory": 363331584, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 6:36:31 PM", 
      "projectRootPomPath": "./workspace/FasterXML/jackson-databind/190405643/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            49
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 49
        }, 
        "testing": {
          "stepDurations": [
            36
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 36
        }, 
        "cloning": {
          "stepDurations": [
            54
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 54
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 6:32:50 PM", 
      "totalDuration": 214
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1680, 
        "numberRunning": 1681, 
        "numberFailing": 0, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "java.util.NoSuchElementException", 
            "isError": true, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 0
      }, 
      "failingModule": "/root/workspace/FasterXML/jackson-databind/190406891", 
      "failureDetails": [
        {
          "failureName": "java.util.NoSuchElementException", 
          "detail": "No entry 'businessAddress' found, can't remove", 
          "isError": true, 
          "testMethod": "testCaseInsensitiveUnwrap", 
          "testClass": "com.fasterxml.jackson.databind.struct.TestUnwrapped"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 8, 
          "numberRunning": 9, 
          "testClass": "com.fasterxml.jackson.databind.struct.TestUnwrapped", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/190505536", 
        "date": "Jan 10, 2017 6:42:40 AM", 
        "id": 190505536
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/190406891", 
        "date": "Jan 9, 2017 10:50:43 PM", 
        "id": 190406891
      }
    }, 
    "repository": {
      "name": "FasterXML-jackson-databind", 
      "url": "https://github.com/FasterXML/jackson-databind", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 3038937
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/d7155de6c37db3301b92b755bd0a02388f7dd07f", 
        "sha": "d7155de6c37db3301b92b755bd0a02388f7dd07f", 
        "branchName": "2.8", 
        "date": "Jan 10, 2017 6:38:36 AM", 
        "repoName": "FasterXML/jackson-databind"
      }, 
      "buggyBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/7fe2d4f1aaab61e41f31f792f8a988157a34b34c", 
        "sha": "7fe2d4f1aaab61e41f31f792f8a988157a34b34c", 
        "branchName": "2.8", 
        "date": "Jan 9, 2017 10:45:35 PM", 
        "repoName": "FasterXML/jackson-databind"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/FasterXML-jackson-databind-190406891-190505536", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 6, 
        "numberDeleted": 3
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_3", 
    "diff": "diff --git a/src/main/java/com/fasterxml/jackson/databind/deser/impl/BeanPropertyMap.java b/src/main/java/com/fasterxml/jackson/databind/deser/impl/BeanPropertyMap.java\nindex fd30aaf..8031ee0 100644\n--- a/src/main/java/com/fasterxml/jackson/databind/deser/impl/BeanPropertyMap.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/deser/impl/BeanPropertyMap.java\n@@ -92,7 +92,7 @@ public class BeanPropertyMap\n     protected void init(Collection<SettableBeanProperty> props)\n     {\n         _size = props.size();\n-        \n+\n         // First: calculate size of primary hash area\n         final int hashSize = findSize(_size);\n         _hashMask = hashSize-1;\n@@ -423,7 +423,8 @@ System.err.println(\"And new propr #\"+slot+\" '\"+key+\"'\");\n      * Specialized method for removing specified existing entry.\n      * NOTE: entry MUST exist, otherwise an exception is thrown.\n      */\n-    public void remove(SettableBeanProperty propToRm) {\n+    public void remove(SettableBeanProperty propToRm)\n+    {\n         ArrayList<SettableBeanProperty> props = new ArrayList<SettableBeanProperty>(_size);\n         String key = getPropertyName(propToRm);\n         boolean found = false;\n@@ -434,7 +435,9 @@ System.err.println(\"And new propr #\"+slot+\" '\"+key+\"'\");\n                 continue;\n             }\n             if (!found) {\n-                found = key.equals(prop.getName());\n+                // 09-Jan-2017, tatu: Important: must check name slot and NOT property name,\n+                //   as only former is lower-case in case-insensitive case\n+                found = key.equals(_hashArea[i-1]);\n                 if (found) {\n                     // need to leave a hole here\n                     _propsInOrder[_findFromOrdered(prop)] = null;\n", 
    "projectMetrics": {
      "numberSourceFiles": 397, 
      "numberLibrariesFailingModule": 17, 
      "numberTestFiles": 382, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 129327328, 
        "hostName": "local", 
        "totalMemory": 364380160, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 6:40:49 PM", 
      "projectRootPomPath": "./workspace/FasterXML/jackson-databind/190406891/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            43
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 43
        }, 
        "testing": {
          "stepDurations": [
            29
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 29
        }, 
        "cloning": {
          "stepDurations": [
            48
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 48
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 6:37:52 PM", 
      "totalDuration": 172
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1571, 
        "numberRunning": 1572, 
        "numberFailing": 0, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "java.lang.IllegalStateException", 
            "isError": true, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 0
      }, 
      "failingModule": "/root/workspace/FasterXML/jackson-databind/195066764", 
      "failingClasses": [
        {
          "numberPassing": 0, 
          "numberRunning": 1, 
          "testClass": "com.fasterxml.jackson.databind.creators.InnerClassCreatorTest", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "java.lang.IllegalStateException", 
          "testMethod": "testIssue1501", 
          "testClass": "com.fasterxml.jackson.databind.creators.InnerClassCreatorTest", 
          "detail": "Internal error: no creator index for property 'a' (of type com.fasterxml.jackson.databind.deser.impl.InnerClassProperty)", 
          "isError": true
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/195069327", 
        "date": "Jan 25, 2017 6:45:52 AM", 
        "id": 195069327
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/195066764", 
        "date": "Jan 25, 2017 6:27:41 AM", 
        "id": 195066764
      }
    }, 
    "repository": {
      "name": "FasterXML-jackson-databind", 
      "url": "https://github.com/FasterXML/jackson-databind", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 3038937
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/63afa5297a0b8bcbf31b9c91e5d15537e0fdbdd5", 
        "sha": "63afa5297a0b8bcbf31b9c91e5d15537e0fdbdd5", 
        "branchName": "2.7", 
        "date": "Jan 25, 2017 6:41:59 AM", 
        "repoName": "FasterXML/jackson-databind"
      }, 
      "buggyBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/d3874ebf3c0585270f1fe33eb7030667bacb63b7", 
        "sha": "d3874ebf3c0585270f1fe33eb7030667bacb63b7", 
        "branchName": "2.7", 
        "date": "Jan 25, 2017 6:23:43 AM", 
        "repoName": "FasterXML/jackson-databind"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/FasterXML-jackson-databind-195066764-195069327", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 389, 
      "numberLibrariesFailingModule": 14, 
      "numberTestFiles": 363, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 0, 
        "numberDeleted": 9
      }
    }, 
    "bugId": "Bears_4", 
    "diff": "diff --git a/src/main/java/com/fasterxml/jackson/databind/deser/impl/InnerClassProperty.java b/src/main/java/com/fasterxml/jackson/databind/deser/impl/InnerClassProperty.java\nindex 311802e..4a9ca99 100644\n--- a/src/main/java/com/fasterxml/jackson/databind/deser/impl/InnerClassProperty.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/deser/impl/InnerClassProperty.java\n@@ -83,6 +83,15 @@ public final class InnerClassProperty\n     public InnerClassProperty withValueDeserializer(JsonDeserializer<?> deser) {\n         return new InnerClassProperty(this, deser);\n     }\n+\n+    @Override\n+    public void assignIndex(int index) { _delegate.assignIndex(index); }\n+\n+    @Override\n+    public int getPropertyIndex() { return _delegate.getPropertyIndex(); }\n+\n+    @Override\n+    public int getCreatorIndex() { return _delegate.getCreatorIndex(); }\n     \n     // // // BeanProperty impl\n     \n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 146485848, 
        "hostName": "local", 
        "totalMemory": 358612992, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 6:31:33 PM", 
      "projectRootPomPath": "./workspace/FasterXML/jackson-databind/195066764/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            49
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 49
        }, 
        "testing": {
          "stepDurations": [
            39
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 39
        }, 
        "cloning": {
          "stepDurations": [
            49
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 49
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 6:28:02 PM", 
      "totalDuration": 205
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1571, 
        "numberRunning": 1572, 
        "numberFailing": 0, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "com.fasterxml.jackson.databind.JsonMappingException", 
            "isError": true, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 0
      }, 
      "failingModule": "/root/workspace/FasterXML/jackson-databind/195430379", 
      "failureDetails": [
        {
          "failureName": "com.fasterxml.jackson.databind.JsonMappingException", 
          "detail": "No _idValue when handleIdValue called, on instance of com.fasterxml.jackson.databind.creators.CreatorWithObjectIdTest$A\n at [Source: {\"id\":\"123\",\"name\":\"A\"}; line: 1, column: 23]", 
          "isError": true, 
          "testMethod": "testObjectIdWithCreator", 
          "testClass": "com.fasterxml.jackson.databind.creators.CreatorWithObjectIdTest"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 0, 
          "numberRunning": 1, 
          "testClass": "com.fasterxml.jackson.databind.creators.CreatorWithObjectIdTest", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/198387397", 
        "date": "Feb 4, 2017 7:57:01 PM", 
        "id": 198387397
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/195430379", 
        "date": "Jan 26, 2017 6:16:10 AM", 
        "id": 195430379
      }
    }, 
    "repository": {
      "name": "FasterXML-jackson-databind", 
      "url": "https://github.com/FasterXML/jackson-databind", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 3038937
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/04cb1a27e0fe60fe9bab64dfe7f36b3f7649ba0c", 
        "sha": "04cb1a27e0fe60fe9bab64dfe7f36b3f7649ba0c", 
        "branchName": "2.7", 
        "date": "Feb 4, 2017 7:52:58 PM", 
        "repoName": "FasterXML/jackson-databind"
      }, 
      "buggyBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/16d77253d2ba0ed293a12013e459d56420a7d056", 
        "sha": "16d77253d2ba0ed293a12013e459d56420a7d056", 
        "branchName": "2.7", 
        "date": "Jan 26, 2017 6:12:01 AM", 
        "repoName": "FasterXML/jackson-databind"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/FasterXML-jackson-databind-195430379-198387397", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 4, 
        "numberDeleted": 4
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_5", 
    "diff": "diff --git a/src/main/java/com/fasterxml/jackson/databind/deser/BeanDeserializer.java b/src/main/java/com/fasterxml/jackson/databind/deser/BeanDeserializer.java\nindex 0e2b874..d0ebaba 100644\n--- a/src/main/java/com/fasterxml/jackson/databind/deser/BeanDeserializer.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/deser/BeanDeserializer.java\n@@ -373,6 +373,10 @@ public class BeanDeserializer\n         for (; t == JsonToken.FIELD_NAME; t = p.nextToken()) {\n             String propName = p.getCurrentName();\n             p.nextToken(); // to point to value\n+            // Object Id property?\n+            if (buffer.readIdProperty(propName)) {\n+                continue;\n+            }\n             // creator property?\n             SettableBeanProperty creatorProp = creator.findCreatorProperty(propName);\n             if (creatorProp != null) {\n@@ -405,10 +409,6 @@ public class BeanDeserializer\n                 }\n                 continue;\n             }\n-            // Object Id property?\n-            if (buffer.readIdProperty(propName)) {\n-                continue;\n-            }\n             // regular property? needs buffering\n             SettableBeanProperty prop = _beanProperties.find(propName);\n             if (prop != null) {\n", 
    "projectMetrics": {
      "numberSourceFiles": 389, 
      "numberLibrariesFailingModule": 14, 
      "numberTestFiles": 364, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 230270312, 
        "hostName": "local", 
        "totalMemory": 353894400, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 6:37:09 AM", 
      "projectRootPomPath": "./workspace/FasterXML/jackson-databind/195430379/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            49
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 49
        }, 
        "testing": {
          "stepDurations": [
            41
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 41
        }, 
        "cloning": {
          "stepDurations": [
            51
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 51
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 6:33:23 AM", 
      "totalDuration": 219
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1686, 
        "numberRunning": 1688, 
        "numberFailing": 0, 
        "numberErroring": 2, 
        "failures": [
          {
            "failureName": "com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException", 
            "isError": true, 
            "occurrences": 2
          }
        ], 
        "numberSkipping": 0
      }, 
      "failingModule": "/root/workspace/FasterXML/jackson-databind/195646489", 
      "failingClasses": [
        {
          "numberPassing": 0, 
          "numberRunning": 2, 
          "testClass": "com.fasterxml.jackson.databind.deser.ReadOrWriteOnlyTest", 
          "numberFailing": 0, 
          "numberErroring": 2, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException", 
          "testMethod": "testReadOnly935", 
          "testClass": "com.fasterxml.jackson.databind.deser.ReadOrWriteOnlyTest", 
          "detail": "Unrecognized field \"fullName\" (class com.fasterxml.jackson.databind.deser.ReadOrWriteOnlyTest$Pojo935), not marked as ignorable (2 known properties: \"lastName\", \"firstName\"])\n at [Source: {\"firstName\":\"Foo\",\"lastName\":\"Bar\",\"fullName\":\"Foo Bar\"}; line: 1, column: 49] (through reference chain: com.fasterxml.jackson.databind.deser.ReadOrWriteOnlyTest$Pojo935[\"fullName\"])", 
          "isError": true
        }, 
        {
          "failureName": "com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException", 
          "testMethod": "testReadOnlyAndWriteOnly", 
          "testClass": "com.fasterxml.jackson.databind.deser.ReadOrWriteOnlyTest", 
          "detail": "Unrecognized field \"x\" (class com.fasterxml.jackson.databind.deser.ReadOrWriteOnlyTest$ReadXWriteY), not marked as ignorable (one known property: \"y\"])\n at [Source: {\"x\":5, \"y\":6}; line: 1, column: 7] (through reference chain: com.fasterxml.jackson.databind.deser.ReadOrWriteOnlyTest$ReadXWriteY[\"x\"])", 
          "isError": true
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/195752461", 
        "date": "Jan 27, 2017 4:16:49 AM", 
        "id": 195752461
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/195646489", 
        "date": "Jan 26, 2017 8:42:57 PM", 
        "id": 195646489
      }
    }, 
    "repository": {
      "name": "FasterXML-jackson-databind", 
      "url": "https://github.com/FasterXML/jackson-databind", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 3038937
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/4d34006e4d8a566c6c64a3a0e04c17e50d63bb82", 
        "sha": "4d34006e4d8a566c6c64a3a0e04c17e50d63bb82", 
        "branchName": "2.8", 
        "date": "Jan 27, 2017 4:12:29 AM", 
        "repoName": "FasterXML/jackson-databind"
      }, 
      "buggyBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/2bb770bcd4cbc0c0c3ede86cedd4a602e328e2f6", 
        "sha": "2bb770bcd4cbc0c0c3ede86cedd4a602e328e2f6", 
        "branchName": "2.8", 
        "date": "Jan 26, 2017 8:38:42 PM", 
        "repoName": "FasterXML/jackson-databind"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/FasterXML-jackson-databind-195646489-195752461", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 397, 
      "numberLibrariesFailingModule": 17, 
      "numberTestFiles": 384, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 2, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 7, 
        "numberDeleted": 5
      }
    }, 
    "bugId": "Bears_6", 
    "diff": "diff --git a/src/main/java/com/fasterxml/jackson/databind/introspect/POJOPropertiesCollector.java b/src/main/java/com/fasterxml/jackson/databind/introspect/POJOPropertiesCollector.java\nindex f542d84..fd6a613 100644\n--- a/src/main/java/com/fasterxml/jackson/databind/introspect/POJOPropertiesCollector.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/introspect/POJOPropertiesCollector.java\n@@ -4,6 +4,7 @@ import java.lang.reflect.Modifier;\n import java.util.*;\n \n import com.fasterxml.jackson.annotation.JsonAnySetter;\n+import com.fasterxml.jackson.annotation.JsonProperty.Access;\n import com.fasterxml.jackson.databind.*;\n import com.fasterxml.jackson.databind.cfg.HandlerInstantiator;\n import com.fasterxml.jackson.databind.cfg.MapperConfig;\n@@ -727,10 +728,14 @@ public class POJOPropertiesCollector\n \n         while (it.hasNext()) {\n             POJOPropertyBuilder prop = it.next();\n-            prop.removeNonVisible(inferMutators);\n+            // 26-Jan-2017, tatu: [databind#935]: need to denote removal of\n+            Access acc = prop.removeNonVisible(inferMutators);\n+            if (!_forSerialization && (acc == Access.READ_ONLY)) {\n+                _collectIgnorals(prop.getName());\n+            }\n         }\n     }\n-        \n+\n     /**\n      * Helper method called to add explicitly ignored properties to a list\n      * of known ignored properties; this helps in proper reporting of\ndiff --git a/src/main/java/com/fasterxml/jackson/databind/introspect/POJOPropertyBuilder.java b/src/main/java/com/fasterxml/jackson/databind/introspect/POJOPropertyBuilder.java\nindex 954f5dd..b9a403c 100644\n--- a/src/main/java/com/fasterxml/jackson/databind/introspect/POJOPropertyBuilder.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/introspect/POJOPropertyBuilder.java\n@@ -641,7 +641,7 @@ public class POJOPropertyBuilder\n      * @param inferMutators Whether mutators can be \"pulled in\" by visible\n      *    accessors or not. \n      */\n-    public void removeNonVisible(boolean inferMutators)\n+    public JsonProperty.Access removeNonVisible(boolean inferMutators)\n     {\n         /* 07-Jun-2015, tatu: With 2.6, we will allow optional definition\n          *  of explicit access type for property; if not \"AUTO\", it will\n@@ -680,6 +680,7 @@ public class POJOPropertyBuilder\n                 _setters = _removeNonVisible(_setters);\n             }\n         }\n+        return acc;\n     }\n \n     /**\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 162681048, 
        "hostName": "local", 
        "totalMemory": 358088704, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 6:21:13 PM", 
      "projectRootPomPath": "./workspace/FasterXML/jackson-databind/195646489/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            54
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 54
        }, 
        "testing": {
          "stepDurations": [
            41
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 41
        }, 
        "cloning": {
          "stepDurations": [
            57
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 57
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 6:17:46 PM", 
      "totalDuration": 201
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1690, 
        "numberRunning": 1692, 
        "numberFailing": 1, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "junit.framework.AssertionFailedError", 
            "isError": false, 
            "occurrences": 1
          }, 
          {
            "failureName": "com.fasterxml.jackson.databind.exc.InvalidFormatException", 
            "isError": true, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 0
      }, 
      "failingModule": "/root/workspace/FasterXML/jackson-databind/195752461", 
      "failureDetails": [
        {
          "failureName": "junit.framework.AssertionFailedError", 
          "detail": "Expected an exception with one of substrings ([value not one of declared Enum]): got one with message \"Can not deserialize value of type com.fasterxml.jackson.databind.deser.EnumDeserializationTest$TestEnum from number 1: not allowed to deserialize Enum value out of number: disable DeserializationConfig.DeserializationFeature.FAIL_ON_NUMBERS_FOR_ENUMS to allow\n at [Source: \"1\"; line: 1, column: 1]\"", 
          "isError": false, 
          "testMethod": "testNumbersToEnums", 
          "testClass": "com.fasterxml.jackson.databind.deser.EnumDeserializationTest"
        }, 
        {
          "failureName": "com.fasterxml.jackson.databind.exc.InvalidFormatException", 
          "detail": "Can not deserialize value of type com.fasterxml.jackson.databind.deser.EnumDefaultReadTest$SimpleEnumWithDefault from number 0: not allowed to deserialize Enum value out of number: disable DeserializationConfig.DeserializationFeature.FAIL_ON_NUMBERS_FOR_ENUMS to allow\n at [Source: \"0\"; line: 1, column: 1]", 
          "isError": true, 
          "testMethod": "testWithFailOnNumbersAndReadUnknownAsDefault", 
          "testClass": "com.fasterxml.jackson.databind.deser.EnumDefaultReadTest"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 27, 
          "numberRunning": 28, 
          "testClass": "com.fasterxml.jackson.databind.deser.EnumDeserializationTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }, 
        {
          "numberPassing": 3, 
          "numberRunning": 4, 
          "testClass": "com.fasterxml.jackson.databind.deser.EnumDefaultReadTest", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/195777970", 
        "date": "Jan 27, 2017 7:43:20 AM", 
        "id": 195777970
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/195752461", 
        "date": "Jan 27, 2017 4:16:49 AM", 
        "id": 195752461
      }
    }, 
    "repository": {
      "name": "FasterXML-jackson-databind", 
      "url": "https://github.com/FasterXML/jackson-databind", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 3038937
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/ff441e82825ea48d28baee6ae7f0f705ff421def", 
        "sha": "ff441e82825ea48d28baee6ae7f0f705ff421def", 
        "branchName": "2.8", 
        "date": "Jan 27, 2017 7:39:00 AM", 
        "repoName": "FasterXML/jackson-databind"
      }, 
      "buggyBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/4d34006e4d8a566c6c64a3a0e04c17e50d63bb82", 
        "sha": "4d34006e4d8a566c6c64a3a0e04c17e50d63bb82", 
        "branchName": "2.8", 
        "date": "Jan 27, 2017 4:12:29 AM", 
        "repoName": "FasterXML/jackson-databind"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/FasterXML-jackson-databind-195752461-195777970", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 7, 
        "numberDeleted": 2
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_7", 
    "diff": "diff --git a/src/main/java/com/fasterxml/jackson/databind/deser/std/EnumDeserializer.java b/src/main/java/com/fasterxml/jackson/databind/deser/std/EnumDeserializer.java\nindex 679c417..3c65723 100644\n--- a/src/main/java/com/fasterxml/jackson/databind/deser/std/EnumDeserializer.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/deser/std/EnumDeserializer.java\n@@ -167,17 +167,12 @@ public class EnumDeserializer\n             if (ctxt.isEnabled(DeserializationFeature.ACCEPT_EMPTY_STRING_AS_NULL_OBJECT)) {\n                 return null;\n             }\n-        } else {\n-            // [databind#149]: Allow use of 'String' indexes as well\n+        } else if (!ctxt.isEnabled(DeserializationFeature.FAIL_ON_NUMBERS_FOR_ENUMS)) {\n+            // [databind#149]: Allow use of 'String' indexes as well -- unless prohibited (as per above)\n             char c = name.charAt(0);\n             if (c >= '0' && c <= '9') {\n                 try {\n                     int index = Integer.parseInt(name);\n-                    if (ctxt.isEnabled(DeserializationFeature.FAIL_ON_NUMBERS_FOR_ENUMS)) {\n-                        return ctxt.handleWeirdNumberValue(_enumClass(), index,\n-                                \"not allowed to deserialize Enum value out of number: disable DeserializationConfig.DeserializationFeature.FAIL_ON_NUMBERS_FOR_ENUMS to allow\"\n-                                );\n-                    }\n                     if (index >= 0 && index < _enumsByIndex.length) {\n                         return _enumsByIndex[index];\n                     }\n", 
    "projectMetrics": {
      "numberSourceFiles": 397, 
      "numberLibrariesFailingModule": 17, 
      "numberTestFiles": 385, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 146750432, 
        "hostName": "local", 
        "totalMemory": 337117184, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 6:20:25 PM", 
      "projectRootPomPath": "./workspace/FasterXML/jackson-databind/195752461/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            42
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 42
        }, 
        "testing": {
          "stepDurations": [
            30
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 30
        }, 
        "cloning": {
          "stepDurations": [
            59
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 59
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 6:16:48 PM", 
      "totalDuration": 210
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1693, 
        "numberRunning": 1694, 
        "numberFailing": 0, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "com.fasterxml.jackson.databind.JsonMappingException", 
            "isError": true, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 0
      }, 
      "failingModule": "/root/workspace/FasterXML/jackson-databind/203042777", 
      "failingClasses": [
        {
          "numberPassing": 13, 
          "numberRunning": 14, 
          "testClass": "com.fasterxml.jackson.databind.ser.TestMapSerialization", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "com.fasterxml.jackson.databind.JsonMappingException", 
          "testMethod": "testConcurrentMaps", 
          "testClass": "com.fasterxml.jackson.databind.ser.TestMapSerialization", 
          "detail": "[no message for java.lang.NullPointerException]", 
          "isError": true
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/203306015", 
        "date": "Feb 20, 2017 3:55:22 AM", 
        "id": 203306015
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/203042777", 
        "date": "Feb 19, 2017 12:18:29 AM", 
        "id": 203042777
      }
    }, 
    "repository": {
      "name": "FasterXML-jackson-databind", 
      "url": "https://github.com/FasterXML/jackson-databind", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 3038937
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/64967c410514ec8a94bb11bb26d6a37fafafc14b", 
        "sha": "64967c410514ec8a94bb11bb26d6a37fafafc14b", 
        "branchName": "2.8", 
        "date": "Feb 20, 2017 3:47:15 AM", 
        "repoName": "FasterXML/jackson-databind"
      }, 
      "buggyBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/dc02ceac1c3d0939ddf8692f62be52da0e1a242b", 
        "sha": "dc02ceac1c3d0939ddf8692f62be52da0e1a242b", 
        "branchName": "2.8", 
        "date": "Feb 19, 2017 12:14:01 AM", 
        "repoName": "FasterXML/jackson-databind"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/FasterXML-jackson-databind-203042777-203306015", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 397, 
      "numberLibrariesFailingModule": 17, 
      "numberTestFiles": 385, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 3, 
        "numberDeleted": 17
      }
    }, 
    "bugId": "Bears_8", 
    "diff": "diff --git a/src/main/java/com/fasterxml/jackson/databind/ser/std/MapSerializer.java b/src/main/java/com/fasterxml/jackson/databind/ser/std/MapSerializer.java\nindex dbba25d..a3af8cc 100644\n--- a/src/main/java/com/fasterxml/jackson/databind/ser/std/MapSerializer.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/ser/std/MapSerializer.java\n@@ -952,7 +952,9 @@ public class MapSerializer\n         }\n         // [databind#1411]: TreeMap does not like null key... (although note that\n         //   check above should prevent this code from being called in that case)\n-        if (input.containsKey(null)) {\n+        // [databind#153]: but, apparently, some custom Maps do manage hit this\n+        //   problem.\n+        if (_hasNullKey(input)) {\n             TreeMap<Object,Object> result = new TreeMap<Object,Object>();\n             for (Map.Entry<?,?> entry : input.entrySet()) {\n                 Object key = entry.getKey();\n@@ -967,6 +969,22 @@ public class MapSerializer\n         return new TreeMap<Object,Object>(input);\n     }\n \n+    /**\n+     * @since 2.8.7\n+     */\n+    protected boolean _hasNullKey(Map<?,?> input) {\n+        // 19-Feb-2017, tatu: As per [databind#1513] there are many cases where `null`\n+        //   keys are not allowed, and even attempt to check for presence can cause\n+        //   problems. Without resorting to external sorting (and internal API change),\n+        //   or custom sortable Map implementation (more code) we can try black- or\n+        //   white-listing (that is; either skip known problem cases; or only apply for\n+        //   known good cases).\n+        //   While my first instinct was to do black-listing (remove Hashtable and ConcurrentHashMap),\n+        //   all in all it is probably better to just white list `HashMap` (and its sub-classes).\n+        \n+        return (input instanceof HashMap) && input.containsKey(null);\n+    }\n+    \n     protected void _writeNullKeyedEntry(JsonGenerator gen, SerializerProvider provider,\n             Object suppressableValue, Object value) throws IOException\n     {\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 249634072, 
        "hostName": "local", 
        "totalMemory": 340787200, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 6:31:00 AM", 
      "projectRootPomPath": "./workspace/FasterXML/jackson-databind/203042777/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            48
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 48
        }, 
        "testing": {
          "stepDurations": [
            41
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 41
        }, 
        "cloning": {
          "stepDurations": [
            45
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 45
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 6:27:44 AM", 
      "totalDuration": 190
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1695, 
        "numberRunning": 1696, 
        "numberFailing": 0, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "com.fasterxml.jackson.databind.JsonMappingException", 
            "isError": true, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 0
      }, 
      "failingModule": "/root/workspace/FasterXML/jackson-databind/203649003", 
      "failureDetails": [
        {
          "failureName": "com.fasterxml.jackson.databind.JsonMappingException", 
          "detail": "Unexpected token (VALUE_STRING), expected FIELD_NAME: missing property 'type' that is to contain type id  (for class com.fasterxml.jackson.databind.jsontype.TestPolymorphicWithDefaultImpl$AsProperty)\n at [Source: { \"value\": \"\" }; line: 1, column: 12] (through reference chain: com.fasterxml.jackson.databind.jsontype.TestPolymorphicWithDefaultImpl$AsPropertyWrapper[\"value\"])", 
          "isError": true, 
          "testMethod": "testWithEmptyStringAsNullObject1533", 
          "testClass": "com.fasterxml.jackson.databind.jsontype.TestPolymorphicWithDefaultImpl"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 12, 
          "numberRunning": 13, 
          "testClass": "com.fasterxml.jackson.databind.jsontype.TestPolymorphicWithDefaultImpl", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/204682356", 
        "date": "Feb 23, 2017 7:04:53 PM", 
        "id": 204682356
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/203649003", 
        "date": "Feb 21, 2017 2:22:54 AM", 
        "id": 203649003
      }
    }, 
    "repository": {
      "name": "FasterXML-jackson-databind", 
      "url": "https://github.com/FasterXML/jackson-databind", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 3038937
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/10d5ab37f06f7925bf959312bfb6211f5bc4a1cb", 
        "sha": "10d5ab37f06f7925bf959312bfb6211f5bc4a1cb", 
        "branchName": "2.8", 
        "date": "Feb 23, 2017 7:00:47 PM", 
        "repoName": "FasterXML/jackson-databind"
      }, 
      "buggyBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/ce37efcefbfab0fa91562a492f0f80af018a5313", 
        "sha": "ce37efcefbfab0fa91562a492f0f80af018a5313", 
        "branchName": "2.8", 
        "date": "Feb 21, 2017 2:06:13 AM", 
        "repoName": "FasterXML/jackson-databind"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/FasterXML-jackson-databind-203649003-204682356", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 0, 
        "numberDeleted": 7
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_9", 
    "diff": "diff --git a/src/main/java/com/fasterxml/jackson/databind/jsontype/impl/AsPropertyTypeDeserializer.java b/src/main/java/com/fasterxml/jackson/databind/jsontype/impl/AsPropertyTypeDeserializer.java\nindex d1d096a..7941e05 100644\n--- a/src/main/java/com/fasterxml/jackson/databind/jsontype/impl/AsPropertyTypeDeserializer.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/jsontype/impl/AsPropertyTypeDeserializer.java\n@@ -153,6 +153,13 @@ public class AsPropertyTypeDeserializer extends AsArrayTypeDeserializer\n         // or, something for which \"as-property\" won't work, changed into \"wrapper-array\" type:\n         if (p.getCurrentToken() == JsonToken.START_ARRAY) {\n             return super.deserializeTypedFromAny(p, ctxt);\n+        } else if (p.getCurrentToken() == JsonToken.VALUE_STRING) {\n+            if (ctxt.isEnabled(DeserializationFeature.ACCEPT_EMPTY_STRING_AS_NULL_OBJECT)) {\n+                String str = p.getText().trim();\n+                if (str.isEmpty()) {\n+                    return null;\n+                }\n+            }\n         }\n         ctxt.reportWrongTokenException(p, JsonToken.FIELD_NAME,\n                 \"missing property '\"+_typePropertyName+\"' that is to contain type id  (for class \"+baseTypeName()+\")\");\n", 
    "projectMetrics": {
      "numberSourceFiles": 397, 
      "numberLibrariesFailingModule": 17, 
      "numberTestFiles": 385, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 266944648, 
        "hostName": "local", 
        "totalMemory": 354942976, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 6:27:40 AM", 
      "projectRootPomPath": "./workspace/FasterXML/jackson-databind/203649003/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            52
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 52
        }, 
        "testing": {
          "stepDurations": [
            33
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 33
        }, 
        "cloning": {
          "stepDurations": [
            47
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 47
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 6:24:31 AM", 
      "totalDuration": 183
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1704, 
        "numberRunning": 1705, 
        "numberFailing": 0, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "com.fasterxml.jackson.databind.JsonMappingException", 
            "isError": true, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 0
      }, 
      "failingModule": "/root/workspace/FasterXML/jackson-databind/214497429", 
      "failingClasses": [
        {
          "numberPassing": 7, 
          "numberRunning": 8, 
          "testClass": "com.fasterxml.jackson.databind.struct.EmptyArrayAsNullTest", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "com.fasterxml.jackson.databind.JsonMappingException", 
          "testMethod": "testNullEnumFromEmptyArray", 
          "testClass": "com.fasterxml.jackson.databind.struct.EmptyArrayAsNullTest", 
          "detail": "Can not deserialize instance of com.fasterxml.jackson.databind.BaseMapTest$ABC out of START_ARRAY token\n at [Source:   [\n]; line: 1, column: 3]", 
          "isError": true
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/214500046", 
        "date": "Mar 24, 2017 3:32:01 AM", 
        "id": 214500046
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/214497429", 
        "date": "Mar 24, 2017 3:16:36 AM", 
        "id": 214497429
      }
    }, 
    "repository": {
      "name": "FasterXML-jackson-databind", 
      "url": "https://github.com/FasterXML/jackson-databind", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 3038937
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/b96a3b55d4c28171cb92bd2cafff853ea973d36f", 
        "sha": "b96a3b55d4c28171cb92bd2cafff853ea973d36f", 
        "branchName": "2.8", 
        "date": "Mar 24, 2017 3:27:28 AM", 
        "repoName": "FasterXML/jackson-databind"
      }, 
      "buggyBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/23d49e359217fad7b6f316fb31a7196ee4aed1b3", 
        "sha": "23d49e359217fad7b6f316fb31a7196ee4aed1b3", 
        "branchName": "2.8", 
        "date": "Mar 24, 2017 3:12:17 AM", 
        "repoName": "FasterXML/jackson-databind"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/FasterXML-jackson-databind-214497429-214500046", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 397, 
      "numberLibrariesFailingModule": 17, 
      "numberTestFiles": 387, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 10, 
        "numberDeleted": 3
      }
    }, 
    "bugId": "Bears_10", 
    "diff": "diff --git a/src/main/java/com/fasterxml/jackson/databind/deser/std/EnumDeserializer.java b/src/main/java/com/fasterxml/jackson/databind/deser/std/EnumDeserializer.java\nindex 3c65723..c3ad93e 100644\n--- a/src/main/java/com/fasterxml/jackson/databind/deser/std/EnumDeserializer.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/deser/std/EnumDeserializer.java\n@@ -165,7 +165,7 @@ public class EnumDeserializer\n         name = name.trim();\n         if (name.length() == 0) {\n             if (ctxt.isEnabled(DeserializationFeature.ACCEPT_EMPTY_STRING_AS_NULL_OBJECT)) {\n-                return null;\n+                return getEmptyValue(ctxt);\n             }\n         } else if (!ctxt.isEnabled(DeserializationFeature.FAIL_ON_NUMBERS_FOR_ENUMS)) {\n             // [databind#149]: Allow use of 'String' indexes as well -- unless prohibited (as per above)\n@@ -195,15 +195,8 @@ public class EnumDeserializer\n     protected Object _deserializeOther(JsonParser p, DeserializationContext ctxt) throws IOException\n     {\n         // [databind#381]\n-        if (ctxt.isEnabled(DeserializationFeature.UNWRAP_SINGLE_VALUE_ARRAYS)\n-                && p.isExpectedStartArrayToken()) {\n-            p.nextToken();\n-            final Object parsed = deserialize(p, ctxt);\n-            JsonToken curr = p.nextToken();\n-            if (curr != JsonToken.END_ARRAY) {\n-                handleMissingEndArrayForSingle(p, ctxt);\n-            }\n-            return parsed;\n+        if (p.hasToken(JsonToken.START_ARRAY)) {\n+            return _deserializeFromArray(p, ctxt);\n         }\n         return ctxt.handleUnexpectedToken(_enumClass(), p);\n     }\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 170433536, 
        "hostName": "local", 
        "totalMemory": 339214336, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 6:13:36 AM", 
      "projectRootPomPath": "./workspace/FasterXML/jackson-databind/214497429/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            54
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 54
        }, 
        "testing": {
          "stepDurations": [
            39
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 39
        }, 
        "cloning": {
          "stepDurations": [
            52
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 52
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 6:09:40 AM", 
      "totalDuration": 229
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1705, 
        "numberRunning": 1706, 
        "numberFailing": 1, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "junit.framework.ComparisonFailure", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 0
      }, 
      "failingModule": "/root/workspace/FasterXML/jackson-databind/215036598", 
      "failureDetails": [
        {
          "failureName": "junit.framework.ComparisonFailure", 
          "detail": "expected:<{\"map\":{\"[1]\":3}}> but was:<{\"map\":{\"[B]\":3}}>", 
          "isError": false, 
          "testMethod": "testMapWithEnumKeys", 
          "testClass": "com.fasterxml.jackson.databind.ser.TestEnumSerialization"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 22, 
          "numberRunning": 23, 
          "testClass": "com.fasterxml.jackson.databind.ser.TestEnumSerialization", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/215111320", 
        "date": "Mar 26, 2017 1:37:59 AM", 
        "id": 215111320
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/215036598", 
        "date": "Mar 25, 2017 7:52:45 PM", 
        "id": 215036598
      }
    }, 
    "repository": {
      "name": "FasterXML-jackson-databind", 
      "url": "https://github.com/FasterXML/jackson-databind", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 3038937
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/934f485d4c62854dd2ef48ed7ebb238f3abec0b7", 
        "sha": "934f485d4c62854dd2ef48ed7ebb238f3abec0b7", 
        "branchName": "2.8", 
        "date": "Mar 26, 2017 1:33:25 AM", 
        "repoName": "FasterXML/jackson-databind"
      }, 
      "buggyBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/d892303fa5cdcfd5278f6c2a2b1b008d720f7b15", 
        "sha": "d892303fa5cdcfd5278f6c2a2b1b008d720f7b15", 
        "branchName": "2.8", 
        "date": "Mar 25, 2017 7:48:09 PM", 
        "repoName": "FasterXML/jackson-databind"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/FasterXML-jackson-databind-215036598-215111320", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 2, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 22, 
        "numberDeleted": 9
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_11", 
    "diff": "diff --git a/src/main/java/com/fasterxml/jackson/databind/ser/std/StdKeySerializer.java b/src/main/java/com/fasterxml/jackson/databind/ser/std/StdKeySerializer.java\nindex b708a02..fceba52 100644\n--- a/src/main/java/com/fasterxml/jackson/databind/ser/std/StdKeySerializer.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/ser/std/StdKeySerializer.java\n@@ -31,12 +31,15 @@ public class StdKeySerializer extends StdSerializer<Object>\n         } else if (cls.isEnum()) {\n             // 24-Sep-2015, tatu: Minor improvement over older (2.6.2 and before) code: at least\n             //     use name/toString() variation for as per configuration\n-            Enum<?> en = (Enum<?>) value;\n-\n             if (provider.isEnabled(SerializationFeature.WRITE_ENUMS_USING_TO_STRING)) {\n-                str = en.toString();\n+                str = value.toString();\n             } else {\n-                str = en.name();\n+                Enum<?> en = (Enum<?>) value;\n+                if (provider.isEnabled(SerializationFeature.WRITE_ENUMS_USING_TO_STRING)) {\n+                    str = String.valueOf(en.ordinal());\n+                } else {\n+                    str = en.name();\n+                }\n             }\n         } else if (value instanceof Date) {\n             provider.defaultSerializeDateKey((Date) value, g);\ndiff --git a/src/main/java/com/fasterxml/jackson/databind/ser/std/StdKeySerializers.java b/src/main/java/com/fasterxml/jackson/databind/ser/std/StdKeySerializers.java\nindex fd6c99b..2462f2e 100644\n--- a/src/main/java/com/fasterxml/jackson/databind/ser/std/StdKeySerializers.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/ser/std/StdKeySerializers.java\n@@ -144,9 +144,19 @@ public class StdKeySerializers\n                 break;\n             case TYPE_ENUM:\n                 {\n-                    String str = provider.isEnabled(SerializationFeature.WRITE_ENUMS_USING_TO_STRING)\n-                            ? value.toString() : ((Enum<?>) value).name();\n-                    g.writeFieldName(str);\n+                    String key;\n+\n+                    if (provider.isEnabled(SerializationFeature.WRITE_ENUMS_USING_TO_STRING)) {\n+                        key = value.toString();\n+                    } else {\n+                        Enum<?> e = (Enum<?>) value;\n+                        if (provider.isEnabled(SerializationFeature.WRITE_ENUMS_USING_INDEX)) {\n+                            key = String.valueOf(e.ordinal());\n+                        } else {\n+                            key = e.name();\n+                        }\n+                    }\n+                    g.writeFieldName(key);\n                 }\n                 break;\n             case TYPE_TO_STRING:\n@@ -250,6 +260,10 @@ public class StdKeySerializers\n                 return;\n             }\n             Enum<?> en = (Enum<?>) value;\n+            if (serializers.isEnabled(SerializationFeature.WRITE_ENUMS_USING_INDEX)) {\n+                g.writeFieldName(String.valueOf(en.ordinal()));\n+                return;\n+            }\n             g.writeFieldName(_values.serializedValueFor(en));\n         }\n     }\n", 
    "projectMetrics": {
      "numberSourceFiles": 397, 
      "numberLibrariesFailingModule": 17, 
      "numberTestFiles": 388, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 183977032, 
        "hostName": "local", 
        "totalMemory": 338165760, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 6:09:27 AM", 
      "projectRootPomPath": "./workspace/FasterXML/jackson-databind/215036598/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            46
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 46
        }, 
        "testing": {
          "stepDurations": [
            44
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 44
        }, 
        "cloning": {
          "stepDurations": [
            46
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 46
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 6:06:07 AM", 
      "totalDuration": 195
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1708, 
        "numberRunning": 1712, 
        "numberFailing": 4, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "junit.framework.AssertionFailedError", 
            "isError": false, 
            "occurrences": 2
          }, 
          {
            "failureName": "junit.framework.ComparisonFailure", 
            "isError": false, 
            "occurrences": 2
          }
        ], 
        "numberSkipping": 0
      }, 
      "failingModule": "/root/workspace/FasterXML/jackson-databind/215111320", 
      "failingClasses": [
        {
          "numberPassing": 2, 
          "numberRunning": 6, 
          "testClass": "com.fasterxml.jackson.databind.deser.builder.BuilderWithUnwrappedTest", 
          "numberFailing": 4, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "junit.framework.AssertionFailedError", 
          "testMethod": "testWithUnwrappedAndCreatorSingleParameterInMiddle", 
          "testClass": "com.fasterxml.jackson.databind.deser.builder.BuilderWithUnwrappedTest", 
          "detail": "expected:<30> but was:<0>", 
          "isError": false
        }, 
        {
          "failureName": "junit.framework.ComparisonFailure", 
          "testMethod": "testWithUnwrappedAndCreatorMultipleParametersAtBeginning", 
          "testClass": "com.fasterxml.jackson.databind.deser.builder.BuilderWithUnwrappedTest", 
          "detail": "expected:<John> but was:<null>", 
          "isError": false
        }, 
        {
          "failureName": "junit.framework.AssertionFailedError", 
          "testMethod": "testWithUnwrappedAndCreatorMultipleParametersInMiddle", 
          "testClass": "com.fasterxml.jackson.databind.deser.builder.BuilderWithUnwrappedTest", 
          "detail": "expected:<30> but was:<0>", 
          "isError": false
        }, 
        {
          "failureName": "junit.framework.ComparisonFailure", 
          "testMethod": "testWithUnwrappedAndCreatorSingleParameterAtBeginning", 
          "testClass": "com.fasterxml.jackson.databind.deser.builder.BuilderWithUnwrappedTest", 
          "detail": "expected:<John> but was:<null>", 
          "isError": false
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/215799347", 
        "date": "Mar 28, 2017 7:09:55 AM", 
        "id": 215799347
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/215111320", 
        "date": "Mar 26, 2017 1:37:59 AM", 
        "id": 215111320
      }
    }, 
    "repository": {
      "name": "FasterXML-jackson-databind", 
      "url": "https://github.com/FasterXML/jackson-databind", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 3038937
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/e08dafef4faa7d71330160dafcbe77536d90e809", 
        "sha": "e08dafef4faa7d71330160dafcbe77536d90e809", 
        "branchName": "2.8", 
        "date": "Mar 28, 2017 7:05:43 AM", 
        "repoName": "FasterXML/jackson-databind"
      }, 
      "buggyBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/934f485d4c62854dd2ef48ed7ebb238f3abec0b7", 
        "sha": "934f485d4c62854dd2ef48ed7ebb238f3abec0b7", 
        "branchName": "2.8", 
        "date": "Mar 26, 2017 1:33:25 AM", 
        "repoName": "FasterXML/jackson-databind"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/FasterXML-jackson-databind-215111320-215799347", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 397, 
      "numberLibrariesFailingModule": 17, 
      "numberTestFiles": 389, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 47, 
        "numberDeleted": 22
      }
    }, 
    "bugId": "Bears_12", 
    "diff": "diff --git a/src/main/java/com/fasterxml/jackson/databind/deser/BuilderBasedDeserializer.java b/src/main/java/com/fasterxml/jackson/databind/deser/BuilderBasedDeserializer.java\nindex 7b92423..817e29e 100644\n--- a/src/main/java/com/fasterxml/jackson/databind/deser/BuilderBasedDeserializer.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/deser/BuilderBasedDeserializer.java\n@@ -26,7 +26,7 @@ public class BuilderBasedDeserializer\n     private static final long serialVersionUID = 1L;\n \n     protected final AnnotatedMethod _buildMethod;\n-\t\n+\n     /*\n     /**********************************************************\n     /* Life-cycle, construction, initialization\n@@ -66,7 +66,7 @@ public class BuilderBasedDeserializer\n         super(src, ignoreAllUnknown);\n         _buildMethod = src._buildMethod;\n     }\n-    \n+\n     protected BuilderBasedDeserializer(BuilderBasedDeserializer src, NameTransformer unwrapper) {\n         super(src, unwrapper);\n         _buildMethod = src._buildMethod;\n@@ -86,7 +86,7 @@ public class BuilderBasedDeserializer\n         super(src, props);\n         _buildMethod = src._buildMethod;\n     }\n-    \n+\n     @Override\n     public JsonDeserializer<Object> unwrappingDeserializer(NameTransformer unwrapper)\n     {\n@@ -117,13 +117,13 @@ public class BuilderBasedDeserializer\n         SettableBeanProperty[] props = _beanProperties.getPropertiesInInsertionOrder();\n         return new BeanAsArrayBuilderDeserializer(this, props, _buildMethod);\n     }\n-    \n+\n     /*\n     /**********************************************************\n     /* JsonDeserializer implementation\n     /**********************************************************\n      */\n-    \n+\n     protected final Object finishBuild(DeserializationContext ctxt, Object builder)\n             throws IOException\n     {\n@@ -137,7 +137,7 @@ public class BuilderBasedDeserializer\n             return wrapInstantiationProblem(e, ctxt);\n         }\n     }\n-    \n+\n     /**\n      * Main deserialization method for bean-based objects (POJOs).\n      */\n@@ -146,7 +146,7 @@ public class BuilderBasedDeserializer\n         throws IOException\n     {\n         JsonToken t = p.getCurrentToken();\n-        \n+\n         // common case first:\n         if (t == JsonToken.START_OBJECT) {\n             t = p.nextToken();\n@@ -197,7 +197,7 @@ public class BuilderBasedDeserializer\n          */\n         return finishBuild(ctxt, _deserialize(p, ctxt, builder));\n     }\n-    \n+\n     /*\n     /**********************************************************\n     /* Concrete deserialization methods\n@@ -207,7 +207,7 @@ public class BuilderBasedDeserializer\n     protected final Object _deserialize(JsonParser p,\n             DeserializationContext ctxt, Object builder)\n         throws IOException, JsonProcessingException\n-    {        \n+    {\n         if (_injectables != null) {\n             injectValues(ctxt, builder);\n         }\n@@ -233,7 +233,7 @@ public class BuilderBasedDeserializer\n             // Skip field name:\n             p.nextToken();\n             SettableBeanProperty prop = _beanProperties.find(propName);\n-            \n+\n             if (prop != null) { // normal case\n                 try {\n                     builder = prop.deserializeSetAndReturn(p, ctxt, builder);\n@@ -246,7 +246,7 @@ public class BuilderBasedDeserializer\n         }\n         return builder;\n     }\n-    \n+\n     /**\n      * Streamlined version that is only used when no \"special\"\n      * features are enabled.\n@@ -323,7 +323,7 @@ public class BuilderBasedDeserializer\n      * Method called to deserialize bean using \"property-based creator\":\n      * this means that a non-default constructor or factory method is\n      * called, and then possibly other setters. The trick is that\n-     * values for creator method need to be buffered, first; and \n+     * values for creator method need to be buffered, first; and\n      * due to non-guaranteed ordering possibly some other properties\n      * as well.\n      */\n@@ -332,7 +332,7 @@ public class BuilderBasedDeserializer\n     protected final Object _deserializeUsingPropertyBased(final JsonParser p,\n             final DeserializationContext ctxt)\n         throws IOException, JsonProcessingException\n-    { \n+    {\n         final PropertyBasedCreator creator = _propertyBasedCreator;\n         PropertyValueBuffer buffer = creator.startBuilding(p, ctxt, _objectIdReader);\n \n@@ -414,13 +414,13 @@ public class BuilderBasedDeserializer\n         }\n         return bean;\n     }\n-    \n+\n     /*\n     /**********************************************************\n     /* Deserializing when we have to consider an active View\n     /**********************************************************\n      */\n-    \n+\n     protected final Object deserializeWithView(JsonParser p, DeserializationContext ctxt,\n             Object bean, Class<?> activeView)\n         throws IOException, JsonProcessingException\n@@ -447,7 +447,7 @@ public class BuilderBasedDeserializer\n         }\n         return bean;\n     }\n-    \n+\n     /*\n     /**********************************************************\n     /* Handling for cases where we have \"unwrapped\" values\n@@ -477,7 +477,7 @@ public class BuilderBasedDeserializer\n         }\n \n         final Class<?> activeView = _needViewProcesing ? ctxt.getActiveView() : null;\n-        \n+\n         for (; p.getCurrentToken() != JsonToken.END_OBJECT; p.nextToken()) {\n             String propName = p.getCurrentName();\n             p.nextToken();\n@@ -515,7 +515,7 @@ public class BuilderBasedDeserializer\n         tokens.writeEndObject();\n         _unwrappedPropertyHandler.processUnwrapped(p, ctxt, bean, tokens);\n         return bean;\n-    }    \n+    }\n \n     @SuppressWarnings(\"resource\")\n     protected Object deserializeWithUnwrapped(JsonParser p,\n@@ -580,31 +580,7 @@ public class BuilderBasedDeserializer\n             // creator property?\n             SettableBeanProperty creatorProp = creator.findCreatorProperty(propName);\n             if (creatorProp != null) {\n-                // Last creator property to set?\n-                if (buffer.assignParameter(creatorProp, creatorProp.deserialize(p, ctxt))) {\n-                    t = p.nextToken(); // to move to following FIELD_NAME/END_OBJECT\n-                    Object bean;\n-                    try {\n-                        bean = creator.build(ctxt, buffer);\n-                    } catch (Exception e) {\n-                        wrapAndThrow(e, _beanType.getRawClass(), propName, ctxt);\n-                        continue; // never gets here\n-                    }\n-                    // if so, need to copy all remaining tokens into buffer\n-                    while (t == JsonToken.FIELD_NAME) {\n-                        p.nextToken(); // to skip name\n-                        tokens.copyCurrentStructure(p);\n-                        t = p.nextToken();\n-                    }\n-                    tokens.writeEndObject();\n-                    if (bean.getClass() != _beanType.getRawClass()) {\n-                        // !!! 08-Jul-2011, tatu: Could probably support; but for now\n-                        //   it's too complicated, so bail out\n-                        ctxt.reportMappingException(\"Can not create polymorphic instances with unwrapped values\");\n-                        return null;\n-                    }\n-                    return _unwrappedPropertyHandler.processUnwrapped(p, ctxt, bean, tokens);\n-                }\n+                buffer.assignParameter(creatorProp, creatorProp.deserialize(p, ctxt));\n                 continue;\n             }\n             // Object Id property?\n@@ -646,7 +622,7 @@ public class BuilderBasedDeserializer\n     /* external type id\n     /**********************************************************\n      */\n-    \n+\n     protected Object deserializeWithExternalTypeId(JsonParser p, DeserializationContext ctxt)\n         throws IOException, JsonProcessingException\n     {\n@@ -699,15 +675,14 @@ public class BuilderBasedDeserializer\n                 } catch (Exception e) {\n                     wrapAndThrow(e, bean, propName, ctxt);\n                 }\n-                continue;\n             } else {\n                 // Unknown: let's call handler method\n-                handleUnknownProperty(p, ctxt, bean, propName);         \n+                handleUnknownProperty(p, ctxt, bean, propName);\n             }\n         }\n         // and when we get this far, let's try finalizing the deal:\n         return ext.complete(p, ctxt, bean);\n-    }        \n+    }\n \n     protected Object deserializeUsingPropertyBasedWithExternalTypeId(JsonParser p,\n     \t\tDeserializationContext ctxt)\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 91458944, 
        "hostName": "local", 
        "totalMemory": 319815680, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 6:05:55 AM", 
      "projectRootPomPath": "./workspace/FasterXML/jackson-databind/215111320/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            46
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 46
        }, 
        "testing": {
          "stepDurations": [
            24
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 24
        }, 
        "cloning": {
          "stepDurations": [
            48
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 48
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 6:02:54 AM", 
      "totalDuration": 176
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1712, 
        "numberRunning": 1713, 
        "numberFailing": 0, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "com.fasterxml.jackson.databind.JsonMappingException", 
            "isError": true, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 0
      }, 
      "failingModule": "/root/workspace/FasterXML/jackson-databind/216970075", 
      "failureDetails": [
        {
          "failureName": "com.fasterxml.jackson.databind.JsonMappingException", 
          "detail": "Could not find creator property with name 'name' (in class com.fasterxml.jackson.databind.deser.ReadOrWriteOnlyTest$Foo1345)\n at [Source: {\"name\":\"test\"}; line: 1, column: 1]", 
          "isError": true, 
          "testMethod": "testReadOnly1345", 
          "testClass": "com.fasterxml.jackson.databind.deser.ReadOrWriteOnlyTest"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 2, 
          "numberRunning": 3, 
          "testClass": "com.fasterxml.jackson.databind.deser.ReadOrWriteOnlyTest", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/216985681", 
        "date": "Mar 31, 2017 2:02:41 AM", 
        "id": 216985681
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/216970075", 
        "date": "Mar 31, 2017 12:57:45 AM", 
        "id": 216970075
      }
    }, 
    "repository": {
      "name": "FasterXML-jackson-databind", 
      "url": "https://github.com/FasterXML/jackson-databind", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 3038937
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/04c33a5e2abb2aeec6fb1a054ede951b3519d3b4", 
        "sha": "04c33a5e2abb2aeec6fb1a054ede951b3519d3b4", 
        "branchName": "2.8", 
        "date": "Mar 31, 2017 1:58:23 AM", 
        "repoName": "FasterXML/jackson-databind"
      }, 
      "buggyBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/5f1039fd154df1337741fa1b3c1c5e61a63456d4", 
        "sha": "5f1039fd154df1337741fa1b3c1c5e61a63456d4", 
        "branchName": "2.8", 
        "date": "Mar 31, 2017 12:53:27 AM", 
        "repoName": "FasterXML/jackson-databind"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/FasterXML-jackson-databind-216970075-216985681", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 12, 
        "numberDeleted": 9
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_13", 
    "diff": "diff --git a/src/main/java/com/fasterxml/jackson/databind/deser/BeanDeserializerFactory.java b/src/main/java/com/fasterxml/jackson/databind/deser/BeanDeserializerFactory.java\nindex 4c61444..c69169f 100644\n--- a/src/main/java/com/fasterxml/jackson/databind/deser/BeanDeserializerFactory.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/deser/BeanDeserializerFactory.java\n@@ -441,9 +441,11 @@ public class BeanDeserializerFactory\n             BeanDescription beanDesc, BeanDeserializerBuilder builder)\n         throws JsonMappingException\n     {\n-        final SettableBeanProperty[] creatorProps =\n-                builder.getValueInstantiator().getFromObjectArguments(ctxt.getConfig());\n         final boolean isConcrete = !beanDesc.getType().isAbstract();\n+        final SettableBeanProperty[] creatorProps = isConcrete\n+                ? builder.getValueInstantiator().getFromObjectArguments(ctxt.getConfig())\n+                : null;\n+        final boolean hasCreatorProps = (creatorProps != null);\n         \n         // 01-May-2016, tatu: Which base type to use here gets tricky, since\n         //   it may often make most sense to use general type for overrides,\n@@ -490,8 +492,8 @@ public class BeanDeserializerFactory\n                 }\n             }\n         }\n-        final boolean useGettersAsSetters = (ctxt.isEnabled(MapperFeature.USE_GETTERS_AS_SETTERS)\n-                && ctxt.isEnabled(MapperFeature.AUTO_DETECT_GETTERS));\n+        final boolean useGettersAsSetters = ctxt.isEnabled(MapperFeature.USE_GETTERS_AS_SETTERS)\n+                && ctxt.isEnabled(MapperFeature.AUTO_DETECT_GETTERS);\n \n         // Ok: let's then filter out property definitions\n         List<BeanPropertyDefinition> propDefs = filterBeanProps(ctxt,\n@@ -531,7 +533,7 @@ public class BeanDeserializerFactory\n             }\n             // 25-Sep-2014, tatu: No point in finding constructor parameters for abstract types\n             //   (since they are never used anyway)\n-            if (isConcrete && propDef.hasConstructorParameter()) {\n+            if (hasCreatorProps && propDef.hasConstructorParameter()) {\n                 /* If property is passed via constructor parameter, we must\n                  * handle things in special way. Not sure what is the most optimal way...\n                  * for now, let's just call a (new) method in builder, which does nothing.\n@@ -548,8 +550,13 @@ public class BeanDeserializerFactory\n                     }\n                 }\n                 if (cprop == null) {\n-                    ctxt.reportMappingException(\"Could not find creator property with name '%s' (in class %s)\",\n-                            name, beanDesc.getBeanClass().getName());\n+                    List<String> n = new ArrayList<>();\n+                    for (SettableBeanProperty cp : creatorProps) {\n+                        n.add(cp.getName());\n+                    }\n+                    ctxt.reportBadPropertyDefinition(beanDesc, propDef,\n+                            \"Could not find creator property with name '%s' (known Creator properties: %s)\",\n+                            name, n);\n                     continue;\n                 }\n                 if (prop != null) {\n", 
    "projectMetrics": {
      "numberSourceFiles": 397, 
      "numberLibrariesFailingModule": 17, 
      "numberTestFiles": 392, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 260055472, 
        "hostName": "local", 
        "totalMemory": 345505792, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 5:59:43 AM", 
      "projectRootPomPath": "./workspace/FasterXML/jackson-databind/216970075/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            55
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 55
        }, 
        "testing": {
          "stepDurations": [
            24
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 24
        }, 
        "cloning": {
          "stepDurations": [
            47
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 47
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 5:56:37 AM", 
      "totalDuration": 180
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1573, 
        "numberRunning": 1574, 
        "numberFailing": 1, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "junit.framework.AssertionFailedError", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 0
      }, 
      "failingModule": "/root/workspace/FasterXML/jackson-databind/221825856", 
      "failingClasses": [
        {
          "numberPassing": 0, 
          "numberRunning": 1, 
          "testClass": "com.fasterxml.jackson.databind.interop.IllegalTypesCheckTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "junit.framework.AssertionFailedError", 
          "testMethod": "testIssue1599", 
          "testClass": "com.fasterxml.jackson.databind.interop.IllegalTypesCheckTest", 
          "detail": "Expected an exception with one of substrings ([Illegal type]): got one with message \"N/A\n at [Source: {\"id\": 124,\n \"obj\":[ \"com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl\",\n  {\n    \"transletBytecodes\" : [ \"AAIAZQ==\" ],\n    \"transletName\" : \"a.b\",\n    \"outputProperties\" : { }\n  }\n ]\n}; line: 6, column: 26] (through reference chain: com.fasterxml.jackson.databind.interop.Bean1599[\"obj\"]->com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl[\"outputProperties\"])\"", 
          "isError": false
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/221903238", 
        "date": "Apr 14, 2017 12:14:16 AM", 
        "id": 221903238
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/221825856", 
        "date": "Apr 13, 2017 8:05:15 PM", 
        "id": 221825856
      }
    }, 
    "repository": {
      "name": "FasterXML-jackson-databind", 
      "url": "https://github.com/FasterXML/jackson-databind", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 3038937
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/6ce32ffd18facac6abdbbf559c817b47fcb622c1", 
        "sha": "6ce32ffd18facac6abdbbf559c817b47fcb622c1", 
        "branchName": "2.7", 
        "date": "Apr 14, 2017 12:08:10 AM", 
        "repoName": "FasterXML/jackson-databind"
      }, 
      "buggyBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/28ec8a47d381311818f805ae76bf84da30f516f9", 
        "sha": "28ec8a47d381311818f805ae76bf84da30f516f9", 
        "branchName": "2.7", 
        "date": "Apr 13, 2017 8:00:31 PM", 
        "repoName": "FasterXML/jackson-databind"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/FasterXML-jackson-databind-221825856-221903238", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 389, 
      "numberLibrariesFailingModule": 14, 
      "numberTestFiles": 365, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 0, 
        "numberDeleted": 23
      }
    }, 
    "bugId": "Bears_14", 
    "diff": "diff --git a/src/main/java/com/fasterxml/jackson/databind/deser/BeanDeserializerFactory.java b/src/main/java/com/fasterxml/jackson/databind/deser/BeanDeserializerFactory.java\nindex 9fcb68b..ad37dd1 100644\n--- a/src/main/java/com/fasterxml/jackson/databind/deser/BeanDeserializerFactory.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/deser/BeanDeserializerFactory.java\n@@ -139,6 +139,8 @@ public class BeanDeserializerFactory\n         if (!isPotentialBeanType(type.getRawClass())) {\n             return null;\n         }\n+        // For checks like [databind#1599]\n+        checkIllegalTypes(ctxt, type, beanDesc);\n         // Use generic bean introspection to build deserializer\n         return buildBeanDeserializer(ctxt, type, beanDesc);\n     }\n@@ -834,4 +836,25 @@ public class BeanDeserializerFactory\n         // We default to 'false', i.e. not ignorable\n         return (status == null) ? false : status.booleanValue(); \n     }\n+\n+    /**\n+     * @since 2.8.9\n+     */\n+    protected void checkIllegalTypes(DeserializationContext ctxt, JavaType type,\n+            BeanDescription beanDesc)\n+        throws JsonMappingException\n+    {\n+        // There are certain nasty classes that could cause problems, mostly\n+        // via default typing -- catch them here.\n+        Class<?> raw = type.getRawClass();\n+        String name = raw.getSimpleName();\n+\n+        if (\"TemplatesImpl\".equals(name)) { // [databind#1599] \n+            if (raw.getName().startsWith(\"com.sun.org.apache.xalan\")) {\n+                throw JsonMappingException.from(ctxt,\n+                        String.format(\"Illegal type (%s) to deserialize: prevented for security reasons\",\n+                                name));\n+            }\n+        }\n+    }\n }\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 121731360, 
        "hostName": "local", 
        "totalMemory": 381157376, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 9, 2018 11:35:04 PM", 
      "projectRootPomPath": "./workspace/FasterXML/jackson-databind/221825856/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            52
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 52
        }, 
        "testing": {
          "stepDurations": [
            31
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 31
        }, 
        "cloning": {
          "stepDurations": [
            56
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 56
        }
      }, 
      "reproductionDateBeginning": "Oct 9, 2018 11:31:34 PM", 
      "totalDuration": 203
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1574, 
        "numberRunning": 1575, 
        "numberFailing": 1, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "junit.framework.ComparisonFailure", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 0
      }, 
      "failingModule": "/root/workspace/FasterXML/jackson-databind/223024976", 
      "failureDetails": [
        {
          "failureName": "junit.framework.ComparisonFailure", 
          "detail": "expected:<{\"alwaysClass\":[1],\"alwaysProp\":2}> but was:<{\"alwaysClass\":[{\"id\":1,\"value\":13}],\"alwaysProp\":2}>", 
          "isError": false, 
          "testMethod": "testIssue1607", 
          "testClass": "com.fasterxml.jackson.databind.objectid.AlwaysAsReferenceFirstTest"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 1, 
          "numberRunning": 2, 
          "testClass": "com.fasterxml.jackson.databind.objectid.AlwaysAsReferenceFirstTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/223291136", 
        "date": "Apr 18, 2017 9:51:23 PM", 
        "id": 223291136
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/223024976", 
        "date": "Apr 18, 2017 7:15:44 AM", 
        "id": 223024976
      }
    }, 
    "repository": {
      "name": "FasterXML-jackson-databind", 
      "url": "https://github.com/FasterXML/jackson-databind", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 3038937
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/ec859af181fa5b2da62077d00154e3c13c9d8f28", 
        "sha": "ec859af181fa5b2da62077d00154e3c13c9d8f28", 
        "branchName": "2.7", 
        "date": "Apr 18, 2017 9:46:33 PM", 
        "repoName": "FasterXML/jackson-databind"
      }, 
      "buggyBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/8e98ed66bc262681a38052682ec5b6a42120f7f7", 
        "sha": "8e98ed66bc262681a38052682ec5b6a42120f7f7", 
        "branchName": "2.7", 
        "date": "Apr 18, 2017 7:11:02 AM", 
        "repoName": "FasterXML/jackson-databind"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/FasterXML-jackson-databind-223024976-223291136", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 3, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 14, 
        "numberDeleted": 17
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_15", 
    "diff": "diff --git a/src/main/java/com/fasterxml/jackson/databind/introspect/JacksonAnnotationIntrospector.java b/src/main/java/com/fasterxml/jackson/databind/introspect/JacksonAnnotationIntrospector.java\nindex d74a2e9..f2bc1ca 100644\n--- a/src/main/java/com/fasterxml/jackson/databind/introspect/JacksonAnnotationIntrospector.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/introspect/JacksonAnnotationIntrospector.java\n@@ -576,10 +576,13 @@ public class JacksonAnnotationIntrospector\n     @Override\n     public ObjectIdInfo findObjectReferenceInfo(Annotated ann, ObjectIdInfo objectIdInfo) {\n         JsonIdentityReference ref = _findAnnotation(ann, JsonIdentityReference.class);\n-        if (ref != null) {\n-            objectIdInfo = objectIdInfo.withAlwaysAsId(ref.alwaysAsId());\n+        if (ref == null) {\n+            return objectIdInfo;\n         }\n-        return objectIdInfo;\n+        if (objectIdInfo == null) {\n+            objectIdInfo = ObjectIdInfo.empty();\n+        }\n+        return objectIdInfo.withAlwaysAsId(ref.alwaysAsId());\n     }\n \n     /*\ndiff --git a/src/main/java/com/fasterxml/jackson/databind/introspect/ObjectIdInfo.java b/src/main/java/com/fasterxml/jackson/databind/introspect/ObjectIdInfo.java\nindex 0457ec0..049ab35 100644\n--- a/src/main/java/com/fasterxml/jackson/databind/introspect/ObjectIdInfo.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/introspect/ObjectIdInfo.java\n@@ -19,6 +19,11 @@ public class ObjectIdInfo\n     protected final Class<?> _scope;\n     protected final boolean _alwaysAsId;\n \n+    /**\n+     * @since 2.8.9\n+     */\n+    private final static ObjectIdInfo EMPTY = new ObjectIdInfo(PropertyName.NO_NAME, Object.class, null, false, null);\n+\n     public ObjectIdInfo(PropertyName name, Class<?> scope, Class<? extends ObjectIdGenerator<?>> gen,\n             Class<? extends ObjectIdResolver> resolver)\n     {\n@@ -56,6 +61,10 @@ public class ObjectIdInfo\n         _resolver = resolver;\n     }\n \n+    public static ObjectIdInfo empty() {\n+        return EMPTY;\n+    }\n+\n     public ObjectIdInfo withAlwaysAsId(boolean state) {\n         if (_alwaysAsId == state) {\n             return this;\ndiff --git a/src/main/java/com/fasterxml/jackson/databind/ser/std/BeanSerializerBase.java b/src/main/java/com/fasterxml/jackson/databind/ser/std/BeanSerializerBase.java\nindex 658786d..3b838cc 100644\n--- a/src/main/java/com/fasterxml/jackson/databind/ser/std/BeanSerializerBase.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/ser/std/BeanSerializerBase.java\n@@ -429,15 +429,14 @@ public abstract class BeanSerializerBase\n             if (objectIdInfo == null) {\n                 // no ObjectId override, but maybe ObjectIdRef?\n                 if (oiw != null) {\n-                    objectIdInfo = intr.findObjectReferenceInfo(accessor,\n-                            new ObjectIdInfo(NAME_FOR_OBJECT_REF, null, null, null));\n-                    oiw = _objectIdWriter.withAlwaysAsId(objectIdInfo.getAlwaysAsId());\n+                    objectIdInfo = intr.findObjectReferenceInfo(accessor, null);\n+                    if (objectIdInfo != null) {\n+                        oiw = _objectIdWriter.withAlwaysAsId(objectIdInfo.getAlwaysAsId());\n+                    }\n                 }\n             } else {\n-                /* Ugh: mostly copied from BeanSerializerBase: but can't easily\n-                 * change it to be able to move to SerializerProvider (where it\n-                 * really belongs)\n-                 */\n+                // Ugh: mostly copied from BeanDeserializerBase: but can't easily change it\n+                // to be able to move to SerializerProvider (where it really belongs)\n                 \n                 // 2.1: allow modifications by \"id ref\" annotations as well:\n                 objectIdInfo = intr.findObjectReferenceInfo(accessor, objectIdInfo);\n", 
    "projectMetrics": {
      "numberSourceFiles": 389, 
      "numberLibrariesFailingModule": 14, 
      "numberTestFiles": 365, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 280575688, 
        "hostName": "local", 
        "totalMemory": 555745280, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 9, 2018 11:31:44 PM", 
      "projectRootPomPath": "./workspace/FasterXML/jackson-databind/223024976/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            1, 
            1, 
            0, 
            0, 
            60
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 62
        }, 
        "testing": {
          "stepDurations": [
            66
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 66
        }, 
        "cloning": {
          "stepDurations": [
            69
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 69
        }
      }, 
      "reproductionDateBeginning": "Oct 9, 2018 11:26:28 PM", 
      "totalDuration": 311
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1974, 
        "numberRunning": 1975, 
        "numberFailing": 0, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "com.fasterxml.jackson.databind.JsonMappingException", 
            "isError": true, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 0
      }, 
      "failingModule": "/root/workspace/FasterXML/jackson-databind/226276279", 
      "failingClasses": [
        {
          "numberPassing": 0, 
          "numberRunning": 1, 
          "testClass": "com.fasterxml.jackson.databind.ser.BeanSerializerModifier1612Test", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "com.fasterxml.jackson.databind.JsonMappingException", 
          "testMethod": "testIssue1612", 
          "testClass": "com.fasterxml.jackson.databind.ser.BeanSerializerModifier1612Test", 
          "detail": "java.lang.Integer cannot be cast to java.lang.Double (through reference chain: com.fasterxml.jackson.databind.ser.BeanSerializerModifier1612Test$Bean1612[\"b\"])", 
          "isError": true
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/226639126", 
        "date": "Apr 28, 2017 3:08:19 AM", 
        "id": 226639126
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/226276279", 
        "date": "Apr 27, 2017 7:57:58 AM", 
        "id": 226276279
      }
    }, 
    "repository": {
      "name": "FasterXML-jackson-databind", 
      "url": "https://github.com/FasterXML/jackson-databind", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 3038937
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/c9ab9b3ac1881cacbdbb1a32a1de0e58fc3f6e06", 
        "sha": "c9ab9b3ac1881cacbdbb1a32a1de0e58fc3f6e06", 
        "branchName": "master", 
        "date": "Apr 28, 2017 3:02:18 AM", 
        "repoName": "FasterXML/jackson-databind"
      }, 
      "buggyBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/b8b25e51327101cdb0d5b333cd7740a9684fea2e", 
        "sha": "b8b25e51327101cdb0d5b333cd7740a9684fea2e", 
        "branchName": "master", 
        "date": "Apr 27, 2017 7:39:11 AM", 
        "repoName": "FasterXML/jackson-databind"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/FasterXML-jackson-databind-226276279-226639126", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 412, 
      "numberLibrariesFailingModule": 17, 
      "numberTestFiles": 451, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 3, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 13, 
        "numberDeleted": 27
      }
    }, 
    "bugId": "Bears_16", 
    "diff": "diff --git a/src/main/java/com/fasterxml/jackson/databind/SerializerProvider.java b/src/main/java/com/fasterxml/jackson/databind/SerializerProvider.java\nindex 89f51b5..4307709 100644\n--- a/src/main/java/com/fasterxml/jackson/databind/SerializerProvider.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/SerializerProvider.java\n@@ -1155,7 +1155,7 @@ public abstract class SerializerProvider\n             String msg, Object... msgArgs) throws JsonMappingException {\n         String beanDesc = \"N/A\";\n         if (bean != null) {\n-            beanDesc = _desc(bean.getType().getGenericSignature());\n+            beanDesc = ClassUtil.nameOf(bean.getBeanClass());\n         }\n         msg = String.format(\"Invalid type definition for type %s: %s\",\n                 beanDesc, _format(msg, msgArgs));\n@@ -1178,7 +1178,7 @@ public abstract class SerializerProvider\n         }\n         String beanDesc = \"N/A\";\n         if (bean != null) {\n-            beanDesc = _desc(bean.getType().getGenericSignature());\n+            beanDesc = ClassUtil.nameOf(bean.getBeanClass());\n         }\n         message = String.format(\"Invalid definition for property %s (of type %s): %s\",\n                 propName, beanDesc, message);\ndiff --git a/src/main/java/com/fasterxml/jackson/databind/ser/BeanSerializerBuilder.java b/src/main/java/com/fasterxml/jackson/databind/ser/BeanSerializerBuilder.java\nindex 95613e1..c89d380 100644\n--- a/src/main/java/com/fasterxml/jackson/databind/ser/BeanSerializerBuilder.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/ser/BeanSerializerBuilder.java\n@@ -37,7 +37,7 @@ public class BeanSerializerBuilder\n     /**\n      * Bean properties, in order of serialization\n      */\n-    protected List<BeanPropertyWriter> _properties;\n+    protected List<BeanPropertyWriter> _properties = Collections.emptyList();\n \n     /**\n      * Optional array of filtered property writers; if null, no\n@@ -66,13 +66,13 @@ public class BeanSerializerBuilder\n      * type, if any.\n      */\n     protected ObjectIdWriter _objectIdWriter;\n-    \n+\n     /*\n     /**********************************************************\n     /* Construction and setter methods\n     /**********************************************************\n      */\n-    \n+\n     public BeanSerializerBuilder(BeanDescription beanDesc) {\n         _beanDesc = beanDesc;\n     }\n@@ -105,10 +105,22 @@ public class BeanSerializerBuilder\n         _properties = properties;\n     }\n \n+    /**\n+     * @param properties Number and order of properties here MUST match that\n+     *    of \"regular\" properties set earlier using {@link #setProperties(List)}; if not,\n+     *    an {@link IllegalArgumentException} will be thrown\n+     */\n     public void setFilteredProperties(BeanPropertyWriter[] properties) {\n+        if (properties != null) {\n+            if (properties.length != _properties.size()) { // as per [databind#1612]\n+                throw new IllegalArgumentException(String.format(\n+                        \"Trying to set %d filtered properties; must match length of non-filtered `properties` (%d)\",\n+                        properties.length, _properties.size()));\n+            }\n+        }\n         _filteredProperties = properties;\n     }\n-    \n+\n     public void setAnyGetter(AnyGetterWriter anyGetter) {\n         _anyGetter = anyGetter;\n     }\n@@ -185,6 +197,14 @@ public class BeanSerializerBuilder\n                 }\n             }\n         }\n+        // 27-Apr-2017, tatu: Verify that filtered-properties settings are compatible\n+        if (_filteredProperties != null) {\n+            if (_filteredProperties.length != _properties.size()) {\n+                throw new IllegalStateException(String.format(\n+\"Mismatch between `properties` size (%d), `filteredProperties` (%s): should have as many (or `null` for latter)\",\n+_properties.size(), _filteredProperties.length));\n+            }\n+        }\n         if (_anyGetter != null) {\n             _anyGetter.fixAccess(_config);\n         }\ndiff --git a/src/main/java/com/fasterxml/jackson/databind/ser/BeanSerializerFactory.java b/src/main/java/com/fasterxml/jackson/databind/ser/BeanSerializerFactory.java\nindex f0fa9c5..50436bb 100644\n--- a/src/main/java/com/fasterxml/jackson/databind/ser/BeanSerializerFactory.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/ser/BeanSerializerFactory.java\n@@ -520,7 +520,13 @@ public class BeanSerializerFactory\n             }\n         }\n \n-        JsonSerializer<Object> ser = (JsonSerializer<Object>) builder.build();\n+        JsonSerializer<Object> ser = null;\n+        try {\n+            ser = (JsonSerializer<Object>) builder.build();\n+        } catch (RuntimeException e) {\n+            prov.reportBadTypeDefinition(beanDesc, \"Failed to construct BeanSerializer for %s: (%s) %s\",\n+                    beanDesc.getType(), e.getClass().getName(), e.getMessage());\n+        }\n         if (ser == null) {\n             // If we get this far, there were no properties found, so no regular BeanSerializer\n             // would be constructed. But, couple of exceptions.\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 257290912, 
        "hostName": "local", 
        "totalMemory": 504889344, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 9, 2018 11:24:11 PM", 
      "projectRootPomPath": "./workspace/FasterXML/jackson-databind/226276279/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            54
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 54
        }, 
        "testing": {
          "stepDurations": [
            56
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 56
        }, 
        "cloning": {
          "stepDurations": [
            53
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 53
        }
      }, 
      "reproductionDateBeginning": "Oct 9, 2018 11:19:31 PM", 
      "totalDuration": 272
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1975, 
        "numberRunning": 1976, 
        "numberFailing": 0, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "java.lang.NullPointerException", 
            "isError": true, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 0
      }, 
      "failingModule": "/root/workspace/FasterXML/jackson-databind/226654766", 
      "failureDetails": [
        {
          "failureName": "java.lang.NullPointerException", 
          "testClass": "com.fasterxml.jackson.databind.jsontype.TestTypeNames", 
          "testMethod": "testBaseTypeId1616", 
          "isError": true
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 3, 
          "numberRunning": 4, 
          "testClass": "com.fasterxml.jackson.databind.jsontype.TestTypeNames", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/226666085", 
        "date": "Apr 28, 2017 5:37:56 AM", 
        "id": 226666085
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/226654766", 
        "date": "Apr 28, 2017 4:33:51 AM", 
        "id": 226654766
      }
    }, 
    "repository": {
      "name": "FasterXML-jackson-databind", 
      "url": "https://github.com/FasterXML/jackson-databind", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 3038937
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/974ccddfd718a06f889da2dcd58ebb6bc22c8dca", 
        "sha": "974ccddfd718a06f889da2dcd58ebb6bc22c8dca", 
        "branchName": "master", 
        "date": "Apr 28, 2017 5:32:14 AM", 
        "repoName": "FasterXML/jackson-databind"
      }, 
      "buggyBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/8c20a7670f71958c9af6c8daffab227d2d7ba87a", 
        "sha": "8c20a7670f71958c9af6c8daffab227d2d7ba87a", 
        "branchName": "master", 
        "date": "Apr 28, 2017 4:28:09 AM", 
        "repoName": "FasterXML/jackson-databind"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/FasterXML-jackson-databind-226654766-226666085", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 29, 
        "numberDeleted": 30
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_17", 
    "diff": "diff --git a/src/main/java/com/fasterxml/jackson/databind/jsontype/impl/StdSubtypeResolver.java b/src/main/java/com/fasterxml/jackson/databind/jsontype/impl/StdSubtypeResolver.java\nindex 651b62d..9cb8bec 100644\n--- a/src/main/java/com/fasterxml/jackson/databind/jsontype/impl/StdSubtypeResolver.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/jsontype/impl/StdSubtypeResolver.java\n@@ -1,5 +1,6 @@\n package com.fasterxml.jackson.databind.jsontype.impl;\n \n+import java.lang.reflect.Modifier;\n import java.util.*;\n \n import com.fasterxml.jackson.databind.AnnotationIntrospector;\n@@ -21,7 +22,7 @@ public class StdSubtypeResolver\n     protected LinkedHashSet<NamedType> _registeredSubtypes;\n \n     public StdSubtypeResolver() { }\n-    \n+\n     /*\n     /**********************************************************\n     /* Subtype registration\n@@ -75,15 +76,17 @@ public class StdSubtypeResolver\n         }\n         \n         // then annotated types for property itself\n-        Collection<NamedType> st = ai.findSubtypes(property);\n-        if (st != null) {\n-            for (NamedType nt : st) {\n-                AnnotatedClass ac = AnnotatedClassResolver.resolveWithoutSuperTypes(config,\n-                        nt.getType());\n-                _collectAndResolve(ac, nt, config, ai, collected);\n-            }            \n+        if (property != null) {\n+            Collection<NamedType> st = ai.findSubtypes(property);\n+            if (st != null) {\n+                for (NamedType nt : st) {\n+                    AnnotatedClass ac = AnnotatedClassResolver.resolveWithoutSuperTypes(config,\n+                            nt.getType());\n+                    _collectAndResolve(ac, nt, config, ai, collected);\n+                }            \n+            }\n         }\n-        \n+\n         NamedType rootType = new NamedType(rawBase, null);\n         AnnotatedClass ac = AnnotatedClassResolver.resolveWithoutSuperTypes(config, rawBase);\n             \n@@ -128,7 +131,7 @@ public class StdSubtypeResolver\n             AnnotatedMember property, JavaType baseType)\n     {\n         final AnnotationIntrospector ai = config.getAnnotationIntrospector();\n-        Class<?> rawBase = (baseType == null) ? property.getRawType() : baseType.getRawClass();\n+        Class<?> rawBase = baseType.getRawClass();\n \n         // Need to keep track of classes that have been handled already \n         Set<Class<?>> typesHandled = new HashSet<Class<?>>();\n@@ -141,14 +144,15 @@ public class StdSubtypeResolver\n         _collectAndResolveByTypeId(ac, rootType, config, typesHandled, byName);\n         \n         // then with definitions from property\n-        Collection<NamedType> st = ai.findSubtypes(property);\n-        if (st != null) {\n-            for (NamedType nt : st) {\n-                ac = AnnotatedClassResolver.resolveWithoutSuperTypes(config, nt.getType());\n-                _collectAndResolveByTypeId(ac, nt, config, typesHandled, byName);\n-            }            \n+        if (property != null) {\n+            Collection<NamedType> st = ai.findSubtypes(property);\n+            if (st != null) {\n+                for (NamedType nt : st) {\n+                    ac = AnnotatedClassResolver.resolveWithoutSuperTypes(config, nt.getType());\n+                    _collectAndResolveByTypeId(ac, nt, config, typesHandled, byName);\n+                }            \n+            }\n         }\n-        \n         // and finally explicit type registrations (highest precedence)\n         if (_registeredSubtypes != null) {\n             for (NamedType subtype : _registeredSubtypes) {\n@@ -160,21 +164,21 @@ public class StdSubtypeResolver\n                 }\n             }\n         }\n-        return _combineNamedAndUnnamed(typesHandled, byName);\n+        return _combineNamedAndUnnamed(rawBase, typesHandled, byName);\n     }\n \n     @Override\n     public Collection<NamedType> collectAndResolveSubtypesByTypeId(MapperConfig<?> config,\n-            AnnotatedClass type)\n+            AnnotatedClass baseType)\n     {\n+        final Class<?> rawBase = baseType.getRawType();\n         Set<Class<?>> typesHandled = new HashSet<Class<?>>();\n         Map<String,NamedType> byName = new LinkedHashMap<String,NamedType>();\n \n-        NamedType rootType = new NamedType(type.getRawType(), null);\n-        _collectAndResolveByTypeId(type, rootType, config, typesHandled, byName);\n+        NamedType rootType = new NamedType(rawBase, null);\n+        _collectAndResolveByTypeId(baseType, rootType, config, typesHandled, byName);\n         \n         if (_registeredSubtypes != null) {\n-            Class<?> rawBase = type.getRawType();\n             for (NamedType subtype : _registeredSubtypes) {\n                 // is it a subtype of root type?\n                 if (rawBase.isAssignableFrom(subtype.getType())) { // yes\n@@ -184,7 +188,7 @@ public class StdSubtypeResolver\n                 }\n             }\n         }\n-        return _combineNamedAndUnnamed(typesHandled, byName);\n+        return _combineNamedAndUnnamed(rawBase, typesHandled, byName);\n     }\n \n     /*\n@@ -267,8 +271,8 @@ public class StdSubtypeResolver\n      * Helper method used for merging explicitly named types and handled classes\n      * without explicit names.\n      */\n-    protected Collection<NamedType> _combineNamedAndUnnamed(Set<Class<?>> typesHandled,\n-            Map<String,NamedType> byName)\n+    protected Collection<NamedType> _combineNamedAndUnnamed(Class<?> rawBase,\n+            Set<Class<?>> typesHandled, Map<String,NamedType> byName)\n     {\n         ArrayList<NamedType> result = new ArrayList<NamedType>(byName.values());\n \n@@ -279,6 +283,11 @@ public class StdSubtypeResolver\n             typesHandled.remove(t.getType());\n         }\n         for (Class<?> cls : typesHandled) {\n+            // 27-Apr-2017, tatu: [databind#1616] Do not add base type itself unless\n+            //     it is concrete (or has explicit type name)\n+            if ((cls == rawBase) && Modifier.isAbstract(cls.getModifiers())) {\n+                continue;\n+            }\n             result.add(new NamedType(cls));\n         }\n         return result;\n", 
    "projectMetrics": {
      "numberSourceFiles": 412, 
      "numberLibrariesFailingModule": 17, 
      "numberTestFiles": 452, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 311049928, 
        "hostName": "local", 
        "totalMemory": 396886016, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 9, 2018 11:20:20 PM", 
      "projectRootPomPath": "./workspace/FasterXML/jackson-databind/226654766/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            65
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 65
        }, 
        "testing": {
          "stepDurations": [
            79
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 79
        }, 
        "cloning": {
          "stepDurations": [
            69
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 69
        }
      }, 
      "reproductionDateBeginning": "Oct 9, 2018 11:15:23 PM", 
      "totalDuration": 290
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1976, 
        "numberRunning": 1977, 
        "numberFailing": 0, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "com.fasterxml.jackson.databind.exc.InvalidDefinitionException", 
            "isError": true, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 0
      }, 
      "failingModule": "/root/workspace/FasterXML/jackson-databind/226666085", 
      "failingClasses": [
        {
          "numberPassing": 0, 
          "numberRunning": 1, 
          "testClass": "com.fasterxml.jackson.databind.introspect.TypeCoercion1592Test", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "com.fasterxml.jackson.databind.exc.InvalidDefinitionException", 
          "testMethod": "testTypeCoercion1592", 
          "testClass": "com.fasterxml.jackson.databind.introspect.TypeCoercion1592Test", 
          "detail": "Invalid definition for property \"i\" (of type com.fasterxml.jackson.databind.introspect.TypeCoercion1592Test$Bean1592): Can not refine serialization type [simple type, class int] into java.lang.Integer; types not related", 
          "isError": true
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/226673064", 
        "date": "Apr 28, 2017 6:16:09 AM", 
        "id": 226673064
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/226666085", 
        "date": "Apr 28, 2017 5:37:56 AM", 
        "id": 226666085
      }
    }, 
    "repository": {
      "name": "FasterXML-jackson-databind", 
      "url": "https://github.com/FasterXML/jackson-databind", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 3038937
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/029413a6e381bb04b7b0a420730d3119e9cc0961", 
        "sha": "029413a6e381bb04b7b0a420730d3119e9cc0961", 
        "branchName": "master", 
        "date": "Apr 28, 2017 6:10:46 AM", 
        "repoName": "FasterXML/jackson-databind"
      }, 
      "buggyBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/974ccddfd718a06f889da2dcd58ebb6bc22c8dca", 
        "sha": "974ccddfd718a06f889da2dcd58ebb6bc22c8dca", 
        "branchName": "master", 
        "date": "Apr 28, 2017 5:32:14 AM", 
        "repoName": "FasterXML/jackson-databind"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/FasterXML-jackson-databind-226666085-226673064", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 412, 
      "numberLibrariesFailingModule": 17, 
      "numberTestFiles": 453, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 27, 
        "numberDeleted": 17
      }
    }, 
    "bugId": "Bears_18", 
    "diff": "diff --git a/src/main/java/com/fasterxml/jackson/databind/introspect/JacksonAnnotationIntrospector.java b/src/main/java/com/fasterxml/jackson/databind/introspect/JacksonAnnotationIntrospector.java\nindex d4a624a..19f52c6 100644\n--- a/src/main/java/com/fasterxml/jackson/databind/introspect/JacksonAnnotationIntrospector.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/introspect/JacksonAnnotationIntrospector.java\n@@ -761,6 +761,9 @@ public class JacksonAnnotationIntrospector\n                         type = tf.constructGeneralizedType(type, serClass);\n                     } else if (currRaw.isAssignableFrom(serClass)) { // specialization, ok as well\n                         type = tf.constructSpecializedType(type, serClass);\n+                    } else if (_primitiveAndWrapper(currRaw, serClass)) {\n+                        // 27-Apr-2017, tatu: [databind#1592] ignore primitive<->wrapper refinements\n+                        type = type.withStaticTyping();\n                     } else {\n                         throw new JsonMappingException(null,\n                                 String.format(\"Can not refine serialization type %s into %s; types not related\",\n@@ -793,6 +796,9 @@ public class JacksonAnnotationIntrospector\n                             keyType = tf.constructGeneralizedType(keyType, keyClass);\n                         } else if (currRaw.isAssignableFrom(keyClass)) { // specialization, ok as well\n                             keyType = tf.constructSpecializedType(keyType, keyClass);\n+                        } else if (_primitiveAndWrapper(currRaw, keyClass)) {\n+                            // 27-Apr-2017, tatu: [databind#1592] ignore primitive<->wrapper refinements\n+                            keyType = keyType.withStaticTyping();\n                         } else {\n                             throw new JsonMappingException(null,\n                                     String.format(\"Can not refine serialization key type %s into %s; types not related\",\n@@ -826,6 +832,9 @@ public class JacksonAnnotationIntrospector\n                            contentType = tf.constructGeneralizedType(contentType, contentClass);\n                        } else if (currRaw.isAssignableFrom(contentClass)) { // specialization, ok as well\n                            contentType = tf.constructSpecializedType(contentType, contentClass);\n+                       } else if (_primitiveAndWrapper(currRaw, contentClass)) {\n+                           // 27-Apr-2017, tatu: [databind#1592] ignore primitive<->wrapper refinements\n+                           contentType = contentType.withStaticTyping();\n                        } else {\n                            throw new JsonMappingException(null,\n                                    String.format(\"Can not refine serialization content type %s into %s; types not related\",\n@@ -1113,7 +1122,8 @@ public class JacksonAnnotationIntrospector\n         \n         // Ok: start by refining the main type itself; common to all types\n         final Class<?> valueClass = (jsonDeser == null) ? null : _classIfExplicit(jsonDeser.as());\n-        if ((valueClass != null) && !type.hasRawClass(valueClass)) {\n+        if ((valueClass != null) && !type.hasRawClass(valueClass)\n+                && !_primitiveAndWrapper(type, valueClass)) {\n             try {\n                 type = tf.constructSpecializedType(type, valueClass);\n             } catch (IllegalArgumentException iae) {\n@@ -1129,7 +1139,8 @@ public class JacksonAnnotationIntrospector\n         if (type.isMapLikeType()) {\n             JavaType keyType = type.getKeyType();\n             final Class<?> keyClass = (jsonDeser == null) ? null : _classIfExplicit(jsonDeser.keyAs());\n-            if (keyClass != null) {\n+            if ((keyClass != null)\n+                    && !_primitiveAndWrapper(keyType, keyClass)) {\n                 try {\n                     keyType = tf.constructSpecializedType(keyType, keyClass);\n                     type = ((MapLikeType) type).withKeyType(keyType);\n@@ -1145,7 +1156,8 @@ public class JacksonAnnotationIntrospector\n         if (contentType != null) { // collection[like], map[like], array, reference\n             // And then value types for all containers:\n             final Class<?> contentClass = (jsonDeser == null) ? null : _classIfExplicit(jsonDeser.contentAs());\n-            if (contentClass != null) {\n+            if ((contentClass != null)\n+                    && !_primitiveAndWrapper(contentType, contentClass)) {\n                 try {\n                     contentType = tf.constructSpecializedType(contentType, contentClass);\n                     type = type.withContentType(contentType);\n@@ -1451,9 +1463,25 @@ public class JacksonAnnotationIntrospector\n         return StdTypeResolverBuilder.noTypeInfoBuilder();\n     }\n \n-    /*\n-    /**********************************************************\n-    /* Helper classes\n-    /**********************************************************\n-     */\n+    private boolean _primitiveAndWrapper(Class<?> baseType, Class<?> refinement)\n+    {\n+        if (baseType.isPrimitive()) {\n+            return baseType == ClassUtil.primitiveType(refinement);\n+        }\n+        if (refinement.isPrimitive()) {\n+            return refinement == ClassUtil.primitiveType(baseType);\n+        }\n+        return false;\n+    }\n+\n+    private boolean _primitiveAndWrapper(JavaType baseType, Class<?> refinement)\n+    {\n+        if (baseType.isPrimitive()) {\n+            return baseType.hasRawClass(ClassUtil.primitiveType(refinement));\n+        }\n+        if (refinement.isPrimitive()) {\n+            return refinement == ClassUtil.primitiveType(baseType.getRawClass());\n+        }\n+        return false;\n+    }\n }\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 204123192, 
        "hostName": "local", 
        "totalMemory": 350748672, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 9, 2018 11:19:46 PM", 
      "projectRootPomPath": "./workspace/FasterXML/jackson-databind/226666085/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            62
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 62
        }, 
        "testing": {
          "stepDurations": [
            68
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 68
        }, 
        "cloning": {
          "stepDurations": [
            53
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 53
        }
      }, 
      "reproductionDateBeginning": "Oct 9, 2018 11:14:37 PM", 
      "totalDuration": 303
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1720, 
        "numberRunning": 1721, 
        "numberFailing": 1, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "junit.framework.ComparisonFailure", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 0
      }, 
      "failingModule": "/root/workspace/FasterXML/jackson-databind/228025083", 
      "failureDetails": [
        {
          "failureName": "junit.framework.ComparisonFailure", 
          "detail": "expected:<jack> but was:<null>", 
          "isError": false, 
          "testMethod": "testIgnoreGetterNotSetter1595", 
          "testClass": "com.fasterxml.jackson.databind.filter.IgnorePropertyOnDeserTest"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 2, 
          "numberRunning": 3, 
          "testClass": "com.fasterxml.jackson.databind.filter.IgnorePropertyOnDeserTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/228873360", 
        "date": "May 4, 2017 9:53:36 PM", 
        "id": 228873360
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/228025083", 
        "date": "May 2, 2017 6:47:20 PM", 
        "id": 228025083
      }
    }, 
    "repository": {
      "name": "FasterXML-jackson-databind", 
      "url": "https://github.com/FasterXML/jackson-databind", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 3038937
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/4a2b1ae08ded66b77e05bf8fa0ac8a2e8c60709d", 
        "sha": "4a2b1ae08ded66b77e05bf8fa0ac8a2e8c60709d", 
        "branchName": "2.8", 
        "date": "May 4, 2017 9:48:52 PM", 
        "repoName": "FasterXML/jackson-databind"
      }, 
      "buggyBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/f13cfb1f671af15814e2aa34e9f12cf00ab93b58", 
        "sha": "f13cfb1f671af15814e2aa34e9f12cf00ab93b58", 
        "branchName": "2.8", 
        "date": "May 2, 2017 6:42:22 PM", 
        "repoName": "FasterXML/jackson-databind"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/FasterXML-jackson-databind-228025083-228873360", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 1, 
        "numberDeleted": 1
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_19", 
    "diff": "diff --git a/src/main/java/com/fasterxml/jackson/databind/deser/BeanDeserializerFactory.java b/src/main/java/com/fasterxml/jackson/databind/deser/BeanDeserializerFactory.java\nindex 4b0434e..1423f28 100644\n--- a/src/main/java/com/fasterxml/jackson/databind/deser/BeanDeserializerFactory.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/deser/BeanDeserializerFactory.java\n@@ -492,7 +492,7 @@ public class BeanDeserializerFactory\n             boolean ignoreAny = ignorals.getIgnoreUnknown();\n             builder.setIgnoreUnknownProperties(ignoreAny);\n             // Or explicit/implicit definitions?\n-            ignored = ignorals.getIgnored();\n+            ignored = ignorals.findIgnoredForDeserialization();\n             for (String propName : ignored) {\n                 builder.addIgnorable(propName);\n             }\n", 
    "projectMetrics": {
      "numberSourceFiles": 397, 
      "numberLibrariesFailingModule": 17, 
      "numberTestFiles": 396, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 238036008, 
        "hostName": "local", 
        "totalMemory": 346554368, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 3:24:48 PM", 
      "projectRootPomPath": "./workspace/FasterXML/jackson-databind/228025083/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            44
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 44
        }, 
        "testing": {
          "stepDurations": [
            26
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 26
        }, 
        "cloning": {
          "stepDurations": [
            46
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 46
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 3:21:59 PM", 
      "totalDuration": 164
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1721, 
        "numberRunning": 1722, 
        "numberFailing": 0, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "com.fasterxml.jackson.databind.exc.InvalidFormatException", 
            "isError": true, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 0
      }, 
      "failingModule": "/root/workspace/FasterXML/jackson-databind/233857275", 
      "failingClasses": [
        {
          "numberPassing": 8, 
          "numberRunning": 9, 
          "testClass": "com.fasterxml.jackson.databind.filter.ProblemHandlerTest", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "com.fasterxml.jackson.databind.exc.InvalidFormatException", 
          "testMethod": "testWeirdStringHandling", 
          "testClass": "com.fasterxml.jackson.databind.filter.ProblemHandlerTest", 
          "detail": "Can not deserialize value of type java.util.UUID from String \"not a uuid!\": not a valid textual representation\n at [Source: \"not a uuid!\"; line: 1, column: 1]", 
          "isError": true
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/234147085", 
        "date": "May 19, 2017 10:12:31 PM", 
        "id": 234147085
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/233857275", 
        "date": "May 19, 2017 3:39:30 AM", 
        "id": 233857275
      }
    }, 
    "repository": {
      "name": "FasterXML-jackson-databind", 
      "url": "https://github.com/FasterXML/jackson-databind", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 3038937
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/9a083ad56b20711eab368a7818fb079a870feb93", 
        "sha": "9a083ad56b20711eab368a7818fb079a870feb93", 
        "branchName": "2.8", 
        "date": "May 19, 2017 10:07:44 PM", 
        "repoName": "FasterXML/jackson-databind"
      }, 
      "buggyBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/edaa4ad8204dfda985d3c74ffe542c9eb67a201d", 
        "sha": "edaa4ad8204dfda985d3c74ffe542c9eb67a201d", 
        "branchName": "2.8", 
        "date": "May 19, 2017 3:34:35 AM", 
        "repoName": "FasterXML/jackson-databind"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/FasterXML-jackson-databind-233857275-234147085", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 397, 
      "numberLibrariesFailingModule": 17, 
      "numberTestFiles": 396, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 6, 
        "numberDeleted": 6
      }
    }, 
    "bugId": "Bears_20", 
    "diff": "diff --git a/src/main/java/com/fasterxml/jackson/databind/deser/std/FromStringDeserializer.java b/src/main/java/com/fasterxml/jackson/databind/deser/std/FromStringDeserializer.java\nindex 102e0e3..0d01e78 100644\n--- a/src/main/java/com/fasterxml/jackson/databind/deser/std/FromStringDeserializer.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/deser/std/FromStringDeserializer.java\n@@ -13,6 +13,7 @@ import java.util.TimeZone;\n import java.util.regex.Pattern;\n \n import com.fasterxml.jackson.core.*;\n+import com.fasterxml.jackson.core.util.VersionUtil;\n import com.fasterxml.jackson.databind.DeserializationContext;\n import com.fasterxml.jackson.databind.JavaType;\n import com.fasterxml.jackson.databind.JsonMappingException;\n@@ -112,10 +113,10 @@ public abstract class FromStringDeserializer<T> extends StdScalarDeserializer<T>\n             }\n             Exception cause = null;\n             try {\n-                T result = _deserialize(text, ctxt);\n-                if (result != null) {\n-                    return result;\n-                }\n+                // 19-May-2017, tatu: Used to require non-null result (assuming `null`\n+                //    indicated error; but that seems wrong. Should be able to return\n+                //    `null` as value.\n+                return _deserialize(text, ctxt);\n             } catch (IllegalArgumentException iae) {\n                 cause = iae;\n             } catch (MalformedURLException me) {\n@@ -277,7 +278,8 @@ public abstract class FromStringDeserializer<T> extends StdScalarDeserializer<T>\n             case STD_STRING_BUILDER:\n                 return new StringBuilder(value);\n             }\n-            throw new IllegalArgumentException();\n+            VersionUtil.throwInternal();\n+            return null;\n         }\n \n         @Override\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 270497080, 
        "hostName": "local", 
        "totalMemory": 377487360, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 3:20:44 PM", 
      "projectRootPomPath": "./workspace/FasterXML/jackson-databind/233857275/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            45
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 45
        }, 
        "testing": {
          "stepDurations": [
            37
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 37
        }, 
        "cloning": {
          "stepDurations": [
            49
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 49
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 3:17:16 PM", 
      "totalDuration": 201
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1722, 
        "numberRunning": 1723, 
        "numberFailing": 1, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "junit.framework.ComparisonFailure", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 0
      }, 
      "failingModule": "/root/workspace/FasterXML/jackson-databind/241044631", 
      "failureDetails": [
        {
          "failureName": "junit.framework.ComparisonFailure", 
          "detail": "expected:<{\"date\":\"1970-01-01[X01:00:]00\"}> but was:<{\"date\":\"1970-01-01[T01:00:00.000+01]00\"}>", 
          "isError": false, 
          "testMethod": "testFormatWithoutPattern", 
          "testClass": "com.fasterxml.jackson.databind.ser.DateSerializationTest"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 13, 
          "numberRunning": 14, 
          "testClass": "com.fasterxml.jackson.databind.ser.DateSerializationTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/241063530", 
        "date": "Jun 9, 2017 7:25:15 AM", 
        "id": 241063530
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/241044631", 
        "date": "Jun 9, 2017 5:11:11 AM", 
        "id": 241044631
      }
    }, 
    "repository": {
      "name": "FasterXML-jackson-databind", 
      "url": "https://github.com/FasterXML/jackson-databind", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 3038937
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/93f7e14d096181a251aae3355464d24bcd7677a5", 
        "sha": "93f7e14d096181a251aae3355464d24bcd7677a5", 
        "branchName": "2.8", 
        "date": "Jun 9, 2017 7:20:50 AM", 
        "repoName": "FasterXML/jackson-databind"
      }, 
      "buggyBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/4b00ccc8ae9763c76e363621dc9ee4b8692d30dc", 
        "sha": "4b00ccc8ae9763c76e363621dc9ee4b8692d30dc", 
        "branchName": "2.8", 
        "date": "Jun 9, 2017 5:06:58 AM", 
        "repoName": "FasterXML/jackson-databind"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/FasterXML-jackson-databind-241044631-241063530", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 64, 
        "numberDeleted": 29
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_21", 
    "diff": "diff --git a/src/main/java/com/fasterxml/jackson/databind/ser/std/DateTimeSerializerBase.java b/src/main/java/com/fasterxml/jackson/databind/ser/std/DateTimeSerializerBase.java\nindex ea67b88..4b9312b 100644\n--- a/src/main/java/com/fasterxml/jackson/databind/ser/std/DateTimeSerializerBase.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/ser/std/DateTimeSerializerBase.java\n@@ -49,33 +49,76 @@ public abstract class DateTimeSerializerBase<T>\n     public JsonSerializer<?> createContextual(SerializerProvider serializers,\n             BeanProperty property) throws JsonMappingException\n     {\n-        if (property != null) {\n-            JsonFormat.Value format = findFormatOverrides(serializers, property, handledType());\n-            if (format != null) {\n-            \t// Simple case first: serialize as numeric timestamp?\n-                JsonFormat.Shape shape = format.getShape();\n-                if (shape.isNumeric()) {\n-                    return withFormat(Boolean.TRUE, null);\n-                }\n-                if ((shape == JsonFormat.Shape.STRING) || format.hasPattern()\n-                                || format.hasLocale() || format.hasTimeZone()) {\n-                    TimeZone tz = format.getTimeZone();\n-                    final String pattern = format.hasPattern()\n-                                    ? format.getPattern()\n-                                    : StdDateFormat.DATE_FORMAT_STR_ISO8601;\n-                    final Locale loc = format.hasLocale()\n-                                    ? format.getLocale()\n-                                    : serializers.getLocale();\n-                    SimpleDateFormat df = new SimpleDateFormat(pattern, loc);\n-                    if (tz == null) {\n-                        tz = serializers.getTimeZone();\n-                    }\n-                    df.setTimeZone(tz);\n-                    return withFormat(Boolean.FALSE, df);\n-                }\n+        if (property == null) {\n+            return this;\n+        }\n+        JsonFormat.Value format = findFormatOverrides(serializers, property, handledType());\n+        if (format == null) {\n+            return this;\n+        }\n+        // Simple case first: serialize as numeric timestamp?\n+        JsonFormat.Shape shape = format.getShape();\n+        if (shape.isNumeric()) {\n+            return withFormat(Boolean.TRUE, null);\n+        }\n+\n+        // 08-Jun-2017, tatu: With [databind#1648], this gets bit tricky..\n+        // First: custom pattern will override things\n+        if (format.hasPattern()) {\n+            final Locale loc = format.hasLocale()\n+                            ? format.getLocale()\n+                            : serializers.getLocale();\n+            SimpleDateFormat df = new SimpleDateFormat(format.getPattern(), loc);\n+            TimeZone tz = format.hasTimeZone() ? format.getTimeZone()\n+                    : serializers.getTimeZone();\n+            df.setTimeZone(tz);\n+            return withFormat(Boolean.FALSE, df);\n+        }\n+\n+        // Otherwise, need one of these changes:\n+        final boolean hasLocale = format.hasLocale();\n+        final boolean hasTZ = format.hasTimeZone();\n+        final boolean asString = (shape == JsonFormat.Shape.STRING);\n+\n+        if (!hasLocale && !hasTZ && !asString) {\n+            return this;\n+        }\n+\n+        DateFormat df0 = serializers.getConfig().getDateFormat();\n+        // Jackson's own `StdDateFormat` is quite easy to deal with...\n+        if (df0 instanceof StdDateFormat) {\n+            StdDateFormat std = (StdDateFormat) df0;\n+            if (format.hasLocale()) {\n+                std = std.withLocale(format.getLocale());\n+            }\n+            if (format.hasTimeZone()) {\n+                std = std.withTimeZone(format.getTimeZone());\n             }\n+            return withFormat(Boolean.FALSE, std);\n+        }\n+\n+        // 08-Jun-2017, tatu: Unfortunately there's no generally usable\n+        //    mechanism for changing `DateFormat` instances (or even clone()ing)\n+        //    So: require it be `SimpleDateFormat`; can't config other types\n+        if (!(df0 instanceof SimpleDateFormat)) {\n+//            serializers.reportBadDefinition(handledType(), String.format(\n+            serializers.reportMappingProblem(\n+\"Configured `DateFormat` (%s) not a `SimpleDateFormat`; can not configure `Locale` or `TimeZone`\",\n+df0.getClass().getName());\n+        }\n+        SimpleDateFormat df = (SimpleDateFormat) df0;\n+        if (hasLocale) {\n+            // Ugh. No way to change `Locale`, create copy; must re-crete completely:\n+            df = new SimpleDateFormat(df.toPattern(), format.getLocale());\n+        } else {\n+            df = (SimpleDateFormat) df.clone();\n+        }\n+        TimeZone newTz = format.getTimeZone();\n+        boolean changeTZ = (newTz != null) && !newTz.equals(df.getTimeZone());\n+        if (changeTZ) {\n+            df.setTimeZone(newTz);\n         }\n-        return this;\n+        return withFormat(Boolean.FALSE, df);\n     }\n \n     /*\n", 
    "projectMetrics": {
      "numberSourceFiles": 397, 
      "numberLibrariesFailingModule": 17, 
      "numberTestFiles": 396, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 433435336, 
        "hostName": "spirals-bears", 
        "totalMemory": 634912768, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 10, 2018 2:26:42 AM", 
      "projectRootPomPath": "./workspace/FasterXML/jackson-databind/241044631/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            52
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 52
        }, 
        "testing": {
          "stepDurations": [
            40
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 40
        }, 
        "cloning": {
          "stepDurations": [
            29
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 29
        }
      }, 
      "reproductionDateBeginning": "Dec 10, 2018 2:23:14 AM", 
      "totalDuration": 202
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1723, 
        "numberRunning": 1725, 
        "numberFailing": 2, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "junit.framework.ComparisonFailure", 
            "isError": false, 
            "occurrences": 1
          }, 
          {
            "failureName": "junit.framework.AssertionFailedError", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 0
      }, 
      "failingModule": "/root/workspace/FasterXML/jackson-databind/241063530", 
      "failingClasses": [
        {
          "numberPassing": 0, 
          "numberRunning": 1, 
          "testClass": "com.fasterxml.jackson.databind.type.TestTypeFactoryWithRecursiveTypes", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }, 
        {
          "numberPassing": 3, 
          "numberRunning": 4, 
          "testClass": "com.fasterxml.jackson.databind.type.RecursiveTypeTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "junit.framework.AssertionFailedError", 
          "isError": false, 
          "testClass": "com.fasterxml.jackson.databind.type.RecursiveTypeTest", 
          "testMethod": "testSuperClassWithReferencedJavaType"
        }, 
        {
          "failureName": "junit.framework.ComparisonFailure", 
          "testMethod": "testBasePropertiesIncludedWhenSerializingSubWhenSubTypeLoadedAfterBaseType", 
          "testClass": "com.fasterxml.jackson.databind.type.TestTypeFactoryWithRecursiveTypes", 
          "detail": "expected:<{\"[base\":1,\"]sub\":2}> but was:<{\"[]sub\":2}>", 
          "isError": false
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/241065840", 
        "date": "Jun 9, 2017 7:43:50 AM", 
        "id": 241065840
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/241063530", 
        "date": "Jun 9, 2017 7:25:15 AM", 
        "id": 241063530
      }
    }, 
    "repository": {
      "name": "FasterXML-jackson-databind", 
      "url": "https://github.com/FasterXML/jackson-databind", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 3038937
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/3d743477e1531cd3c4c041941f047eee5b040924", 
        "sha": "3d743477e1531cd3c4c041941f047eee5b040924", 
        "branchName": "2.8", 
        "date": "Jun 9, 2017 7:36:00 AM", 
        "repoName": "FasterXML/jackson-databind"
      }, 
      "buggyBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/93f7e14d096181a251aae3355464d24bcd7677a5", 
        "sha": "93f7e14d096181a251aae3355464d24bcd7677a5", 
        "branchName": "2.8", 
        "date": "Jun 9, 2017 7:20:50 AM", 
        "repoName": "FasterXML/jackson-databind"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/FasterXML-jackson-databind-241063530-241065840", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 0, 
        "numberDeleted": 8
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_22", 
    "diff": "diff --git a/src/main/java/com/fasterxml/jackson/databind/type/ResolvedRecursiveType.java b/src/main/java/com/fasterxml/jackson/databind/type/ResolvedRecursiveType.java\nindex 21f37fe..12162c5 100644\n--- a/src/main/java/com/fasterxml/jackson/databind/type/ResolvedRecursiveType.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/type/ResolvedRecursiveType.java\n@@ -25,6 +25,14 @@ public class ResolvedRecursiveType extends TypeBase\n         }\n         _referencedType = ref;\n     }\n+   \n+    @Override\n+    public JavaType getSuperClass() {\n+    \tif (_referencedType != null) {\n+    \t\treturn _referencedType.getSuperClass();\n+    \t}\n+    \treturn super.getSuperClass();\n+    }\n \n     public JavaType getSelfReferencedType() { return _referencedType; }\n \n", 
    "projectMetrics": {
      "numberSourceFiles": 397, 
      "numberLibrariesFailingModule": 17, 
      "numberTestFiles": 397, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 449016096, 
        "hostName": "spirals-bears", 
        "totalMemory": 576716800, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 10, 2018 2:26:05 AM", 
      "projectRootPomPath": "./workspace/FasterXML/jackson-databind/241063530/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            51
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 51
        }, 
        "testing": {
          "stepDurations": [
            37
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 37
        }, 
        "cloning": {
          "stepDurations": [
            29
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 29
        }
      }, 
      "reproductionDateBeginning": "Dec 10, 2018 2:22:36 AM", 
      "totalDuration": 202
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1725, 
        "numberRunning": 1726, 
        "numberFailing": 1, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "junit.framework.AssertionFailedError", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 0
      }, 
      "failingModule": "/root/workspace/FasterXML/jackson-databind/242268513", 
      "failureDetails": [
        {
          "failureName": "junit.framework.AssertionFailedError", 
          "detail": "expected:<Thu Jan 01 01:00:00 CET 1970> but was:<Thu Jan 01 03:00:00 CET 1970>", 
          "isError": false, 
          "testMethod": "testDateUtilISO8601NoTimezoneNonDefault", 
          "testClass": "com.fasterxml.jackson.databind.deser.TestDateDeserialization"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 21, 
          "numberRunning": 22, 
          "testClass": "com.fasterxml.jackson.databind.deser.TestDateDeserialization", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/242687710", 
        "date": "Jun 14, 2017 6:30:01 AM", 
        "id": 242687710
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/242268513", 
        "date": "Jun 13, 2017 5:52:52 AM", 
        "id": 242268513
      }
    }, 
    "repository": {
      "name": "FasterXML-jackson-databind", 
      "url": "https://github.com/FasterXML/jackson-databind", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 3038937
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/5a0ce57b5d3a6d30420267b56b3d2282c76df581", 
        "sha": "5a0ce57b5d3a6d30420267b56b3d2282c76df581", 
        "branchName": "2.8", 
        "date": "Jun 14, 2017 6:25:31 AM", 
        "repoName": "FasterXML/jackson-databind"
      }, 
      "buggyBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/fe80e86551be38fccb1a983854925a78db6e845f", 
        "sha": "fe80e86551be38fccb1a983854925a78db6e845f", 
        "branchName": "2.8", 
        "date": "Jun 13, 2017 5:45:17 AM", 
        "repoName": "FasterXML/jackson-databind"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/FasterXML-jackson-databind-242268513-242687710", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 10, 
        "numberDeleted": 23
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_23", 
    "diff": "diff --git a/src/main/java/com/fasterxml/jackson/databind/util/StdDateFormat.java b/src/main/java/com/fasterxml/jackson/databind/util/StdDateFormat.java\nindex 3faefb9..46346de 100644\n--- a/src/main/java/com/fasterxml/jackson/databind/util/StdDateFormat.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/util/StdDateFormat.java\n@@ -39,6 +39,13 @@ public class StdDateFormat\n      */\n     protected final static String DATE_FORMAT_STR_ISO8601_Z = \"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'\";\n \n+    /**\n+     * Same as 'regular' 8601 except misses timezone altogether\n+     *\n+     * @since 2.8.10\n+     */\n+    protected final static String DATE_FORMAT_STR_ISO8601_NO_TZ = \"yyyy-MM-dd'T'HH:mm:ss.SSS\";\n+\n     /**\n      * ISO-8601 with just the Date part, no time\n      */\n@@ -56,6 +63,7 @@ public class StdDateFormat\n     protected final static String[] ALL_FORMATS = new String[] {\n         DATE_FORMAT_STR_ISO8601,\n         DATE_FORMAT_STR_ISO8601_Z,\n+        DATE_FORMAT_STR_ISO8601_NO_TZ,\n         DATE_FORMAT_STR_RFC1123,\n         DATE_FORMAT_STR_PLAIN\n     };\n@@ -70,11 +78,12 @@ public class StdDateFormat\n     }\n \n     private final static Locale DEFAULT_LOCALE = Locale.US;\n-    \n+\n     protected final static DateFormat DATE_FORMAT_RFC1123;\n \n     protected final static DateFormat DATE_FORMAT_ISO8601;\n     protected final static DateFormat DATE_FORMAT_ISO8601_Z;\n+    protected final static DateFormat DATE_FORMAT_ISO8601_NO_TZ; // since 2.8.10\n \n     protected final static DateFormat DATE_FORMAT_PLAIN;\n \n@@ -93,6 +102,8 @@ public class StdDateFormat\n         DATE_FORMAT_ISO8601.setTimeZone(DEFAULT_TIMEZONE);\n         DATE_FORMAT_ISO8601_Z = new SimpleDateFormat(DATE_FORMAT_STR_ISO8601_Z, DEFAULT_LOCALE);\n         DATE_FORMAT_ISO8601_Z.setTimeZone(DEFAULT_TIMEZONE);\n+        DATE_FORMAT_ISO8601_NO_TZ = new SimpleDateFormat(DATE_FORMAT_STR_ISO8601_NO_TZ, DEFAULT_LOCALE);\n+        DATE_FORMAT_ISO8601_NO_TZ.setTimeZone(DEFAULT_TIMEZONE);\n         DATE_FORMAT_PLAIN = new SimpleDateFormat(DATE_FORMAT_STR_PLAIN, DEFAULT_LOCALE);\n         DATE_FORMAT_PLAIN.setTimeZone(DEFAULT_TIMEZONE);\n     }\n@@ -123,6 +134,7 @@ public class StdDateFormat\n     protected transient DateFormat _formatRFC1123;\n     protected transient DateFormat _formatISO8601;\n     protected transient DateFormat _formatISO8601_z;\n+    protected transient DateFormat _formatISO8601_noTz; // 2.8.10\n     protected transient DateFormat _formatPlain;\n \n     /*\n@@ -504,11 +516,11 @@ public class StdDateFormat\n                             _timezone, _locale, _lenient);\n                 }\n             } else {\n-                // If not, plain date. Easiest to just patch 'Z' in the end?\n-                StringBuilder sb = new StringBuilder(dateStr);\n-                // And possible also millisecond part if missing\n+                // If not, plain date, no timezone\n                 int timeLen = len - dateStr.lastIndexOf('T') - 1;\n+                // And possible also millisecond part if missing\n                 if (timeLen < 12) { // missing, or partial\n+                    StringBuilder sb = new StringBuilder(dateStr);\n                     switch (timeLen) {\n                     case 11: sb.append('0');\n                     case 10: sb.append('0');\n@@ -517,17 +529,16 @@ public class StdDateFormat\n                     default:\n                         sb.append(\".000\");\n                     }\n+                    dateStr = sb.toString();\n                 }\n-                sb.append('Z');\n-                dateStr = sb.toString();\n-                df = _formatISO8601_z;\n-                formatStr = DATE_FORMAT_STR_ISO8601_Z;\n+                df = _formatISO8601_noTz;\n+                formatStr = DATE_FORMAT_STR_ISO8601_NO_TZ;\n                 if (df == null) {\n                     // 10-Jun-2017, tatu: As per [databind#1651], when using this format,\n                     //    must use UTC, not whatever is configured as default timezone\n                     //    (because we know `Z` identifier is used)\n-                    df = _formatISO8601_z = _cloneFormat(DATE_FORMAT_ISO8601_Z, formatStr,\n-                            DEFAULT_TIMEZONE, _locale, _lenient);\n+                    df = _formatISO8601_noTz = _cloneFormat(DATE_FORMAT_ISO8601_NO_TZ, formatStr,\n+                            _timezone, _locale, _lenient);\n                 }\n             }\n         }\n@@ -588,6 +599,8 @@ public class StdDateFormat\n         _formatRFC1123 = null;\n         _formatISO8601 = null;\n         _formatISO8601_z = null;\n+        _formatISO8601_noTz = null;\n+\n         _formatPlain = null;\n     }\n }\n", 
    "projectMetrics": {
      "numberSourceFiles": 397, 
      "numberLibrariesFailingModule": 17, 
      "numberTestFiles": 397, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 423009520, 
        "hostName": "spirals-bears", 
        "totalMemory": 625475584, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 10, 2018 2:24:13 AM", 
      "projectRootPomPath": "./workspace/FasterXML/jackson-databind/242268513/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            51
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 51
        }, 
        "testing": {
          "stepDurations": [
            38
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 38
        }, 
        "cloning": {
          "stepDurations": [
            30
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 30
        }
      }, 
      "reproductionDateBeginning": "Dec 10, 2018 2:20:48 AM", 
      "totalDuration": 199
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1736, 
        "numberRunning": 1737, 
        "numberFailing": 0, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "java.lang.StackOverflowError", 
            "isError": true, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 0
      }, 
      "failingModule": "/root/workspace/FasterXML/jackson-databind/243509258", 
      "failingClasses": [
        {
          "numberPassing": 0, 
          "numberRunning": 1, 
          "testClass": "com.fasterxml.jackson.databind.type.RecursiveType1658Test", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "java.lang.StackOverflowError", 
          "testMethod": "testRecursive1658", 
          "isError": true, 
          "testClass": "com.fasterxml.jackson.databind.type.RecursiveType1658Test"
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/243861380", 
        "date": "Jun 17, 2017 1:19:34 AM", 
        "id": 243861380
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/243509258", 
        "date": "Jun 16, 2017 4:26:23 AM", 
        "id": 243509258
      }
    }, 
    "repository": {
      "name": "FasterXML-jackson-databind", 
      "url": "https://github.com/FasterXML/jackson-databind", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 3038937
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/075319dbf91d6c091c78a3b7c686b579569678e1", 
        "sha": "075319dbf91d6c091c78a3b7c686b579569678e1", 
        "branchName": "2.8", 
        "date": "Jun 17, 2017 1:14:37 AM", 
        "repoName": "FasterXML/jackson-databind"
      }, 
      "buggyBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/dc2c00358822901b943019a9dbc0c912285998af", 
        "sha": "dc2c00358822901b943019a9dbc0c912285998af", 
        "branchName": "2.8", 
        "date": "Jun 16, 2017 4:22:10 AM", 
        "repoName": "FasterXML/jackson-databind"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/FasterXML-jackson-databind-243509258-243861380", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 397, 
      "numberLibrariesFailingModule": 17, 
      "numberTestFiles": 399, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 7, 
        "numberDeleted": 12
      }
    }, 
    "bugId": "Bears_24", 
    "diff": "diff --git a/src/main/java/com/fasterxml/jackson/databind/type/ResolvedRecursiveType.java b/src/main/java/com/fasterxml/jackson/databind/type/ResolvedRecursiveType.java\nindex 12162c5..53e061c 100644\n--- a/src/main/java/com/fasterxml/jackson/databind/type/ResolvedRecursiveType.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/type/ResolvedRecursiveType.java\n@@ -111,11 +111,22 @@ public class ResolvedRecursiveType extends TypeBase\n     public boolean equals(Object o) {\n         if (o == this) return true;\n         if (o == null) return false;\n-        // Do NOT ever match unresolved references\n-        if (_referencedType == null) {\n+        if (o.getClass() == getClass()) {\n+            // 16-Jun-2017, tatu: as per [databind#1658], can not do recursive call since\n+            //    there is likely to be a cycle...\n+\n+            // but... true or false?\n             return false;\n+            \n+            /*\n+            // Do NOT ever match unresolved references\n+            if (_referencedType == null) {\n+                return false;\n+            }\n+            return (o.getClass() == getClass()\n+                    && _referencedType.equals(((ResolvedRecursiveType) o).getSelfReferencedType()));\n+                    */\n         }\n-        return (o.getClass() == getClass()\n-                && _referencedType.equals(((ResolvedRecursiveType) o).getSelfReferencedType()));\n+        return false;\n     }\n }\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 453195184, 
        "hostName": "spirals-bears", 
        "totalMemory": 594018304, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 10, 2018 2:22:58 AM", 
      "projectRootPomPath": "./workspace/FasterXML/jackson-databind/243509258/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            1, 
            0, 
            0, 
            0, 
            50
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 51
        }, 
        "testing": {
          "stepDurations": [
            39
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 39
        }, 
        "cloning": {
          "stepDurations": [
            28
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 28
        }
      }, 
      "reproductionDateBeginning": "Dec 10, 2018 2:19:36 AM", 
      "totalDuration": 196
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1737, 
        "numberRunning": 1738, 
        "numberFailing": 0, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "java.lang.StackOverflowError", 
            "isError": true, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 0
      }, 
      "failingModule": "/root/workspace/FasterXML/jackson-databind/247621332", 
      "failureDetails": [
        {
          "failureName": "java.lang.StackOverflowError", 
          "isError": true, 
          "testClass": "com.fasterxml.jackson.databind.ser.KeySerializers1679Test", 
          "testMethod": "testRecursion1679"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 0, 
          "numberRunning": 1, 
          "testClass": "com.fasterxml.jackson.databind.ser.KeySerializers1679Test", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/247674379", 
        "date": "Jun 27, 2017 10:05:11 PM", 
        "id": 247674379
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/247621332", 
        "date": "Jun 27, 2017 7:37:24 PM", 
        "id": 247621332
      }
    }, 
    "repository": {
      "name": "FasterXML-jackson-databind", 
      "url": "https://github.com/FasterXML/jackson-databind", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 3038937
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/e20bcc877a8149a9c4ecd562209b3b3954b6dda2", 
        "sha": "e20bcc877a8149a9c4ecd562209b3b3954b6dda2", 
        "branchName": "2.8", 
        "date": "Jun 27, 2017 10:01:02 PM", 
        "repoName": "FasterXML/jackson-databind"
      }, 
      "buggyBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/4009fe3a05caaf45ec230fbedc29dbe5d9b7f412", 
        "sha": "4009fe3a05caaf45ec230fbedc29dbe5d9b7f412", 
        "branchName": "2.8", 
        "date": "Jun 27, 2017 7:33:01 PM", 
        "repoName": "FasterXML/jackson-databind"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/FasterXML-jackson-databind-247621332-247674379", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 0, 
        "numberDeleted": 7
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_25", 
    "diff": "diff --git a/src/main/java/com/fasterxml/jackson/databind/ser/std/StdKeySerializers.java b/src/main/java/com/fasterxml/jackson/databind/ser/std/StdKeySerializers.java\nindex 2462f2e..369e659 100644\n--- a/src/main/java/com/fasterxml/jackson/databind/ser/std/StdKeySerializers.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/ser/std/StdKeySerializers.java\n@@ -207,6 +207,13 @@ public class StdKeySerializers\n         protected JsonSerializer<Object> _findAndAddDynamic(PropertySerializerMap map,\n                 Class<?> type, SerializerProvider provider) throws JsonMappingException\n         {\n+            // 27-Jun-2017, tatu: [databind#1679] Need to avoid StackOverflowError...\n+            if (type == Object.class) {\n+                // basically just need to call `toString()`, easiest way:\n+                JsonSerializer<Object> ser = new Default(Default.TYPE_TO_STRING, type);\n+                _dynamicSerializers = map.newWith(type, ser);\n+                return ser;\n+            }\n             PropertySerializerMap.SerializerAndMapResult result =\n                     // null -> for now we won't keep ref or pass BeanProperty; could change\n                     map.findAndAddKeySerializer(type, provider, null);\n", 
    "projectMetrics": {
      "numberSourceFiles": 397, 
      "numberLibrariesFailingModule": 17, 
      "numberTestFiles": 400, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 348421080, 
        "hostName": "spirals-bears", 
        "totalMemory": 602931200, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 10, 2018 2:22:19 AM", 
      "projectRootPomPath": "./workspace/FasterXML/jackson-databind/247621332/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            1, 
            0, 
            0, 
            49
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 50
        }, 
        "testing": {
          "stepDurations": [
            36
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 36
        }, 
        "cloning": {
          "stepDurations": [
            32
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 32
        }
      }, 
      "reproductionDateBeginning": "Dec 10, 2018 2:18:53 AM", 
      "totalDuration": 199
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1754, 
        "numberRunning": 1755, 
        "numberFailing": 1, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "junit.framework.AssertionFailedError", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 0
      }, 
      "failingModule": "/root/workspace/FasterXML/jackson-databind/318458719", 
      "failingClasses": [
        {
          "numberPassing": 2, 
          "numberRunning": 3, 
          "testClass": "com.fasterxml.jackson.databind.interop.IllegalTypesCheckTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "junit.framework.AssertionFailedError", 
          "testMethod": "testJDKTypes1855", 
          "testClass": "com.fasterxml.jackson.databind.interop.IllegalTypesCheckTest", 
          "detail": "Expected an exception with one of substrings ([Illegal type]): got one (of type com.fasterxml.jackson.databind.JsonMappingException) with message \"Can not construct instance of org.springframework.jacksontest.BogusPointcutAdvisor, problem: Wrong!\n at [Source: {\"v\":[\"org.springframework.jacksontest.BogusPointcutAdvisor\",\"/tmp/foobar.txt\"]}; line: 1, column: 62] (through reference chain: com.fasterxml.jackson.databind.interop.IllegalTypesCheckTest$PolyWrapper[\"v\"])\"", 
          "isError": false
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/318715551", 
        "date": "Dec 19, 2017 5:36:21 PM", 
        "id": 318715551
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/FasterXML/jackson-databind/builds/318458719", 
        "date": "Dec 19, 2017 6:48:31 AM", 
        "id": 318458719
      }
    }, 
    "repository": {
      "name": "FasterXML-jackson-databind", 
      "url": "https://github.com/FasterXML/jackson-databind", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 3038937
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/459107dccc9b3ea991af3e6ad0953e54b01ef7c1", 
        "sha": "459107dccc9b3ea991af3e6ad0953e54b01ef7c1", 
        "branchName": "2.8", 
        "date": "Dec 19, 2017 5:31:49 PM", 
        "repoName": "FasterXML/jackson-databind"
      }, 
      "buggyBuild": {
        "url": "http://github.com/FasterXML/jackson-databind/commit/bade4792d12bcf7242ada53c197a924332840864", 
        "sha": "bade4792d12bcf7242ada53c197a924332840864", 
        "branchName": "2.8", 
        "date": "Dec 19, 2017 6:44:34 AM", 
        "repoName": "FasterXML/jackson-databind"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/FasterXML-jackson-databind-318458719-318715551", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 399, 
      "numberLibrariesFailingModule": 17, 
      "numberTestFiles": 411, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 2, 
        "numberDeleted": 3
      }
    }, 
    "bugId": "Bears_26", 
    "diff": "diff --git a/src/main/java/com/fasterxml/jackson/databind/jsontype/impl/SubTypeValidator.java b/src/main/java/com/fasterxml/jackson/databind/jsontype/impl/SubTypeValidator.java\nindex 8a273cc..45a7616 100644\n--- a/src/main/java/com/fasterxml/jackson/databind/jsontype/impl/SubTypeValidator.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/jsontype/impl/SubTypeValidator.java\n@@ -71,6 +71,7 @@ public class SubTypeValidator\n         final Class<?> raw = type.getRawClass();\n         String full = raw.getName();\n \n+        main_check:\n         do {\n             if (_cfgIllegalClassNames.contains(full)) {\n                 break;\n@@ -84,8 +85,8 @@ public class SubTypeValidator\n                     // looking for \"AbstractBeanFactoryPointcutAdvisor\" but no point to allow any is there?\n                     if (\"AbstractPointcutAdvisor\".equals(name)\n                             // ditto  for \"FileSystemXmlApplicationContext\": block all ApplicationContexts\n-                            || \"AbstractApplicationContext.equals\".equals(name)) {\n-                        break;\n+                            || \"AbstractApplicationContext\".equals(name)) {\n+                        break main_check;\n                     }\n                 }\n             }\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 248725608, 
        "hostName": "spirals-bears", 
        "totalMemory": 585105408, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 11, 2018 12:31:23 AM", 
      "projectRootPomPath": "./workspace/FasterXML/jackson-databind/318458719/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            55
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 55
        }, 
        "testing": {
          "stepDurations": [
            42
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 42
        }, 
        "cloning": {
          "stepDurations": [
            30
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 30
        }
      }, 
      "reproductionDateBeginning": "Dec 11, 2018 12:27:45 AM", 
      "totalDuration": 210
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 967, 
        "numberRunning": 968, 
        "numberFailing": 1, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/189186902", 
      "failureDetails": [
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "expected:<(unknown file)> but was:<(/root/workspace/INRIA/spoon/189186902/src/test/java/spoon/test/position/testclasses/Foo.java:3)>", 
          "isError": false, 
          "testMethod": "defaultConstructorPositionTest", 
          "testClass": "spoon.test.position.PositionTest"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 6, 
          "numberRunning": 7, 
          "testClass": "spoon.test.position.PositionTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/189233591", 
        "date": "Jan 5, 2017 5:20:38 PM", 
        "id": 189233591
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/189186902", 
        "date": "Jan 5, 2017 2:58:41 PM", 
        "id": 189186902
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/bf0652c5a3dddb0322ff2b471071ffecce7b7c70", 
        "sha": "bf0652c5a3dddb0322ff2b471071ffecce7b7c70", 
        "branchName": "master", 
        "date": "Jan 5, 2017 5:11:54 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/af9ecca3acc9eab0c78f75491f5218beaac17486", 
        "sha": "af9ecca3acc9eab0c78f75491f5218beaac17486", 
        "branchName": "master", 
        "date": "Jan 5, 2017 2:49:59 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-189186902-189233591", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 1, 
        "numberDeleted": 1
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_27", 
    "diff": "diff --git a/src/main/java/spoon/support/compiler/jdt/ContextBuilder.java b/src/main/java/spoon/support/compiler/jdt/ContextBuilder.java\nindex 3b481e3..93db295 100644\n--- a/src/main/java/spoon/support/compiler/jdt/ContextBuilder.java\n+++ b/src/main/java/spoon/support/compiler/jdt/ContextBuilder.java\n@@ -87,7 +87,7 @@ public class ContextBuilder {\n \tvoid enter(CtElement e, ASTNode node) {\n \t\tstack.push(new ASTPair(e, node));\n \t\tif (!(e instanceof CtPackage) || (compilationUnitSpoon.getFile() != null && compilationUnitSpoon.getFile().getName().equals(DefaultJavaPrettyPrinter.JAVA_PACKAGE_DECLARATION))) {\n-\t\t\tif (compilationunitdeclaration != null) {\n+\t\t\tif (compilationunitdeclaration != null && !e.isImplicit()) {\n \t\t\t\te.setPosition(this.jdtTreeBuilder.getPositionBuilder().buildPositionCtElement(e, node));\n \t\t\t}\n \t\t}\n", 
    "projectMetrics": {
      "numberSourceFiles": 446, 
      "numberLibrariesFailingModule": 9, 
      "numberTestFiles": 459, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 126159672, 
        "hostName": "local", 
        "totalMemory": 245366784, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 8:43:38 PM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/189186902/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            69
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 69
        }, 
        "testing": {
          "stepDurations": [
            257
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 257
        }, 
        "cloning": {
          "stepDurations": [
            17
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 17
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 8:32:30 PM", 
      "totalDuration": 662
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 967, 
        "numberRunning": 968, 
        "numberFailing": 1, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/189233636", 
      "failingClasses": [
        {
          "numberPassing": 9, 
          "numberRunning": 10, 
          "testClass": "spoon.test.comment.CommentTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "java.lang.AssertionError", 
          "testMethod": "testInLineComment", 
          "testClass": "spoon.test.comment.CommentTest", 
          "detail": "// last comment at the end of array:new int[]{ // comment before array value\n1 , // comment after array value\n2 , 3 } is not printed", 
          "isError": false
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/189234660", 
        "date": "Jan 5, 2017 5:24:07 PM", 
        "id": 189234660
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/189233636", 
        "date": "Jan 5, 2017 5:22:05 PM", 
        "id": 189233636
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/ce55bc43a9751081097121a5745d516cad2c5200", 
        "sha": "ce55bc43a9751081097121a5745d516cad2c5200", 
        "branchName": "master", 
        "date": "Jan 5, 2017 5:15:25 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/ac4988af27def9422c7b95f88efa7263549ee56c", 
        "sha": "ac4988af27def9422c7b95f88efa7263549ee56c", 
        "branchName": "master", 
        "date": "Jan 5, 2017 5:12:15 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-189233636-189234660", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 446, 
      "numberLibrariesFailingModule": 9, 
      "numberTestFiles": 459, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 3, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 8, 
        "numberDeleted": 7
      }
    }, 
    "bugId": "Bears_28", 
    "diff": "diff --git a/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java b/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java\nindex 136ee74..b0a9f5d 100644\n--- a/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java\n+++ b/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java\n@@ -1188,7 +1188,7 @@ public class DefaultJavaPrettyPrinter implements CtVisitor, PrettyPrinter {\n \t@SuppressWarnings(\"rawtypes\")\n \tpublic <T> void visitCtNewArray(CtNewArray<T> newArray) {\n \t\tenterCtExpression(newArray);\n-\n+\t\telementPrinterHelper.writeComment(newArray, CommentOffset.BEFORE);\n \t\tboolean isNotInAnnotation;\n \t\ttry {\n \t\t\tisNotInAnnotation = (newArray.getParent(CtAnnotationType.class) == null) && (newArray.getParent(CtAnnotation.class) == null);\n@@ -1244,8 +1244,11 @@ public class DefaultJavaPrettyPrinter implements CtVisitor, PrettyPrinter {\n \t\t\t\t\telementPrinterHelper.writeComment(e, CommentOffset.AFTER);\n \t\t\t\t}\n \t\t\t}\n+\n+\t\t\telementPrinterHelper.writeComment(newArray, CommentOffset.INSIDE);\n \t\t\tprinter.write(\" }\");\n \t\t}\n+\t\telementPrinterHelper.writeComment(newArray, CommentOffset.AFTER);\n \t\texitCtExpression(newArray);\n \t}\n \ndiff --git a/src/main/java/spoon/reflect/visitor/printer/ElementPrinterHelper.java b/src/main/java/spoon/reflect/visitor/printer/ElementPrinterHelper.java\nindex 7b08fac..0fe008d 100644\n--- a/src/main/java/spoon/reflect/visitor/printer/ElementPrinterHelper.java\n+++ b/src/main/java/spoon/reflect/visitor/printer/ElementPrinterHelper.java\n@@ -336,7 +336,8 @@ public class ElementPrinterHelper {\n \t\t\t}\n \t\t\tfinal int line = element.getPosition().getLine();\n \t\t\tfinal int sourceEnd = element.getPosition().getSourceEnd();\n-\t\t\tif (offset == CommentOffset.BEFORE && (comment.getPosition().getLine() < line || sourceEnd >= comment.getPosition().getSourceEnd())) {\n+\t\t\tfinal int sourceStart = element.getPosition().getSourceStart();\n+\t\t\tif (offset == CommentOffset.BEFORE && (comment.getPosition().getLine() < line || (sourceStart <= comment.getPosition().getSourceStart() && sourceEnd >= comment.getPosition().getSourceEnd()))) {\n \t\t\t\tcommentsToPrint.add(comment);\n \t\t\t} else if (offset == CommentOffset.AFTER && comment.getPosition().getSourceStart() > sourceEnd) {\n \t\t\t\tcommentsToPrint.add(comment);\ndiff --git a/src/main/java/spoon/support/compiler/jdt/JDTCommentBuilder.java b/src/main/java/spoon/support/compiler/jdt/JDTCommentBuilder.java\nindex d5473f1..1b643a1 100644\n--- a/src/main/java/spoon/support/compiler/jdt/JDTCommentBuilder.java\n+++ b/src/main/java/spoon/support/compiler/jdt/JDTCommentBuilder.java\n@@ -142,6 +142,7 @@ class JDTCommentBuilder {\n \tprivate CtElement addCommentToNear(final CtComment comment, final Collection<CtElement> elements) {\n \t\tCtElement best = null;\n \t\tint smallDistance = Integer.MAX_VALUE;\n+\n \t\tfor (CtElement element : elements) {\n \t\t\tif (element.getPosition() == null) {\n \t\t\t\tcontinue;\n@@ -157,7 +158,11 @@ class JDTCommentBuilder {\n \t\t\tif (isAfter) {\n \t\t\t\tdistance = Math.abs(element.getPosition().getSourceEnd() - comment.getPosition().getSourceStart());\n \t\t\t}\n-\t\t\tif (distance < smallDistance && (!isAfter || element.getPosition().getEndLine() == comment.getPosition().getLine())) {\n+\n+\t\t\tint elementEndLine = element.getPosition().getEndLine();\n+\t\t\tint commentLine = comment.getPosition().getLine();\n+\n+\t\t\tif (distance < smallDistance && (!isAfter || elementEndLine == commentLine)) {\n \t\t\t\tbest = element;\n \t\t\t\tsmallDistance = distance;\n \t\t\t}\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 170732952, 
        "hostName": "local", 
        "totalMemory": 367525888, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 8:38:27 PM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/189233636/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            64
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 64
        }, 
        "testing": {
          "stepDurations": [
            243
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 243
        }, 
        "cloning": {
          "stepDurations": [
            17
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 17
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 8:27:27 PM", 
      "totalDuration": 654
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 968, 
        "numberRunning": 969, 
        "numberFailing": 1, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/190241093", 
      "failureDetails": [
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "expected:<spoon.test.reference.testclasses.ParamRefs> but was:<void>", 
          "isError": false, 
          "testMethod": "testEqualityTypeReference", 
          "testClass": "spoon.test.reference.TypeReferenceTest"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 25, 
          "numberRunning": 26, 
          "testClass": "spoon.test.reference.TypeReferenceTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/190241752", 
        "date": "Jan 9, 2017 2:13:49 PM", 
        "id": 190241752
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/190241093", 
        "date": "Jan 9, 2017 2:10:43 PM", 
        "id": 190241093
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/669bcc077b462157d1e14fb771e10ae86075f59d", 
        "sha": "669bcc077b462157d1e14fb771e10ae86075f59d", 
        "branchName": "master", 
        "date": "Jan 9, 2017 2:04:17 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/3810dc9ccc2ba26aac9bc6e8092eb163b0cc75b9", 
        "sha": "3810dc9ccc2ba26aac9bc6e8092eb163b0cc75b9", 
        "branchName": "master", 
        "date": "Jan 9, 2017 2:02:32 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-190241093-190241752", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 3, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 11, 
        "numberDeleted": 5
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_29", 
    "diff": "diff --git a/src/main/java/spoon/reflect/factory/ExecutableFactory.java b/src/main/java/spoon/reflect/factory/ExecutableFactory.java\nindex d06fe9a..e4ea1ff 100644\n--- a/src/main/java/spoon/reflect/factory/ExecutableFactory.java\n+++ b/src/main/java/spoon/reflect/factory/ExecutableFactory.java\n@@ -114,6 +114,7 @@ public class ExecutableFactory extends SubFactory {\n \t\t} else if (e instanceof CtAnonymousExecutable) {\n \t\t\treturn createReference(((CtAnonymousExecutable) e).getDeclaringType().getReference(), e.getType().clone(), executableName);\n \t\t}\n+\t\t// constructor\n \t\treturn createReference(((CtConstructor<T>) e).getDeclaringType().getReference(), ((CtConstructor<T>) e).getType().clone(), CtExecutableReference.CONSTRUCTOR_NAME, refs);\n \t}\n \ndiff --git a/src/main/java/spoon/support/compiler/jdt/ParentExiter.java b/src/main/java/spoon/support/compiler/jdt/ParentExiter.java\nindex 51bbfa3..f7fa778 100644\n--- a/src/main/java/spoon/support/compiler/jdt/ParentExiter.java\n+++ b/src/main/java/spoon/support/compiler/jdt/ParentExiter.java\n@@ -721,9 +721,7 @@ public class ParentExiter extends CtInheritanceScanner {\n \tprivate <T> boolean hasChildEqualsToType(CtConstructorCall<T> ctConstructorCall) {\n \t\tfinal AllocationExpression parent = (AllocationExpression) jdtTreeBuilder.getContextBuilder().stack.peek().node;\n \t\t// Type is equals to the jdt child.\n-\t\treturn parent.type != null && parent.type.equals(childJDT)\n-\t\t\t\t// Type not yet initialized.\n-\t\t\t\t&& !((CtTypeAccess) child).getAccessedType().equals(ctConstructorCall.getExecutable().getType());\n+\t\treturn parent.type != null && parent.type.equals(childJDT);\n \t}\n \n \t@Override\ndiff --git a/src/main/java/spoon/support/compiler/jdt/ReferenceBuilder.java b/src/main/java/spoon/support/compiler/jdt/ReferenceBuilder.java\nindex f873b1f..a8c8208 100644\n--- a/src/main/java/spoon/support/compiler/jdt/ReferenceBuilder.java\n+++ b/src/main/java/spoon/support/compiler/jdt/ReferenceBuilder.java\n@@ -338,11 +338,14 @@ public class ReferenceBuilder {\n \t\tif (exec == null) {\n \t\t\treturn null;\n \t\t}\n-\n \t\tfinal CtExecutableReference ref = this.jdtTreeBuilder.getFactory().Core().createExecutableReference();\n-\t\tref.setSimpleName(new String(exec.selector));\n-\t\tref.setType(getTypeReference(exec.returnType));\n-\n+\t\tif (exec.isConstructor()) {\n+\t\t\tref.setSimpleName(CtExecutableReference.CONSTRUCTOR_NAME);\n+\t\t\tref.setType(getTypeReference(exec.declaringClass));\n+\t\t} else {\n+\t\t\tref.setSimpleName(new String(exec.selector));\n+\t\t\tref.setType(getTypeReference(exec.returnType));\n+\t\t}\n \t\tif (exec instanceof ProblemMethodBinding) {\n \t\t\tif (exec.declaringClass != null && Arrays.asList(exec.declaringClass.methods()).contains(exec)) {\n \t\t\t\tref.setDeclaringType(getTypeReference(exec.declaringClass));\n", 
    "projectMetrics": {
      "numberSourceFiles": 446, 
      "numberLibrariesFailingModule": 9, 
      "numberTestFiles": 460, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 122242408, 
        "hostName": "local", 
        "totalMemory": 270532608, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 8:31:53 PM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/190241093/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            65
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 65
        }, 
        "testing": {
          "stepDurations": [
            238
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 238
        }, 
        "cloning": {
          "stepDurations": [
            17
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 17
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 8:21:00 PM", 
      "totalDuration": 647
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 969, 
        "numberRunning": 970, 
        "numberFailing": 0, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "java.lang.ClassCastException", 
            "isError": true, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/190241752", 
      "failingClasses": [
        {
          "numberPassing": 8, 
          "numberRunning": 9, 
          "testClass": "spoon.test.reference.VariableAccessTest", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "java.lang.ClassCastException", 
          "testMethod": "testParameterReferenceInConstructorNoClasspath", 
          "testClass": "spoon.test.reference.VariableAccessTest", 
          "detail": "spoon.support.reflect.declaration.CtConstructorImpl cannot be cast to spoon.reflect.declaration.CtMethod", 
          "isError": true
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/190558172", 
        "date": "Jan 10, 2017 11:21:52 AM", 
        "id": 190558172
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/190241752", 
        "date": "Jan 9, 2017 2:13:49 PM", 
        "id": 190241752
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/e60e3ab92d706a87e3475645f312675fc278c9f1", 
        "sha": "e60e3ab92d706a87e3475645f312675fc278c9f1", 
        "branchName": "master", 
        "date": "Jan 10, 2017 11:13:22 AM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/669bcc077b462157d1e14fb771e10ae86075f59d", 
        "sha": "669bcc077b462157d1e14fb771e10ae86075f59d", 
        "branchName": "master", 
        "date": "Jan 9, 2017 2:04:17 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-190241752-190558172", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 446, 
      "numberLibrariesFailingModule": 9, 
      "numberTestFiles": 460, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 49, 
        "numberDeleted": 34
      }
    }, 
    "bugId": "Bears_30", 
    "diff": "diff --git a/src/main/java/spoon/support/compiler/jdt/JDTTreeBuilderHelper.java b/src/main/java/spoon/support/compiler/jdt/JDTTreeBuilderHelper.java\nindex b927920..61e0dc4 100644\n--- a/src/main/java/spoon/support/compiler/jdt/JDTTreeBuilderHelper.java\n+++ b/src/main/java/spoon/support/compiler/jdt/JDTTreeBuilderHelper.java\n@@ -17,9 +17,9 @@\n package spoon.support.compiler.jdt;\n \n import org.eclipse.jdt.core.compiler.CharOperation;\n+import org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration;\n import org.eclipse.jdt.internal.compiler.ast.Argument;\n import org.eclipse.jdt.internal.compiler.ast.FieldReference;\n-import org.eclipse.jdt.internal.compiler.ast.MethodDeclaration;\n import org.eclipse.jdt.internal.compiler.ast.QualifiedNameReference;\n import org.eclipse.jdt.internal.compiler.ast.ReferenceExpression;\n import org.eclipse.jdt.internal.compiler.ast.SingleNameReference;\n@@ -42,14 +42,16 @@ import spoon.reflect.code.CtLambda;\n import spoon.reflect.code.CtTypeAccess;\n import spoon.reflect.code.CtVariableAccess;\n import spoon.reflect.declaration.CtClass;\n+import spoon.reflect.declaration.CtConstructor;\n+import spoon.reflect.declaration.CtExecutable;\n import spoon.reflect.declaration.CtField;\n-import spoon.reflect.declaration.CtMethod;\n import spoon.reflect.declaration.CtParameter;\n import spoon.reflect.declaration.CtType;\n import spoon.reflect.declaration.CtVariable;\n import spoon.reflect.declaration.ModifierKind;\n import spoon.reflect.factory.CoreFactory;\n import spoon.reflect.factory.ExecutableFactory;\n+import spoon.reflect.factory.TypeFactory;\n import spoon.reflect.reference.CtArrayTypeReference;\n import spoon.reflect.reference.CtExecutableReference;\n import spoon.reflect.reference.CtFieldReference;\n@@ -161,6 +163,7 @@ class JDTTreeBuilderHelper {\n \t * \t\t   visible in current scope, {@code null} otherwise.\n \t */\n \t<T> CtVariableAccess<T> createVariableAccessNoClasspath(SingleNameReference singleNameReference) {\n+\t\tfinal TypeFactory typeFactory = jdtTreeBuilder.getFactory().Type();\n \t\tfinal CoreFactory coreFactory = jdtTreeBuilder.getFactory().Core();\n \t\tfinal ExecutableFactory executableFactory = jdtTreeBuilder.getFactory().Executable();\n \t\tfinal ContextBuilder contextBuilder = jdtTreeBuilder.getContextBuilder();\n@@ -186,50 +189,64 @@ class JDTTreeBuilderHelper {\n \t\t\t\t// references (in terms of Java objects) have not been set up yet. Thus, we need to\n \t\t\t\t// create the required parameter reference by our own.\n \n-\t\t\t\t// since the given parameter has not been declared in a lambda expression it must\n-\t\t\t\t// have been declared by a method!\n-\t\t\t\tfinal CtMethod method = (CtMethod) variable.getParent();\n+\t\t\t\t// Since the given parameter has not been declared in a lambda expression it must\n+\t\t\t\t// have been declared by a method/constructor.\n+\t\t\t\tfinal CtExecutable executable = (CtExecutable) variable.getParent();\n \n-\t\t\t\t// create list of method's parameter types\n-\t\t\t\tfinal List<CtTypeReference<?>> parameterTypesOfMethod = new ArrayList<>();\n-\t\t\t\tfinal List<CtParameter<?>> parametersOfMethod = method.getParameters();\n-\t\t\t\tfor (CtParameter<?> parameter : parametersOfMethod) {\n+\t\t\t\t// create list of executable's parameter types\n+\t\t\t\tfinal List<CtTypeReference<?>> parameterTypesOfExecutable = new ArrayList<>();\n+\t\t\t\t@SuppressWarnings(\"unchecked\")\n+\t\t\t\tfinal List<CtParameter<?>> parametersOfExecutable = executable.getParameters();\n+\t\t\t\tfor (CtParameter<?> parameter : parametersOfExecutable) {\n \t\t\t\t\tif (parameter.getType() != null) {\n-\t\t\t\t\t\tparameterTypesOfMethod.add(parameter.getType().clone());\n+\t\t\t\t\t\tparameterTypesOfExecutable.add(parameter.getType().clone());\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\t// it's the best match :(\n+\t\t\t\t\t\tparameterTypesOfExecutable.add(typeFactory.OBJECT);\n \t\t\t\t\t}\n \t\t\t\t}\n \n-\t\t\t\t// find method's corresponding jdt element\n-\t\t\t\tMethodDeclaration methodJDT = null;\n+\t\t\t\t// find executable's corresponding jdt element\n+\t\t\t\tAbstractMethodDeclaration executableJDT = null;\n \t\t\t\tfor (final ASTPair astPair : contextBuilder.stack) {\n-\t\t\t\t\tif (astPair.element == method) {\n-\t\t\t\t\t\tmethodJDT = (MethodDeclaration) astPair.node;\n-\t\t\t\t\t\tbreak;\n+\t\t\t\t\tif (astPair.element == executable) {\n+\t\t\t\t\t\texecutableJDT = (AbstractMethodDeclaration) astPair.node;\n \t\t\t\t\t}\n \t\t\t\t}\n-\t\t\t\tassert methodJDT != null;\n+\t\t\t\tassert executableJDT != null;\n \n-\t\t\t\t// create a reference to method's declaring class\n-\t\t\t\tfinal CtTypeReference declaringReferenceOfMethod =\n+\t\t\t\t// create a reference to executable's declaring class\n+\t\t\t\tfinal CtTypeReference declaringReferenceOfExecutable =\n \t\t\t\t\t\t// `binding` may be null for anonymous classes which means we have to\n \t\t\t\t\t\t// create an 'empty' type reference since we have no further information\n-\t\t\t\t\t\tmethodJDT.binding == null ? coreFactory.createTypeReference()\n-\t\t\t\t\t\t\t\t: referenceBuilder.getTypeReference(methodJDT.binding.declaringClass);\n-\n-\t\t\t\t// create a reference to the method of the currently processed parameter reference\n-\t\t\t\tfinal CtExecutableReference methodReference =\n-\t\t\t\t\t\texecutableFactory.createReference(declaringReferenceOfMethod,\n-\t\t\t\t\t\t\t\t// we need to clone method's return type (rt) before passing to\n-\t\t\t\t\t\t\t\t// `createReference` since this method (indirectly) sets the parent\n-\t\t\t\t\t\t\t\t// of the rt and, therefore, may break the AST\n-\t\t\t\t\t\t\t\tmethod.getType().clone(),\n-\t\t\t\t\t\t\t\t// no need to clone/copy as Strings are immutable\n-\t\t\t\t\t\t\t\tmethod.getSimpleName(),\n-\t\t\t\t\t\t\t\t// no need to clone/copy as we just created this object\n-\t\t\t\t\t\t\t\tparameterTypesOfMethod);\n-\n-\t\t\t\t// finally, we can set the method reference...\n-\t\t\t\tparameterReference.setDeclaringExecutable(methodReference);\n+\t\t\t\t\t\t// available\n+\t\t\t\t\t\texecutableJDT.binding == null ? coreFactory.createTypeReference()\n+\t\t\t\t\t\t\t\t: referenceBuilder.getTypeReference(\n+\t\t\t\t\t\t\t\t\t\texecutableJDT.binding.declaringClass);\n+\n+\t\t\t\t// If executable is a constructor, `executable.getType()` returns null since the\n+\t\t\t\t// parent is not available yet. Fortunately, however, the return type of a\n+\t\t\t\t// constructor is its declaring class which, in our case, is already available with\n+\t\t\t\t// declaringReferenceOfExecutable.\n+\t\t\t\tCtTypeReference executableTypeReference = executable instanceof CtConstructor\n+\t\t\t\t\t\t// IMPORTANT: Create a clone of the type reference (rt) if retrieved by\n+\t\t\t\t\t\t// other AST elements as `executableFactory.createReference` (see below)\n+\t\t\t\t\t\t// indirectly sets the parent of `rt` and, thus, may break the AST!\n+\t\t\t\t\t\t? declaringReferenceOfExecutable.clone()\n+\t\t\t\t\t\t: executable.getType().clone();\n+\n+\t\t\t\t// create a reference to the executable of the currently processed parameter\n+\t\t\t\t// reference\n+\t\t\t\t@SuppressWarnings(\"unchecked\")\n+\t\t\t\tfinal CtExecutableReference executableReference =\n+\t\t\t\t\t\texecutableFactory.createReference(\n+\t\t\t\t\t\t\t\tdeclaringReferenceOfExecutable,\n+\t\t\t\t\t\t\t\texecutableTypeReference,\n+\t\t\t\t\t\t\t\texecutable.getSimpleName(),\n+\t\t\t\t\t\t\t\tparameterTypesOfExecutable);\n+\n+\t\t\t\t// finally, we can set the executable reference...\n+\t\t\t\tparameterReference.setDeclaringExecutable(executableReference);\n \t\t\t}\n \t\t\tvariableReference = parameterReference;\n \t\t\tvariableAccess = isLhsAssignment(contextBuilder, singleNameReference)\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 196854312, 
        "hostName": "local", 
        "totalMemory": 255328256, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 8:25:08 PM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/190241752/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            59
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 59
        }, 
        "testing": {
          "stepDurations": [
            201
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 201
        }, 
        "cloning": {
          "stepDurations": [
            16
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 16
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 8:15:11 PM", 
      "totalDuration": 591
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 981, 
        "numberRunning": 985, 
        "numberFailing": 2, 
        "numberErroring": 2, 
        "failures": [
          {
            "failureName": "spoon.SpoonException", 
            "isError": true, 
            "occurrences": 2
          }, 
          {
            "failureName": "org.junit.ComparisonFailure", 
            "isError": false, 
            "occurrences": 2
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/191511078", 
      "failureDetails": [
        {
          "failureName": "org.junit.ComparisonFailure", 
          "detail": "expected:<...ltimap<K, V>.Wrapped[Collection].WrappedIterator {}> but was:<...ltimap<K, V>.Wrapped[List].WrappedIterator {}>", 
          "isError": false, 
          "testMethod": "testNestedAccessPathWithTypedParameter", 
          "testClass": "spoon.test.imports.ImportTest"
        }, 
        {
          "failureName": "spoon.SpoonException", 
          "detail": "java.lang.NullPointerException", 
          "isError": true, 
          "testMethod": "testTest", 
          "testClass": "spoon.test.main.MainTest"
        }, 
        {
          "failureName": "spoon.SpoonException", 
          "detail": "java.lang.NullPointerException", 
          "isError": true, 
          "testMethod": "testAccessPath", 
          "testClass": "spoon.test.imports.ImportTest"
        }, 
        {
          "failureName": "org.junit.ComparisonFailure", 
          "detail": "expected:<...ltimap<K, V>.Wrapped[Collection].WrappedIterator {}> but was:<...ltimap<K, V>.Wrapped[List].WrappedIterator {}>", 
          "isError": false, 
          "testMethod": "testNestedAccessPathWithTypedParameterWithImports", 
          "testClass": "spoon.test.imports.ImportTest"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 21, 
          "numberRunning": 24, 
          "testClass": "spoon.test.imports.ImportTest", 
          "numberFailing": 2, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }, 
        {
          "numberPassing": 5, 
          "numberRunning": 6, 
          "testClass": "spoon.test.main.MainTest", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/191595944", 
        "date": "Jan 13, 2017 12:10:04 PM", 
        "id": 191595944
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/191511078", 
        "date": "Jan 13, 2017 3:15:56 AM", 
        "id": 191511078
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/551f0fb28c49f4b1eeab93f7748c04ef82cfde39", 
        "sha": "551f0fb28c49f4b1eeab93f7748c04ef82cfde39", 
        "branchName": "master", 
        "date": "Jan 13, 2017 11:58:00 AM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/7beb903ee2fbbea5b48ad316944ef831b69074f4", 
        "sha": "7beb903ee2fbbea5b48ad316944ef831b69074f4", 
        "branchName": "master", 
        "date": "Jan 13, 2017 3:06:56 AM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-191511078-191595944", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 1, 
        "numberDeleted": 4
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_31", 
    "diff": "diff --git a/src/main/java/spoon/support/reflect/reference/CtTypeReferenceImpl.java b/src/main/java/spoon/support/reflect/reference/CtTypeReferenceImpl.java\nindex 6a600a6..82a30e6 100644\n--- a/src/main/java/spoon/support/reflect/reference/CtTypeReferenceImpl.java\n+++ b/src/main/java/spoon/support/reflect/reference/CtTypeReferenceImpl.java\n@@ -619,7 +619,7 @@ public class CtTypeReferenceImpl<T> extends CtReferenceImpl implements CtTypeRef\n \t\t\t}\n \t\t\tif (modifiers.contains(ModifierKind.PRIVATE)) {\n \t\t\t\t//it is visible in scope of the same class only\n-\t\t\t\treturn type.getTopLevelType().getQualifiedName().equals(this.getQualifiedName());\n+\t\t\t\treturn type.getTopLevelType().getQualifiedName().equals(this.getTopLevelType().getQualifiedName());\n \t\t\t}\n \t\t\t//package protected\n \t\t\tif (type.getTopLevelType().getPackage().getSimpleName().equals(this.getTopLevelType().getPackage().getSimpleName())) {\n@@ -674,6 +674,9 @@ public class CtTypeReferenceImpl<T> extends CtReferenceImpl implements CtTypeRef\n \t\t\t}\n \t\t\tdeclType = visibleDeclType;\n \t\t}\n+\t\tif (declType == null) {\n+\t\t\tthrow new SpoonException(\"Cannot compute access path to type: \" + this.getQualifiedName() + \" in context of type: \" + contextType.getQualifiedName());\n+\t\t}\n \t\treturn declType;\n \t}\n \n", 
    "projectMetrics": {
      "numberSourceFiles": 450, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 461, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 165605712, 
        "hostName": "local", 
        "totalMemory": 276299776, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 7:52:38 PM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/191511078/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            1, 
            0, 
            0, 
            0, 
            67
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 68
        }, 
        "testing": {
          "stepDurations": [
            243
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 243
        }, 
        "cloning": {
          "stepDurations": [
            17
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 17
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 7:42:43 PM", 
      "totalDuration": 589
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 985, 
        "numberRunning": 986, 
        "numberFailing": 0, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "java.lang.NullPointerException", 
            "isError": true, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/192604168", 
      "failingClasses": [
        {
          "numberPassing": 33, 
          "numberRunning": 34, 
          "testClass": "spoon.test.filters.FilterTest", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "java.lang.NullPointerException", 
          "testClass": "spoon.test.filters.FilterTest", 
          "testMethod": "testClassCastExceptionOnForEach", 
          "isError": true
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/192969999", 
        "date": "Jan 18, 2017 10:33:42 AM", 
        "id": 192969999
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/192604168", 
        "date": "Jan 17, 2017 9:27:11 AM", 
        "id": 192604168
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/b0b3d09fe50fa25f8d204e44816ff0c62f0b30ac", 
        "sha": "b0b3d09fe50fa25f8d204e44816ff0c62f0b30ac", 
        "branchName": "master", 
        "date": "Jan 18, 2017 9:51:49 AM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/8ea4bc43f39abe12a75e57ab7f50267dbed827fe", 
        "sha": "8ea4bc43f39abe12a75e57ab7f50267dbed827fe", 
        "branchName": "master", 
        "date": "Jan 17, 2017 9:18:37 AM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-192604168-192969999", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 450, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 461, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 6, 
        "numberDeleted": 1
      }
    }, 
    "bugId": "Bears_32", 
    "diff": "diff --git a/src/main/java/spoon/reflect/visitor/chain/CtQueryImpl.java b/src/main/java/spoon/reflect/visitor/chain/CtQueryImpl.java\nindex cd3923e..54b3e66 100644\n--- a/src/main/java/spoon/reflect/visitor/chain/CtQueryImpl.java\n+++ b/src/main/java/spoon/reflect/visitor/chain/CtQueryImpl.java\n@@ -279,7 +279,12 @@ public class CtQueryImpl implements CtQuery {\n \t\t}\r\n \r\n \t\tprivate boolean isFailOnCCE() {\r\n-\t\t\treturn getStep().isFailOnCCE();\r\n+\t\t\tAbstractStep step = getStep();\r\n+\t\t\tif (step == null) {\r\n+\t\t\t\t//it is final consumer. Never throw CCE on final forEach consumer\r\n+\t\t\t\treturn false;\r\n+\t\t\t}\r\n+\t\t\treturn step.isFailOnCCE();\r\n \t\t}\r\n \r\n \t\tprivate AbstractStep getStep() {\r\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 144518448, 
        "hostName": "local", 
        "totalMemory": 282591232, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 7:47:46 PM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/192604168/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            1, 
            0, 
            0, 
            0, 
            73
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 74
        }, 
        "testing": {
          "stepDurations": [
            260
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 260
        }, 
        "cloning": {
          "stepDurations": [
            18
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 18
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 7:36:22 PM", 
      "totalDuration": 678
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 986, 
        "numberRunning": 987, 
        "numberFailing": 0, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "spoon.support.SpoonClassNotFoundException", 
            "isError": true, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/192969999", 
      "failureDetails": [
        {
          "failureName": "spoon.support.SpoonClassNotFoundException", 
          "detail": "cannot load class: NotInClasspath", 
          "isError": true, 
          "testMethod": "testNoClasspathSuperExecutable", 
          "testClass": "spoon.test.methodreference.MethodReferenceTest"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 9, 
          "numberRunning": 10, 
          "testClass": "spoon.test.methodreference.MethodReferenceTest", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/193004144", 
        "date": "Jan 18, 2017 12:18:44 PM", 
        "id": 193004144
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/192969999", 
        "date": "Jan 18, 2017 10:33:42 AM", 
        "id": 192969999
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/5b21903b4f51c530d58c33e1a8db419287469747", 
        "sha": "5b21903b4f51c530d58c33e1a8db419287469747", 
        "branchName": "master", 
        "date": "Jan 18, 2017 12:10:23 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/b0b3d09fe50fa25f8d204e44816ff0c62f0b30ac", 
        "sha": "b0b3d09fe50fa25f8d204e44816ff0c62f0b30ac", 
        "branchName": "master", 
        "date": "Jan 18, 2017 9:51:49 AM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-192969999-193004144", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 21, 
        "numberDeleted": 5
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_33", 
    "diff": "diff --git a/src/main/java/spoon/support/reflect/reference/CtTypeReferenceImpl.java b/src/main/java/spoon/support/reflect/reference/CtTypeReferenceImpl.java\nindex 82a30e6..e6ceb9e 100644\n--- a/src/main/java/spoon/support/reflect/reference/CtTypeReferenceImpl.java\n+++ b/src/main/java/spoon/support/reflect/reference/CtTypeReferenceImpl.java\n@@ -465,7 +465,14 @@ public class CtTypeReferenceImpl<T> extends CtReferenceImpl implements CtTypeRef\n \tpublic Collection<CtExecutableReference<?>> getDeclaredExecutables() {\n \t\tCtType<T> t = getDeclaration();\n \t\tif (t == null) {\n-\t\t\treturn RtHelper.getAllExecutables(getActualClass(), getFactory());\n+\t\t\ttry {\n+\t\t\t\treturn RtHelper.getAllExecutables(getActualClass(), getFactory());\n+\t\t\t} catch (final SpoonClassNotFoundException e) {\n+\t\t\t\tif (getFactory().getEnvironment().getNoClasspath()) {\n+\t\t\t\t\treturn Collections.emptyList();\n+\t\t\t\t}\n+\t\t\t\tthrow e;\n+\t\t\t}\n \t\t} else {\n \t\t\treturn t.getDeclaredExecutables();\n \t\t}\n@@ -508,12 +515,19 @@ public class CtTypeReferenceImpl<T> extends CtReferenceImpl implements CtTypeRef\n \t\tif (t != null) {\n \t\t\treturn t.getSuperclass();\n \t\t} else {\n-\t\t\tClass<T> c = getActualClass();\n-\t\t\tClass<?> sc = c.getSuperclass();\n-\t\t\tif (sc == null) {\n-\t\t\t\treturn null;\n+\t\t\ttry {\n+\t\t\t\tClass<T> c = getActualClass();\n+\t\t\t\tClass<?> sc = c.getSuperclass();\n+\t\t\t\tif (sc == null) {\n+\t\t\t\t\treturn null;\n+\t\t\t\t}\n+\t\t\t\treturn getFactory().Type().createReference(sc);\n+\t\t\t} catch (final SpoonClassNotFoundException e) {\n+\t\t\t\tif (getFactory().getEnvironment().getNoClasspath()) {\n+\t\t\t\t\treturn null;\n+\t\t\t\t}\n+\t\t\t\tthrow e;\n \t\t\t}\n-\t\t\treturn getFactory().Type().createReference(sc);\n \t\t}\n \t}\n \n", 
    "projectMetrics": {
      "numberSourceFiles": 450, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 461, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 198377320, 
        "hostName": "local", 
        "totalMemory": 252182528, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 7:42:08 PM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/192969999/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            61
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 61
        }, 
        "testing": {
          "stepDurations": [
            211
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 211
        }, 
        "cloning": {
          "stepDurations": [
            16
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 16
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 7:31:32 PM", 
      "totalDuration": 629
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 986, 
        "numberRunning": 987, 
        "numberFailing": 1, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/193004144", 
      "failingClasses": [
        {
          "numberPassing": 10, 
          "numberRunning": 11, 
          "testClass": "spoon.test.comment.CommentTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "java.lang.AssertionError", 
          "testMethod": "testInLineComment", 
          "testClass": "spoon.test.comment.CommentTest", 
          "detail": "expected:<64> but was:<63>", 
          "isError": false
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/193023299", 
        "date": "Jan 18, 2017 1:37:43 PM", 
        "id": 193023299
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/193004144", 
        "date": "Jan 18, 2017 12:18:44 PM", 
        "id": 193004144
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/dd5ff12d4c3ad1859224d0dd69b5a798af592d09", 
        "sha": "dd5ff12d4c3ad1859224d0dd69b5a798af592d09", 
        "branchName": "master", 
        "date": "Jan 18, 2017 1:29:18 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/5b21903b4f51c530d58c33e1a8db419287469747", 
        "sha": "5b21903b4f51c530d58c33e1a8db419287469747", 
        "branchName": "master", 
        "date": "Jan 18, 2017 12:10:23 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-193004144-193023299", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 450, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 461, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 2, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 39, 
        "numberDeleted": 14
      }
    }, 
    "bugId": "Bears_34", 
    "diff": "diff --git a/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java b/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java\nindex 9ed9258..e1921c0 100644\n--- a/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java\n+++ b/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java\n@@ -185,6 +185,9 @@ public class DefaultJavaPrettyPrinter implements CtVisitor, PrettyPrinter {\n \t * Enters an expression.\n \t */\n \tprotected void enterCtExpression(CtExpression<?> e) {\n+\t\tif (!(e instanceof CtStatement)) {\n+\t\t\telementPrinterHelper.writeComment(e, CommentOffset.BEFORE);\n+\t\t}\n \t\tprinter.mapLine(e, sourceCompilationUnit);\n \t\tif (shouldSetBracket(e)) {\n \t\t\tcontext.parenthesedExpression.push(e);\n@@ -221,6 +224,9 @@ public class DefaultJavaPrettyPrinter implements CtVisitor, PrettyPrinter {\n \t\t\tcontext.parenthesedExpression.pop();\n \t\t\tprinter.write(\")\");\n \t\t}\n+\t\tif (!(e instanceof CtStatement)) {\n+\t\t\telementPrinterHelper.writeComment(e, CommentOffset.AFTER);\n+\t\t}\n \t}\n \n \t/**\n@@ -507,9 +513,6 @@ public class DefaultJavaPrettyPrinter implements CtVisitor, PrettyPrinter {\n \tpublic <T> void visitCtConditional(CtConditional<T> conditional) {\n \t\tenterCtExpression(conditional);\n \t\tCtExpression<Boolean> condition = conditional.getCondition();\n-\t\tif (!(condition instanceof CtStatement)) {\n-\t\t\telementPrinterHelper.writeComment(condition, CommentOffset.BEFORE);\n-\t\t}\n \t\tboolean parent;\n \t\ttry {\n \t\t\tparent = conditional.getParent() instanceof CtAssignment || conditional.getParent() instanceof CtVariable;\n@@ -524,18 +527,9 @@ public class DefaultJavaPrettyPrinter implements CtVisitor, PrettyPrinter {\n \t\tif (parent) {\n \t\t\tprinter.write(\")\");\n \t\t}\n-\t\tif (!(condition instanceof CtStatement)) {\n-\t\t\telementPrinterHelper.writeComment(condition, CommentOffset.AFTER);\n-\t\t}\n \t\tprinter.write(\" ? \");\n \t\tCtExpression<T> thenExpression = conditional.getThenExpression();\n-\t\tif (!(thenExpression instanceof CtStatement)) {\n-\t\t\telementPrinterHelper.writeComment(thenExpression, CommentOffset.BEFORE);\n-\t\t}\n \t\tscan(thenExpression);\n-\t\tif (!(thenExpression instanceof CtStatement)) {\n-\t\t\telementPrinterHelper.writeComment(thenExpression, CommentOffset.AFTER);\n-\t\t}\n \t\tprinter.write(\" : \");\n \n \t\tCtExpression<T> elseExpression = conditional.getElseExpression();\n@@ -543,13 +537,7 @@ public class DefaultJavaPrettyPrinter implements CtVisitor, PrettyPrinter {\n \t\tif ((isAssign = elseExpression instanceof CtAssignment)) {\n \t\t\tprinter.write(\"(\");\n \t\t}\n-\t\tif (!(elseExpression instanceof CtStatement)) {\n-\t\t\telementPrinterHelper.writeComment(elseExpression, CommentOffset.BEFORE);\n-\t\t}\n \t\tscan(elseExpression);\n-\t\tif (!(elseExpression instanceof CtStatement)) {\n-\t\t\telementPrinterHelper.writeComment(elseExpression, CommentOffset.AFTER);\n-\t\t}\n \t\tif (isAssign) {\n \t\t\tprinter.write(\")\");\n \t\t}\n@@ -1188,7 +1176,6 @@ public class DefaultJavaPrettyPrinter implements CtVisitor, PrettyPrinter {\n \t@SuppressWarnings(\"rawtypes\")\n \tpublic <T> void visitCtNewArray(CtNewArray<T> newArray) {\n \t\tenterCtExpression(newArray);\n-\t\telementPrinterHelper.writeComment(newArray, CommentOffset.BEFORE);\n \t\tboolean isNotInAnnotation;\n \t\ttry {\n \t\t\tisNotInAnnotation = (newArray.getParent(CtAnnotationType.class) == null) && (newArray.getParent(CtAnnotation.class) == null);\n@@ -1210,13 +1197,7 @@ public class DefaultJavaPrettyPrinter implements CtVisitor, PrettyPrinter {\n \t\t\t\tprinter.write(\"[\");\n \t\t\t\tif (newArray.getDimensionExpressions().size() > i) {\n \t\t\t\t\tCtExpression<Integer> e = newArray.getDimensionExpressions().get(i);\n-\t\t\t\t\tif (!(e instanceof CtStatement)) {\n-\t\t\t\t\t\telementPrinterHelper.writeComment(e, CommentOffset.BEFORE);\n-\t\t\t\t\t}\n \t\t\t\t\tscan(e);\n-\t\t\t\t\tif (!(e instanceof CtStatement)) {\n-\t\t\t\t\t\telementPrinterHelper.writeComment(e, CommentOffset.AFTER);\n-\t\t\t\t\t}\n \t\t\t\t}\n \t\t\t\tprinter.write(\"]\");\n \t\t\t\tref = ((CtArrayTypeReference) ref).getComponentType();\n@@ -1227,21 +1208,16 @@ public class DefaultJavaPrettyPrinter implements CtVisitor, PrettyPrinter {\n \t\t\tList<CtExpression<?>> l_elements = newArray.getElements();\n \t\t\tfor (int i = 0; i < l_elements.size(); i++) {\n \t\t\t\tCtExpression e = l_elements.get(i);\n-\t\t\t\tif (!(e instanceof CtStatement)) {\n-\t\t\t\t\telementPrinterHelper.writeComment(e, CommentOffset.BEFORE);\n-\t\t\t\t}\n \t\t\t\tscan(e);\n \t\t\t\tprinter.write(\" , \");\n \t\t\t\tif (i + 1 == l_elements.size()) {\n-\t\t\t\t\t/*\n-\t\t\t\t\t * we have to remove last char before we writeComment.\n-\t\t\t\t\t * We cannot simply skip adding of \" , \",\n-\t\t\t\t\t * because it influences formatting and EOL too\n-\t\t\t\t\t */\n \t\t\t\t\tprinter.removeLastChar();\n-\t\t\t\t}\n-\t\t\t\tif (!(e instanceof CtStatement)) {\n-\t\t\t\t\telementPrinterHelper.writeComment(e, CommentOffset.AFTER);\n+\t\t\t\t\t// if the last element c\n+\t\t\t\t\tList<CtComment> comments = elementPrinterHelper.getComments(e, CommentOffset.AFTER);\n+\t\t\t\t\t// if the last element contains an inline comment, print a new line before closing the array\n+\t\t\t\t\tif (!comments.isEmpty() && comments.get(comments.size() - 1).getCommentType() == CtComment.CommentType.INLINE) {\n+\t\t\t\t\t\tprinter.insertLine();\n+\t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \ndiff --git a/src/main/java/spoon/support/compiler/jdt/ParentExiter.java b/src/main/java/spoon/support/compiler/jdt/ParentExiter.java\nindex f7fa778..23f33cd 100644\n--- a/src/main/java/spoon/support/compiler/jdt/ParentExiter.java\n+++ b/src/main/java/spoon/support/compiler/jdt/ParentExiter.java\n@@ -75,6 +75,7 @@ import spoon.reflect.code.CtUnaryOperator;\n import spoon.reflect.code.BinaryOperatorKind;\n import spoon.reflect.code.CtThisAccess;\n import spoon.reflect.code.CtLocalVariable;\n+import spoon.reflect.cu.SourcePosition;\n import spoon.reflect.declaration.CtAnnotation;\n import spoon.reflect.declaration.CtElement;\n import spoon.reflect.declaration.CtExecutable;\n@@ -397,6 +398,10 @@ public class ParentExiter extends CtInheritanceScanner {\n \t\t\t\top.setLeftHandOperand(operator.getRightHandOperand());\n \t\t\t\top.setRightHandOperand((CtExpression<?>) child);\n \t\t\t\toperator.setRightHandOperand(op);\n+\t\t\t\tint[] lineSeparatorPositions = this.jdtTreeBuilder.getContextBuilder().compilationunitdeclaration.compilationResult.lineSeparatorPositions;\n+\t\t\t\tSourcePosition leftPosition = op.getLeftHandOperand().getPosition();\n+\t\t\t\tSourcePosition rightPosition = op.getRightHandOperand().getPosition();\n+\t\t\t\top.setPosition(op.getFactory().createSourcePosition(leftPosition.getCompilationUnit(), leftPosition.getSourceStart(), rightPosition.getSourceEnd(), lineSeparatorPositions));\n \t\t\t\treturn;\n \t\t\t}\n \t\t}\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 179444400, 
        "hostName": "local", 
        "totalMemory": 253755392, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 7:27:03 PM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/193004144/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            64
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 64
        }, 
        "testing": {
          "stepDurations": [
            230
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 230
        }, 
        "cloning": {
          "stepDurations": [
            17
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 17
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 7:17:18 PM", 
      "totalDuration": 577
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 995, 
        "numberRunning": 996, 
        "numberFailing": 1, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/196963859", 
      "failureDetails": [
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "The result should not contain import static: ", 
          "isError": false, 
          "testMethod": "testAutoimportModeDontImportUselessStatic", 
          "testClass": "spoon.test.prettyprinter.PrinterTest"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 5, 
          "numberRunning": 6, 
          "testClass": "spoon.test.prettyprinter.PrinterTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/196966996", 
        "date": "Jan 31, 2017 3:50:13 PM", 
        "id": 196966996
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/196963859", 
        "date": "Jan 31, 2017 3:41:53 PM", 
        "id": 196963859
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/23ba99df0825643a841941d7d764ed01ce7d952c", 
        "sha": "23ba99df0825643a841941d7d764ed01ce7d952c", 
        "branchName": "master", 
        "date": "Jan 31, 2017 3:41:49 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/6bef9fd815d506f5ab48efdc1c902a0df2a26824", 
        "sha": "6bef9fd815d506f5ab48efdc1c902a0df2a26824", 
        "branchName": "master", 
        "date": "Jan 31, 2017 3:32:28 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-196963859-196966996", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 3, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 152, 
        "numberDeleted": 166
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_35", 
    "diff": "diff --git a/src/main/java/spoon/reflect/visitor/ImportScannerImpl.java b/src/main/java/spoon/reflect/visitor/ImportScannerImpl.java\nindex 14baa95..f3dc890 100644\n--- a/src/main/java/spoon/reflect/visitor/ImportScannerImpl.java\n+++ b/src/main/java/spoon/reflect/visitor/ImportScannerImpl.java\n@@ -16,6 +16,7 @@\n  */\n package spoon.reflect.visitor;\n \n+import spoon.reflect.code.CtBlock;\n import spoon.reflect.code.CtCatchVariable;\n import spoon.reflect.code.CtFieldAccess;\n import spoon.reflect.code.CtFieldRead;\n@@ -26,9 +27,13 @@ import spoon.reflect.declaration.CtClass;\n import spoon.reflect.declaration.CtElement;\n import spoon.reflect.declaration.CtEnum;\n import spoon.reflect.declaration.CtExecutable;\n+import spoon.reflect.declaration.CtField;\n import spoon.reflect.declaration.CtInterface;\n+import spoon.reflect.declaration.CtMethod;\n+import spoon.reflect.declaration.CtPackage;\n import spoon.reflect.declaration.CtType;\n import spoon.reflect.declaration.CtTypeMember;\n+import spoon.reflect.declaration.CtVariable;\n import spoon.reflect.declaration.ParentNotInitializedException;\n import spoon.reflect.reference.CtArrayTypeReference;\n import spoon.reflect.reference.CtExecutableReference;\n@@ -44,7 +49,11 @@ import java.util.Arrays;\n import java.util.Collection;\n import java.util.Collections;\n import java.util.HashMap;\n+import java.util.HashSet;\n+import java.util.LinkedList;\n+import java.util.List;\n import java.util.Map;\n+import java.util.Set;\n import java.util.TreeMap;\n \n /**\n@@ -63,6 +72,7 @@ public class ImportScannerImpl extends CtScanner implements ImportScanner {\n \t//top declaring type of that import\n \tprotected CtTypeReference<?> targetType;\n \tprivate Map<String, Boolean> namesPresentInJavaLang = new HashMap<>();\n+\tprivate Set<String> fieldAndMethodsNames = new HashSet<String>();\n \n \t@Override\n \tpublic <T> void visitCtFieldRead(CtFieldRead<T> fieldRead) {\n@@ -377,7 +387,11 @@ public class ImportScannerImpl extends CtScanner implements ImportScanner {\n \t */\n \tprivate boolean declaringTypeIsLocalOrImported(CtTypeReference declaringType) {\n \t\tif (declaringType != null) {\n-\t\t\tif (isImportedInClassImports(declaringType)) {\n+\t\t\tif (isImportedInClassImports(declaringType) || classNamePresentInJavaLang(declaringType)) {\n+\t\t\t\treturn true;\n+\t\t\t}\n+\n+\t\t\tif (!isTypeInCollision(declaringType, false) && addClassImport(declaringType)) {\n \t\t\t\treturn true;\n \t\t\t}\n \n@@ -479,4 +493,146 @@ public class ImportScannerImpl extends CtScanner implements ImportScanner {\n \t\t}\n \t\treturn presentInJavaLang;\n \t}\n+\n+\tprotected Set<String> lookForLocalVariables(CtElement parent) {\n+\t\tSet<String> result = new HashSet<>();\n+\n+\t\t// try to get the block container\n+\t\t// if the first container is the class, then we are not in a block and we can quit now.\n+\t\twhile (parent != null && !(parent instanceof CtBlock)) {\n+\t\t\tif (parent instanceof CtClass) {\n+\t\t\t\treturn result;\n+\t\t\t}\n+\t\t\tparent = parent.getParent();\n+\t\t}\n+\n+\t\tif (parent != null) {\n+\t\t\tCtBlock block = (CtBlock) parent;\n+\t\t\tboolean innerClass = false;\n+\n+\t\t\t// now we have the first container block, we want to check if we're not in an inner class\n+\t\t\twhile (parent != null && !(parent instanceof CtClass)) {\n+\t\t\t\tparent = parent.getParent();\n+\t\t\t}\n+\n+\t\t\tif (parent != null) {\n+\t\t\t\t// uhoh it's not a package as a parent, we must in an inner block:\n+\t\t\t\t// let's find the last block BEFORE the class call: some collision could occur because of variables defined in that block\n+\t\t\t\tif (!(parent.getParent() instanceof CtPackage)) {\n+\t\t\t\t\twhile (parent != null && !(parent instanceof CtBlock)) {\n+\t\t\t\t\t\tparent = parent.getParent();\n+\t\t\t\t\t}\n+\n+\t\t\t\t\tif (parent != null) {\n+\t\t\t\t\t\tblock = (CtBlock) parent;\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t}\n+\n+\t\t\tAccessibleVariablesFinder avf = new AccessibleVariablesFinder(block);\n+\t\t\tList<CtVariable> variables = avf.find();\n+\n+\t\t\tfor (CtVariable variable : variables) {\n+\t\t\t\tresult.add(variable.getSimpleName());\n+\t\t\t}\n+\t\t}\n+\n+\t\treturn result;\n+\t}\n+\n+\t/**\n+\t * Test if the reference can be imported, i.e. test if the importation could lead to a collision.\n+\t * In FQN mode, it only tests the first package name: if a collision occurs with this first one, it should be imported.\n+\t * @param ref\n+\t * @return true if the ref should be imported.\n+\t */\n+\tprotected boolean isTypeInCollision(CtReference ref, boolean fqnMode) {\n+\t\tif (targetType.getSimpleName().equals(ref.getSimpleName()) && !targetType.equals(ref)) {\n+\t\t\treturn true;\n+\t\t}\n+\n+\t\ttry {\n+\t\t\tCtElement parent;\n+\t\t\tif (ref instanceof CtTypeReference) {\n+\t\t\t\tparent = ref.getParent();\n+\t\t\t} else {\n+\t\t\t\tparent = ref;\n+\t\t\t}\n+\n+\t\t\tSet<String> localVariablesOfBlock = new HashSet<>();\n+\n+\t\t\tif (parent instanceof CtField) {\n+\t\t\t\tthis.fieldAndMethodsNames.add(((CtField) parent).getSimpleName());\n+\t\t\t} else if (parent instanceof CtMethod) {\n+\t\t\t\tthis.fieldAndMethodsNames.add(((CtMethod) parent).getSimpleName());\n+\t\t\t} else {\n+\t\t\t\tlocalVariablesOfBlock = this.lookForLocalVariables(parent);\n+\t\t\t}\n+\n+\t\t\twhile (!(parent instanceof CtPackage)) {\n+\t\t\t\tif ((parent instanceof CtFieldReference) || (parent instanceof CtExecutableReference)) {\n+\t\t\t\t\tCtReference parentType = (CtReference) parent;\n+\t\t\t\t\tLinkedList<String> qualifiedNameTokens = new LinkedList<>();\n+\n+\t\t\t\t\t// we don't want to test the current ref name, as we risk to create field import and make autoreference\n+\t\t\t\t\tif (parentType != parent) {\n+\t\t\t\t\t\tqualifiedNameTokens.add(parentType.getSimpleName());\n+\t\t\t\t\t}\n+\n+\t\t\t\t\tCtTypeReference typeReference;\n+\t\t\t\t\tif (parent instanceof CtFieldReference) {\n+\t\t\t\t\t\ttypeReference = ((CtFieldReference) parent).getDeclaringType();\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\ttypeReference = ((CtExecutableReference) parent).getDeclaringType();\n+\t\t\t\t\t}\n+\n+\t\t\t\t\tif (typeReference != null) {\n+\t\t\t\t\t\tqualifiedNameTokens.add(typeReference.getSimpleName());\n+\n+\t\t\t\t\t\tif (typeReference.getPackage() != null) {\n+\t\t\t\t\t\t\tCtPackage ctPackage = typeReference.getPackage().getDeclaration();\n+\n+\t\t\t\t\t\t\twhile (ctPackage != null) {\n+\t\t\t\t\t\t\t\tqualifiedNameTokens.add(ctPackage.getSimpleName());\n+\n+\t\t\t\t\t\t\t\tCtElement packParent = ctPackage.getParent();\n+\t\t\t\t\t\t\t\tif (packParent.getParent() != null && !((CtPackage) packParent).getSimpleName().equals(CtPackage.TOP_LEVEL_PACKAGE_NAME)) {\n+\t\t\t\t\t\t\t\t\tctPackage = (CtPackage) packParent;\n+\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\tctPackage = null;\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t\tif (!qualifiedNameTokens.isEmpty()) {\n+\t\t\t\t\t\t// qualified name token are ordered in the reverse order\n+\t\t\t\t\t\t// if the first package name is a variable name somewhere, it could lead to a collision\n+\t\t\t\t\t\tif (fieldAndMethodsNames.contains(qualifiedNameTokens.getLast()) || localVariablesOfBlock.contains(qualifiedNameTokens.getLast())) {\n+\t\t\t\t\t\t\tqualifiedNameTokens.removeLast();\n+\n+\t\t\t\t\t\t\tif (fqnMode) {\n+\t\t\t\t\t\t\t\treturn true;\n+\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t// but if the other package names are not a variable name, it's ok to import\n+\t\t\t\t\t\t\t\tfor (int i = qualifiedNameTokens.size() - 1; i > 0; i--) {\n+\t\t\t\t\t\t\t\t\tString testedToken = qualifiedNameTokens.get(i);\n+\t\t\t\t\t\t\t\t\tif (!fieldAndMethodsNames.contains(testedToken) && !localVariablesOfBlock.contains(testedToken)) {\n+\t\t\t\t\t\t\t\t\t\treturn false;\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\treturn true;\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\n+\n+\t\t\t\t}\n+\t\t\t\tparent = parent.getParent();\n+\t\t\t}\n+\t\t} catch (ParentNotInitializedException e) {\n+\t\t\treturn false;\n+\t\t}\n+\n+\t\treturn false;\n+\t}\n }\ndiff --git a/src/main/java/spoon/reflect/visitor/MinimalImportScanner.java b/src/main/java/spoon/reflect/visitor/MinimalImportScanner.java\nindex 65c9939..912692f 100644\n--- a/src/main/java/spoon/reflect/visitor/MinimalImportScanner.java\n+++ b/src/main/java/spoon/reflect/visitor/MinimalImportScanner.java\n@@ -16,94 +16,19 @@\n  */\n package spoon.reflect.visitor;\n \n-import spoon.reflect.code.CtBlock;\n-import spoon.reflect.declaration.CtClass;\n-import spoon.reflect.declaration.CtElement;\n-import spoon.reflect.declaration.CtField;\n-import spoon.reflect.declaration.CtMethod;\n-import spoon.reflect.declaration.CtPackage;\n-import spoon.reflect.declaration.CtVariable;\n-import spoon.reflect.declaration.ParentNotInitializedException;\n import spoon.reflect.reference.CtExecutableReference;\n import spoon.reflect.reference.CtFieldReference;\n import spoon.reflect.reference.CtReference;\n import spoon.reflect.reference.CtTypeReference;\n \n-import java.util.HashSet;\n-import java.util.LinkedList;\n-import java.util.List;\n-import java.util.Set;\n-\n /**\n  * A scanner dedicated to import only the necessary packages, @see spoon.test.variable.AccessFullyQualifiedTest\n  *\n  */\n public class MinimalImportScanner extends ImportScannerImpl implements ImportScanner {\n \n-\tprivate Set<String> fieldAndMethodsNames = new HashSet<String>();\n-\n-\tprivate CtClass getParentClass(CtReference ref) {\n-\t\tCtElement parent = ref.getParent();\n-\n-\t\twhile (parent != null && !(parent instanceof CtClass)) {\n-\t\t\tparent = parent.getParent();\n-\t\t}\n-\n-\t\tif (parent == null) {\n-\t\t\treturn null;\n-\t\t} else {\n-\t\t\treturn (CtClass) parent;\n-\t\t}\n-\t}\n-\n-\tprivate Set<String> lookForLocalVariables(CtElement parent) {\n-\t\tSet<String> result = new HashSet<>();\n-\n-\t\t// try to get the block container\n-\t\t// if the first container is the class, then we are not in a block and we can quit now.\n-\t\twhile (parent != null && !(parent instanceof CtBlock)) {\n-\t\t\tif (parent instanceof CtClass) {\n-\t\t\t\treturn result;\n-\t\t\t}\n-\t\t\tparent = parent.getParent();\n-\t\t}\n-\n-\t\tif (parent != null) {\n-\t\t\tCtBlock block = (CtBlock) parent;\n-\t\t\tboolean innerClass = false;\n-\n-\t\t\t// now we have the first container block, we want to check if we're not in an inner class\n-\t\t\twhile (parent != null && !(parent instanceof CtClass)) {\n-\t\t\t\tparent = parent.getParent();\n-\t\t\t}\n-\n-\t\t\tif (parent != null) {\n-\t\t\t\t// uhoh it's not a package as a parent, we must in an inner block:\n-\t\t\t\t// let's find the last block BEFORE the class call: some collision could occur because of variables defined in that block\n-\t\t\t\tif (!(parent.getParent() instanceof CtPackage)) {\n-\t\t\t\t\twhile (parent != null && !(parent instanceof CtBlock)) {\n-\t\t\t\t\t\tparent = parent.getParent();\n-\t\t\t\t\t}\n-\n-\t\t\t\t\tif (parent != null) {\n-\t\t\t\t\t\tblock = (CtBlock) parent;\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t}\n-\n-\t\t\tAccessibleVariablesFinder avf = new AccessibleVariablesFinder(block);\n-\t\t\tList<CtVariable> variables = avf.find();\n-\n-\t\t\tfor (CtVariable variable : variables) {\n-\t\t\t\tresult.add(variable.getSimpleName());\n-\t\t\t}\n-\t\t}\n-\n-\t\treturn result;\n-\t}\n-\n \t/**\n-\t * Test if the reference should be imported by looking if there is a name conflict\n+\t * This method use @link{ImportScannerImpl#isTypeInCollision} to import a ref only if there is a collision\n \t * @param ref\n \t * @return true if the ref should be imported.\n \t */\n@@ -113,74 +38,7 @@ public class MinimalImportScanner extends ImportScannerImpl implements ImportSca\n \t\t\treturn true;\n \t\t}\n \n-\t\ttry {\n-\t\t\tCtElement parent;\n-\t\t\tif (ref instanceof CtTypeReference) {\n-\t\t\t\tparent = ref.getParent();\n-\t\t\t} else {\n-\t\t\t\tparent = ref;\n-\t\t\t}\n-\n-\t\t\tSet<String> localVariablesOfBlock = new HashSet<>();\n-\n-\t\t\tif (parent instanceof CtField) {\n-\t\t\t\tthis.fieldAndMethodsNames.add(((CtField) parent).getSimpleName());\n-\t\t\t} else if (parent instanceof CtMethod) {\n-\t\t\t\tthis.fieldAndMethodsNames.add(((CtMethod) parent).getSimpleName());\n-\t\t\t} else {\n-\t\t\t\tlocalVariablesOfBlock = this.lookForLocalVariables(parent);\n-\t\t\t}\n-\n-\t\t\twhile (!(parent instanceof CtPackage)) {\n-\t\t\t\tif ((parent instanceof CtFieldReference) || (parent instanceof CtExecutableReference)) {\n-\t\t\t\t\tCtReference parentType = (CtReference) parent;\n-\t\t\t\t\tLinkedList<String> qualifiedNameTokens = new LinkedList<>();\n-\n-\t\t\t\t\t// we don't want to test the current ref name, as we risk to create field import and make autoreference\n-\t\t\t\t\tif (parentType != parent) {\n-\t\t\t\t\t\tqualifiedNameTokens.add(parentType.getSimpleName());\n-\t\t\t\t\t}\n-\n-\t\t\t\t\tCtTypeReference typeReference;\n-\t\t\t\t\tif (parent instanceof CtFieldReference) {\n-\t\t\t\t\t\ttypeReference = ((CtFieldReference) parent).getDeclaringType();\n-\t\t\t\t\t} else {\n-\t\t\t\t\t\ttypeReference = ((CtExecutableReference) parent).getDeclaringType();\n-\t\t\t\t\t}\n-\n-\t\t\t\t\tif (typeReference != null) {\n-\t\t\t\t\t\tqualifiedNameTokens.add(typeReference.getSimpleName());\n-\n-\t\t\t\t\t\tif (typeReference.getPackage() != null) {\n-\t\t\t\t\t\t\tCtPackage ctPackage = typeReference.getPackage().getDeclaration();\n-\n-\t\t\t\t\t\t\twhile (ctPackage != null) {\n-\t\t\t\t\t\t\t\tqualifiedNameTokens.add(ctPackage.getSimpleName());\n-\n-\t\t\t\t\t\t\t\tCtElement packParent = ctPackage.getParent();\n-\t\t\t\t\t\t\t\tif (packParent.getParent() != null && !((CtPackage) packParent).getSimpleName().equals(CtPackage.TOP_LEVEL_PACKAGE_NAME)) {\n-\t\t\t\t\t\t\t\t\tctPackage = (CtPackage) packParent;\n-\t\t\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\t\t\tctPackage = null;\n-\t\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t\t}\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\t\t\t\t\tif (!qualifiedNameTokens.isEmpty()) {\n-\t\t\t\t\t\tif (fieldAndMethodsNames.contains(qualifiedNameTokens.getLast()) || localVariablesOfBlock.contains(qualifiedNameTokens.getLast())) {\n-\t\t\t\t\t\t\treturn true;\n-\t\t\t\t\t\t}\n-\t\t\t\t\t}\n-\n-\n-\t\t\t\t}\n-\t\t\t\tparent = parent.getParent();\n-\t\t\t}\n-\t\t} catch (ParentNotInitializedException e) {\n-\t\t\treturn false;\n-\t\t}\n-\n-\t\treturn false;\n+\t\treturn isTypeInCollision(ref, true);\n \t}\n \n \t@Override\ndiff --git a/src/main/java/spoon/reflect/visitor/printer/ElementPrinterHelper.java b/src/main/java/spoon/reflect/visitor/printer/ElementPrinterHelper.java\nindex 63f58e0..2133fe5 100644\n--- a/src/main/java/spoon/reflect/visitor/printer/ElementPrinterHelper.java\n+++ b/src/main/java/spoon/reflect/visitor/printer/ElementPrinterHelper.java\n@@ -265,19 +265,27 @@ public class ElementPrinterHelper {\n \t\t\t}\n \t\t\tprinter.writeln().writeln().writeTabs();\n \t\t\tfor (CtReference ref : imports) {\n+\t\t\t\tString importStr = \"import\";\n+\t\t\t\tString importTypeStr = \"\";\n+\n \t\t\t\tif (ref instanceof CtTypeReference) {\n \t\t\t\t\tCtTypeReference typeRef = (CtTypeReference) ref;\n-\t\t\t\t\tprinter.write(\"import \" + typeRef.getQualifiedName() + \";\").writeln().writeTabs();\n+\t\t\t\t\timportTypeStr = typeRef.getQualifiedName();\n \t\t\t\t} else if (ref instanceof CtExecutableReference) {\n+\t\t\t\t\timportStr += \" static\";\n \t\t\t\t\tCtExecutableReference execRef = (CtExecutableReference) ref;\n \t\t\t\t\tif (execRef.getDeclaringType() != null) {\n-\t\t\t\t\t\tprinter.write(\"import static \" + this.removeInnerTypeSeparator(execRef.getDeclaringType().getQualifiedName()) + \".\" + execRef.getSimpleName() + \";\").writeln().writeTabs();\n+\t\t\t\t\t\timportTypeStr = this.removeInnerTypeSeparator(execRef.getDeclaringType().getQualifiedName()) + \".\" + execRef.getSimpleName();\n \t\t\t\t\t}\n \t\t\t\t} else if (ref instanceof CtFieldReference) {\n+\t\t\t\t\timportStr += \" static\";\n \t\t\t\t\tCtFieldReference fieldRef = (CtFieldReference) ref;\n-\t\t\t\t\tprinter.write(\"import static \" + this.removeInnerTypeSeparator(fieldRef.getDeclaringType().getQualifiedName()) + \".\" + fieldRef.getSimpleName() + \";\").writeln().writeTabs();\n+\t\t\t\t\timportTypeStr = this.removeInnerTypeSeparator(fieldRef.getDeclaringType().getQualifiedName()) + \".\" + fieldRef.getSimpleName();\n \t\t\t\t}\n \n+\t\t\t\tif (!importTypeStr.equals(\"\")) {\n+\t\t\t\t\tprinter.write(importStr + \" \" + importTypeStr + \";\").writeln().writeTabs();\n+\t\t\t\t}\n \t\t\t}\n \t\t\tprinter.writeln().writeTabs();\n \t\t}\n", 
    "projectMetrics": {
      "numberSourceFiles": 458, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 468, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 97585392, 
        "hostName": "local", 
        "totalMemory": 272629760, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 7:20:05 PM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/196963859/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            65
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 65
        }, 
        "testing": {
          "stepDurations": [
            270
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 270
        }, 
        "cloning": {
          "stepDurations": [
            17
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 17
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 7:08:12 PM", 
      "totalDuration": 706
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1000, 
        "numberRunning": 1001, 
        "numberFailing": 1, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/197673696", 
      "failingClasses": [
        {
          "numberPassing": 3, 
          "numberRunning": 4, 
          "testClass": "spoon.test.imports.ImportScannerTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "java.lang.AssertionError", 
          "testMethod": "testComputeImportsInClassWithSameName", 
          "testClass": "spoon.test.imports.ImportScannerTest", 
          "detail": "expected:<0> but was:<1>", 
          "isError": false
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/197674087", 
        "date": "Feb 2, 2017 4:27:43 PM", 
        "id": 197674087
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/197673696", 
        "date": "Feb 2, 2017 4:26:39 PM", 
        "id": 197673696
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/a727953e00ea1f8fa64b11cb2d237a709fd15e38", 
        "sha": "a727953e00ea1f8fa64b11cb2d237a709fd15e38", 
        "branchName": "master", 
        "date": "Feb 2, 2017 4:18:40 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/3c03c32553a2eb0e5fea8e953a87c0bf5d57eb20", 
        "sha": "3c03c32553a2eb0e5fea8e953a87c0bf5d57eb20", 
        "branchName": "master", 
        "date": "Feb 2, 2017 4:17:45 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-197673696-197674087", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 461, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 470, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 1, 
        "numberDeleted": 8
      }
    }, 
    "bugId": "Bears_36", 
    "diff": "diff --git a/src/main/java/spoon/reflect/visitor/ImportScannerImpl.java b/src/main/java/spoon/reflect/visitor/ImportScannerImpl.java\nindex f3dc890..f5591cf 100644\n--- a/src/main/java/spoon/reflect/visitor/ImportScannerImpl.java\n+++ b/src/main/java/spoon/reflect/visitor/ImportScannerImpl.java\n@@ -255,6 +255,13 @@ public class ImportScannerImpl extends CtScanner implements ImportScanner {\n \t * Adds a type to the classImports.\n \t */\n \tprotected boolean addClassImport(CtTypeReference<?> ref) {\n+\t\tif (ref == null) {\n+\t\t\treturn false;\n+\t\t}\n+\n+\t\tif (targetType != null && targetType.getSimpleName().equals(ref.getSimpleName()) && !targetType.equals(ref)) {\n+\t\t\treturn false;\n+\t\t}\n \t\tif (classImports.containsKey(ref.getSimpleName())) {\n \t\t\treturn isImportedInClassImports(ref);\n \t\t}\n@@ -277,6 +284,7 @@ public class ImportScannerImpl extends CtScanner implements ImportScanner {\n \n \t\t// we want to be sure that we are not importing a class because a static field or method we already imported\n \t\t// moreover we make exception for same package classes to avoid problems in FQN mode\n+\n \t\tif (targetType != null) {\n \t\t\ttry {\n \t\t\t\tCtElement parent = ref.getParent();\n@@ -341,7 +349,6 @@ public class ImportScannerImpl extends CtScanner implements ImportScanner {\n \t\t\t\t}\n \t\t\t}\n \t\t}\n-\n \t\t//note: we must add the type refs from the same package too, to assure that isImported(typeRef) returns true for them\n \t\t//these type refs are removed in #getClassImports()\n \t\tclassImports.put(ref.getSimpleName(), ref);\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 142754360, 
        "hostName": "local", 
        "totalMemory": 288358400, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 8:33:38 AM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/197673696/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            1, 
            0, 
            0, 
            0, 
            95
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 96
        }, 
        "testing": {
          "stepDurations": [
            294
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 294
        }, 
        "cloning": {
          "stepDurations": [
            22
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 22
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 8:21:03 AM", 
      "totalDuration": 748
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1001, 
        "numberRunning": 1002, 
        "numberFailing": 1, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/197674087", 
      "failureDetails": [
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "The method in the interface must to be default", 
          "isError": false, 
          "testMethod": "testDefaultMethodInConsumer", 
          "testClass": "spoon.test.interfaces.InterfaceTest"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 5, 
          "numberRunning": 6, 
          "testClass": "spoon.test.interfaces.InterfaceTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/198523383", 
        "date": "Feb 5, 2017 11:23:59 AM", 
        "id": 198523383
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/197674087", 
        "date": "Feb 2, 2017 4:27:43 PM", 
        "id": 197674087
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/870a297e6b21673c5c62890cf4b57807dfaf3480", 
        "sha": "870a297e6b21673c5c62890cf4b57807dfaf3480", 
        "branchName": "master", 
        "date": "Feb 5, 2017 11:15:35 AM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/a727953e00ea1f8fa64b11cb2d237a709fd15e38", 
        "sha": "a727953e00ea1f8fa64b11cb2d237a709fd15e38", 
        "branchName": "master", 
        "date": "Feb 2, 2017 4:18:40 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-197674087-198523383", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 2, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 29, 
        "numberDeleted": 12
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_37", 
    "diff": "diff --git a/src/main/java/spoon/support/visitor/java/JavaReflectionTreeBuilder.java b/src/main/java/spoon/support/visitor/java/JavaReflectionTreeBuilder.java\nindex 6ce5723..fe82d93 100644\n--- a/src/main/java/spoon/support/visitor/java/JavaReflectionTreeBuilder.java\n+++ b/src/main/java/spoon/support/visitor/java/JavaReflectionTreeBuilder.java\n@@ -245,6 +245,7 @@ public class JavaReflectionTreeBuilder extends JavaReflectionVisitorImpl {\n \t\tctMethod.setSimpleName(method.getName());\n \t\tctMethod.setBody(factory.Core().createBlock());\n \t\tsetModifier(ctMethod, method.getModifiers());\n+\t\tctMethod.setDefaultMethod(method.isDefault());\n \n \t\tenter(new ExecutableRuntimeBuilderContext(ctMethod));\n \t\tsuper.visitMethod(method);\ndiff --git a/src/main/java/spoon/support/visitor/java/reflect/RtMethod.java b/src/main/java/spoon/support/visitor/java/reflect/RtMethod.java\nindex 727969e..d33761f 100644\n--- a/src/main/java/spoon/support/visitor/java/reflect/RtMethod.java\n+++ b/src/main/java/spoon/support/visitor/java/reflect/RtMethod.java\n@@ -17,12 +17,15 @@\n package spoon.support.visitor.java.reflect;\n \n import java.lang.annotation.Annotation;\n+import java.lang.reflect.InvocationTargetException;\n import java.lang.reflect.Method;\n import java.lang.reflect.TypeVariable;\n import java.util.ArrayList;\n import java.util.Arrays;\n import java.util.List;\n \n+import spoon.SpoonException;\n+\n public class RtMethod {\n \tprivate Class<?> clazz;\n \tprivate String name;\n@@ -34,9 +37,10 @@ public class RtMethod {\n \tprivate Annotation[] annotations;\n \tprivate Annotation[][] parameterAnnotations;\n \tprivate boolean isVarArgs;\n+\tprivate boolean isDefault;\n \n \tpublic RtMethod(Class<?> clazz, String name, Class<?> returnType, TypeVariable<Method>[] typeParameters, Class<?>[] parameterTypes, Class<?>[] exceptionTypes, int modifiers, Annotation[] annotations,\n-\t\t\tAnnotation[][] parameterAnnotations, boolean isVarArgs) {\n+\t\t\tAnnotation[][] parameterAnnotations, boolean isVarArgs, boolean isDefault) {\n \t\tthis.clazz = clazz;\n \t\tthis.name = name;\n \t\tthis.returnType = returnType;\n@@ -47,6 +51,7 @@ public class RtMethod {\n \t\tthis.annotations = annotations;\n \t\tthis.parameterAnnotations = parameterAnnotations;\n \t\tthis.isVarArgs = isVarArgs;\n+\t\tthis.isDefault = isDefault;\n \t}\n \n \tpublic Class<?> getDeclaringClass() {\n@@ -89,6 +94,10 @@ public class RtMethod {\n \t\treturn isVarArgs;\n \t}\n \n+\tpublic boolean isDefault() {\n+\t\treturn isDefault;\n+\t}\n+\n \t@Override\n \tpublic boolean equals(Object o) {\n \t\tif (this == o) {\n@@ -120,7 +129,34 @@ public class RtMethod {\n \tpublic static RtMethod create(Method method) {\n \t\treturn new RtMethod(method.getDeclaringClass(), method.getName(), method.getReturnType(),\n \t\t\t\tmethod.getTypeParameters(), method.getParameterTypes(), method.getExceptionTypes(), method.getModifiers(),\n-\t\t\t\tmethod.getDeclaredAnnotations(), method.getParameterAnnotations(), method.isVarArgs());\n+\t\t\t\tmethod.getDeclaredAnnotations(), method.getParameterAnnotations(), method.isVarArgs(),\n+\t\t\t\t//spoon is compatible with Java 7, so compilation fails here\n+\t\t\t\t//method.isDefault());\n+\t\t\t\t_java8_isDefault(method));\n+\t}\n+\n+\tprivate static Method _method_isDefault;\n+\tstatic {\n+\t\ttry {\n+\t\t\t_method_isDefault = Method.class.getMethod(\"isDefault\");\n+\t\t} catch (NoSuchMethodException | SecurityException e) {\n+\t\t\t//spoon is running with java 7 JDK\n+\t\t\t_method_isDefault = null;\n+\t\t}\n+\t}\n+\n+\tprivate static boolean _java8_isDefault(Method method) {\n+\t\tif (_method_isDefault == null) {\n+\t\t\t//spoon is running with java 7 JDK, all methods are not default, because java 7 does not have default methods\n+\t\t\treturn false;\n+\t\t}\n+\t\ttry {\n+\t\t\treturn (Boolean) _method_isDefault.invoke(method);\n+\t\t} catch (IllegalAccessException | IllegalArgumentException e) {\n+\t\t\tthrow new SpoonException(\"Calling of Java8 Method#isDefault() failed\", e);\n+\t\t} catch (InvocationTargetException e) {\n+\t\t\tthrow new SpoonException(\"Calling of Java8 Method#isDefault() failed\", e.getTargetException());\n+\t\t}\n \t}\n \n \tpublic static <T> RtMethod[] methodsOf(Class<T> clazz) {\n", 
    "projectMetrics": {
      "numberSourceFiles": 461, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 470, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 97150032, 
        "hostName": "local", 
        "totalMemory": 279445504, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 8:32:42 AM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/197674087/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            103
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 103
        }, 
        "testing": {
          "stepDurations": [
            283
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 283
        }, 
        "cloning": {
          "stepDurations": [
            20
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 20
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 8:19:47 AM", 
      "totalDuration": 768
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1002, 
        "numberRunning": 1005, 
        "numberFailing": 0, 
        "numberErroring": 3, 
        "failures": [
          {
            "failureName": "spoon.SpoonException", 
            "isError": true, 
            "occurrences": 3
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/199972949", 
      "failingClasses": [
        {
          "numberPassing": 18, 
          "numberRunning": 20, 
          "testClass": "spoon.test.lambda.LambdaTest", 
          "numberFailing": 0, 
          "numberErroring": 2, 
          "numberSkipping": 0
        }, 
        {
          "numberPassing": 5, 
          "numberRunning": 6, 
          "testClass": "spoon.test.main.MainTest", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "spoon.SpoonException", 
          "testMethod": "testCompileLambdaGeneratedBySpoon", 
          "testClass": "spoon.test.lambda.LambdaTest", 
          "detail": "The lambda can be based on interface, which has only one method. But spoon.test.lambda.testclasses.LambdaRxJava$NbpOperator has at least two: <T extends java.lang.Object> java.util.function.Function identity() and java.lang.Object apply(java.lang.Object)", 
          "isError": true
        }, 
        {
          "failureName": "spoon.SpoonException", 
          "testMethod": "testGetOverriddenMethodWithFunction", 
          "testClass": "spoon.test.lambda.LambdaTest", 
          "detail": "The lambda can be based on interface, which has only one method. But spoon.test.lambda.testclasses.LambdaRxJava$NbpOperator has at least two: <T extends java.lang.Object> java.util.function.Function identity() and java.lang.Object apply(java.lang.Object)", 
          "isError": true
        }, 
        {
          "failureName": "spoon.SpoonException", 
          "testMethod": "testTest", 
          "testClass": "spoon.test.main.MainTest", 
          "detail": "spoon.SpoonException: The lambda can be based on interface, which has only one method. But spoon.test.lambda.testclasses.LambdaRxJava$NbpOperator has at least two: <T extends java.lang.Object> java.util.function.Function identity() and java.lang.Object apply(java.lang.Object)", 
          "isError": true
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/199993301", 
        "date": "Feb 9, 2017 3:35:45 PM", 
        "id": 199993301
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/199972949", 
        "date": "Feb 9, 2017 2:32:36 PM", 
        "id": 199972949
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/b63ac185bb5c83b60f1c1bdbc10aa9b4004ae3a6", 
        "sha": "b63ac185bb5c83b60f1c1bdbc10aa9b4004ae3a6", 
        "branchName": "master", 
        "date": "Feb 9, 2017 3:27:05 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/fb9016f48e167c188c604492befa23560173be7e", 
        "sha": "fb9016f48e167c188c604492befa23560173be7e", 
        "branchName": "master", 
        "date": "Feb 9, 2017 2:23:49 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-199972949-199993301", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 461, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 471, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 1, 
        "numberDeleted": 1
      }
    }, 
    "bugId": "Bears_38", 
    "diff": "diff --git a/src/main/java/spoon/support/reflect/code/CtLambdaImpl.java b/src/main/java/spoon/support/reflect/code/CtLambdaImpl.java\nindex cc74f8c..b52bf81 100644\n--- a/src/main/java/spoon/support/reflect/code/CtLambdaImpl.java\n+++ b/src/main/java/spoon/support/reflect/code/CtLambdaImpl.java\n@@ -109,7 +109,7 @@ public class CtLambdaImpl<T> extends CtExpressionImpl<T> implements CtLambda<T>\n \t\t\tlambdaExecutableMethod = lambdaTypeMethods.iterator().next();\n \t\t} else {\n \t\t\tfor (CtMethod<?> method : lambdaTypeMethods) {\n-\t\t\t\tif (method.isDefaultMethod() || method.hasModifier(ModifierKind.PRIVATE)) {\n+\t\t\t\tif (method.isDefaultMethod() || method.hasModifier(ModifierKind.PRIVATE) || method.hasModifier(ModifierKind.STATIC)) {\n \t\t\t\t\tcontinue;\n \t\t\t\t}\n \t\t\t\tif (lambdaExecutableMethod != null) {\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 188174168, 
        "hostName": "local", 
        "totalMemory": 247988224, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 8:18:36 AM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/199972949/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            85
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 85
        }, 
        "testing": {
          "stepDurations": [
            273
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 273
        }, 
        "cloning": {
          "stepDurations": [
            17
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 17
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 8:06:02 AM", 
      "totalDuration": 746
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1023, 
        "numberRunning": 1028, 
        "numberFailing": 4, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "spoon.SpoonException", 
            "isError": true, 
            "occurrences": 1
          }, 
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 4
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/199993301", 
      "failureDetails": [
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "Test failed on VariableReferencesModelTest#localVarsInFor", 
          "isError": false, 
          "testMethod": "testVariableReferenceFunction", 
          "testClass": "spoon.test.query_function.VariableReferencesTest"
        }, 
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "expected:<1> but was:<0>", 
          "isError": false, 
          "testMethod": "testReferencesInInitExpression", 
          "testClass": "spoon.test.reference.VariableAccessTest"
        }, 
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "CtLocalVariableReference#getDeclaration returned wrong declaration in VariableReferencesModelTest#localVarInNestedClass expected:<23> but was:<25>", 
          "isError": false, 
          "testMethod": "testLocalVariableReferenceDeclarationFunction", 
          "testClass": "spoon.test.query_function.VariableReferencesTest"
        }, 
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "Test failed on VariableReferencesModelTest#localVarsInFor", 
          "isError": false, 
          "testMethod": "testLocalVariableReferenceFunction", 
          "testClass": "spoon.test.query_function.VariableReferencesTest"
        }, 
        {
          "failureName": "spoon.SpoonException", 
          "detail": "Cannot found index of local variable declaration int field = 10 in statement list {\n    for (int field = 10; field == 10;) {\n        org.junit.Assert.assertTrue((field == 10));\n        break;\n    }\n    int field = 11;\n    org.junit.Assert.assertTrue((field == 11));\n}", 
          "isError": true, 
          "testMethod": "testVariableScopeFunction", 
          "testClass": "spoon.test.query_function.VariableReferencesTest"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 3, 
          "numberRunning": 7, 
          "testClass": "spoon.test.query_function.VariableReferencesTest", 
          "numberFailing": 3, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }, 
        {
          "numberPassing": 9, 
          "numberRunning": 10, 
          "testClass": "spoon.test.reference.VariableAccessTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/200108848", 
        "date": "Feb 9, 2017 9:06:23 PM", 
        "id": 200108848
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/199993301", 
        "date": "Feb 9, 2017 3:35:45 PM", 
        "id": 199993301
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/05592e51945eb22dd570955c33c83a01d757bac8", 
        "sha": "05592e51945eb22dd570955c33c83a01d757bac8", 
        "branchName": "master", 
        "date": "Feb 9, 2017 8:53:14 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/b63ac185bb5c83b60f1c1bdbc10aa9b4004ae3a6", 
        "sha": "b63ac185bb5c83b60f1c1bdbc10aa9b4004ae3a6", 
        "branchName": "master", 
        "date": "Feb 9, 2017 3:27:05 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-199993301-200108848", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 3, 
        "numberDeleted": 2
      }, 
      "lines": {
        "numberAdded": 106, 
        "numberDeleted": 224
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_39", 
    "diff": "diff --git a/src/main/java/spoon/reflect/visitor/filter/LocalVariableReferenceFunction.java b/src/main/java/spoon/reflect/visitor/filter/LocalVariableReferenceFunction.java\nindex d11477e..2c64708 100644\n--- a/src/main/java/spoon/reflect/visitor/filter/LocalVariableReferenceFunction.java\n+++ b/src/main/java/spoon/reflect/visitor/filter/LocalVariableReferenceFunction.java\n@@ -17,7 +17,10 @@\n package spoon.reflect.visitor.filter;\r\n \r\n import spoon.reflect.code.CtLocalVariable;\r\n+import spoon.reflect.declaration.CtElement;\r\n+import spoon.reflect.declaration.CtType;\r\n import spoon.reflect.reference.CtLocalVariableReference;\r\n+import spoon.reflect.visitor.Filter;\r\n import spoon.reflect.visitor.chain.CtConsumableFunction;\r\n import spoon.reflect.visitor.chain.CtConsumer;\r\n \r\n@@ -40,10 +43,35 @@ public class LocalVariableReferenceFunction implements CtConsumableFunction<CtLo\n \t}\r\n \r\n \t@Override\r\n-\tpublic void apply(CtLocalVariable<?> localVariable, CtConsumer<Object> outputConsumer) {\r\n+\tpublic void apply(final CtLocalVariable<?> localVariable, CtConsumer<Object> outputConsumer) {\r\n+\t\tfinal String simpleName = localVariable.getSimpleName();\r\n+\t\tclass Context {\r\n+\t\t\tboolean hasLocalType = false;\r\n+\t\t}\r\n+\t\tfinal Context context = new Context();\r\n \t\tlocalVariable\r\n \t\t\t.map(new LocalVariableScopeFunction())\r\n-\t\t\t.select(new DirectReferenceFilter<CtLocalVariableReference<?>>(localVariable.getReference()))\r\n+\t\t\t.select(new Filter<CtElement>() {\r\n+\t\t\t\t@Override\r\n+\t\t\t\tpublic boolean matches(CtElement element) {\r\n+\t\t\t\t\tif (element instanceof CtType) {\r\n+\t\t\t\t\t\tcontext.hasLocalType = true;\r\n+\t\t\t\t\t} else if (element instanceof CtLocalVariableReference<?>) {\r\n+\t\t\t\t\t\tCtLocalVariableReference<?> localVarRef = (CtLocalVariableReference<?>) element;\r\n+\t\t\t\t\t\tif (simpleName.equals(localVarRef.getSimpleName())) {\r\n+\t\t\t\t\t\t\t//we have found a variable reference in visibility scope of localVariable\r\n+\t\t\t\t\t\t\tif (context.hasLocalType) {\r\n+\t\t\t\t\t\t\t\t//there exists a local type in visibility scope of this variable declaration\r\n+\t\t\t\t\t\t\t\t//the variable declarations in scope of this local class may shadow input localVariable\r\n+\t\t\t\t\t\t\t\t//so finally check that there is no other localVariable, which shadows the input localVariable\r\n+\t\t\t\t\t\t\t\treturn localVariable == localVarRef.getDeclaration();\r\n+\t\t\t\t\t\t\t}\r\n+\t\t\t\t\t\t\treturn true;\r\n+\t\t\t\t\t\t}\r\n+\t\t\t\t\t}\r\n+\t\t\t\t\treturn false;\r\n+\t\t\t\t}\r\n+\t\t\t})\r\n \t\t\t.forEach(outputConsumer);\r\n \t}\r\n }\r\ndiff --git a/src/main/java/spoon/reflect/visitor/filter/LocalVariableScopeFunction.java b/src/main/java/spoon/reflect/visitor/filter/LocalVariableScopeFunction.java\nindex f72fab4..1c2cfc8 100644\n--- a/src/main/java/spoon/reflect/visitor/filter/LocalVariableScopeFunction.java\n+++ b/src/main/java/spoon/reflect/visitor/filter/LocalVariableScopeFunction.java\n@@ -16,15 +16,9 @@\n  */\r\n package spoon.reflect.visitor.filter;\r\n \r\n-import java.util.List;\r\n-\r\n-import spoon.SpoonException;\r\n import spoon.reflect.code.CtLocalVariable;\r\n-import spoon.reflect.code.CtStatement;\r\n-import spoon.reflect.code.CtStatementList;\r\n import spoon.reflect.visitor.chain.CtConsumableFunction;\r\n import spoon.reflect.visitor.chain.CtConsumer;\r\n-import spoon.reflect.visitor.chain.CtQuery;\r\n \r\n /**\r\n  * This Query expects a {@link CtLocalVariable} as input\r\n@@ -50,22 +44,6 @@ public class LocalVariableScopeFunction implements CtConsumableFunction<CtLocalV\n \r\n \t@Override\r\n \tpublic void apply(CtLocalVariable<?> localVariable, CtConsumer<Object> outputConsumer) {\r\n-\t\tCtStatementList statements = localVariable.getParent(CtStatementList.class);\r\n-\t\tif (statements == null) {\r\n-\t\t\t//cannot search for variable references of variable which has no parent statement list/block\r\n-\t\t\treturn;\r\n-\t\t}\r\n-\t\t//create query which will be evaluated on each statement after local variable declaration\r\n-\t\tCtQuery query = localVariable.getFactory().createQuery().filterChildren(null);\r\n-\t\tList<CtStatement> stats = statements.getStatements();\r\n-\t\t//search for variable declaration in statements of current block\r\n-\t\tint idxOfVar = stats.indexOf(localVariable);\r\n-\t\tif (idxOfVar < 0) {\r\n-\t\t\tthrow new SpoonException(\"Cannot found index of local variable declaration \" + localVariable + \" in statement list \" + statements);\r\n-\t\t}\r\n-\t\t//scan only all elements AFTER this variable declaration\r\n-\t\tfor (int i = idxOfVar + 1; i < stats.size(); i++) {\r\n-\t\t\tquery.setInput(stats.get(i)).forEach(outputConsumer);\r\n-\t\t}\r\n+\t\tlocalVariable.map(new SiblingsFunction().mode(SiblingsFunction.Mode.NEXT).includingSelf(true)).filterChildren(null).forEach(outputConsumer);\r\n \t}\r\n }\r\ndiff --git a/src/main/java/spoon/reflect/visitor/filter/PotentialVariableDeclarationFunction.java b/src/main/java/spoon/reflect/visitor/filter/PotentialVariableDeclarationFunction.java\nnew file mode 100644\nindex 0000000..12d93e4\n--- /dev/null\n+++ b/src/main/java/spoon/reflect/visitor/filter/PotentialVariableDeclarationFunction.java\n@@ -0,0 +1,112 @@\n+/**\r\n+ * Copyright (C) 2006-2017 INRIA and contributors\r\n+ * Spoon - http://spoon.gforge.inria.fr/\r\n+ *\r\n+ * This software is governed by the CeCILL-C License under French law and\r\n+ * abiding by the rules of distribution of free software. You can use, modify\r\n+ * and/or redistribute the software under the terms of the CeCILL-C license as\r\n+ * circulated by CEA, CNRS and INRIA at http://www.cecill.info.\r\n+ *\r\n+ * This program is distributed in the hope that it will be useful, but WITHOUT\r\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\r\n+ * FITNESS FOR A PARTICULAR PURPOSE. See the CeCILL-C License for more details.\r\n+ *\r\n+ * The fact that you are presently reading this means that you have had\r\n+ * knowledge of the CeCILL-C license and that you accept its terms.\r\n+ */\r\n+package spoon.reflect.visitor.filter;\r\n+\r\n+import java.util.Collection;\r\n+\r\n+import spoon.reflect.code.CtBodyHolder;\r\n+import spoon.reflect.code.CtCatch;\r\n+import spoon.reflect.code.CtStatementList;\r\n+import spoon.reflect.declaration.CtElement;\r\n+import spoon.reflect.declaration.CtExecutable;\r\n+import spoon.reflect.declaration.CtField;\r\n+import spoon.reflect.declaration.CtPackage;\r\n+import spoon.reflect.declaration.CtParameter;\r\n+import spoon.reflect.declaration.CtType;\r\n+import spoon.reflect.reference.CtFieldReference;\r\n+import spoon.reflect.reference.CtVariableReference;\r\n+import spoon.reflect.visitor.chain.CtConsumableFunction;\r\n+import spoon.reflect.visitor.chain.CtConsumer;\r\n+import spoon.reflect.visitor.chain.CtQuery;\r\n+\r\n+/**\r\n+ * This Query expects a {@link CtVariableReference}, which represents reference to an variable, as input\r\n+ * and returns all {@link CtElement} instances, which might be a declaration of that variable reference\r\n+ * <br>\r\n+ * In other words, it returns all elements,\r\n+ * which might be declaration of input variable reference.\r\n+ * <br>\r\n+ * It returns {@link CtParameter} instances from methods, lambdas and catch blocks.\r\n+ * It returns {@link CtField} instances from wrapping classes and their super classes too.\r\n+ * <br>\r\n+ * The elements are visited in defined order. First are elements from nearest parent blocks,\r\n+ * then fields of wrapping classes, then fields of super classes, etc.\r\n+ * <br>\r\n+ * It can be used to search for variable declarations of\r\n+ * variable references and for detection of variable name conflicts\r\n+ * <br>\r\n+ * Usage:<br>\r\n+ * <pre> {@code\r\n+ * CtVariableReference varRef = ...;\r\n+ * varRef.map(new PotentialVariableDeclarationFunction()).forEach(...process result...);\r\n+ * }\r\n+ * </pre>\r\n+ */\r\n+public class PotentialVariableDeclarationFunction implements CtConsumableFunction<CtElement> {\r\n+\r\n+\tprivate boolean includingFields = true;\r\n+\r\n+\tpublic PotentialVariableDeclarationFunction() {\r\n+\t}\r\n+\r\n+\t@Override\r\n+\tpublic void apply(CtElement input, CtConsumer<Object> outputConsumer) {\r\n+\t\t//Search previous siblings for element which may represents the declaration of this local variable\r\n+\t\tCtQuery siblingsQuery = input.getFactory().createQuery().map(new SiblingsFunction().mode(SiblingsFunction.Mode.PREVIOUS));\r\n+\r\n+\t\tCtElement scopeElement = input;\r\n+\t\t//Search input and then all parents until first CtPackage for element which may represents the declaration of this local variable\r\n+\t\twhile (scopeElement != null && !(scopeElement instanceof CtPackage)) {\r\n+\t\t\tCtElement parent = scopeElement.getParent();\r\n+\t\t\tif (parent instanceof CtType<?>) {\r\n+\t\t\t\tif (includingFields) {\r\n+\t\t\t\t\t//TODO replace getAllFields() followed by getFieldDeclaration, by direct visiting of fields of types in super classes.\r\n+\t\t\t\t\tCollection<CtFieldReference<?>> allFields = ((CtType<?>) parent).getAllFields();\r\n+\t\t\t\t\tfor (CtFieldReference<?> fieldReference : allFields) {\r\n+\t\t\t\t\t\toutputConsumer.accept(fieldReference.getFieldDeclaration());\r\n+\t\t\t\t\t}\r\n+\t\t\t\t}\r\n+\t\t\t} else if (parent instanceof CtBodyHolder || parent instanceof CtStatementList) {\r\n+\t\t\t\t//visit all previous siblings of scopeElement element in parent BodyHolder or Statement list\r\n+\t\t\t\tsiblingsQuery.setInput(scopeElement).forEach(outputConsumer);\r\n+\t\t\t\t//visit parameters of CtCatch and CtExecutable (method, lambda)\r\n+\t\t\t\tif (parent instanceof CtCatch) {\r\n+\t\t\t\t\tCtCatch ctCatch = (CtCatch) parent;\r\n+\t\t\t\t\toutputConsumer.accept(ctCatch.getParameter());\r\n+\t\t\t\t} else if (parent instanceof CtExecutable) {\r\n+\t\t\t\t\tCtExecutable<?> exec = (CtExecutable<?>) parent;\r\n+\t\t\t\t\tfor (CtParameter<?> param : exec.getParameters()) {\r\n+\t\t\t\t\t\toutputConsumer.accept(param);\r\n+\t\t\t\t\t}\r\n+\t\t\t\t}\r\n+\t\t\t}\r\n+\t\t\tscopeElement = parent;\r\n+\t\t}\r\n+\t}\r\n+\r\n+\tpublic boolean isIncludingFields() {\r\n+\t\treturn includingFields;\r\n+\t}\r\n+\r\n+\t/**\r\n+\t * @param includingFields if true then CtFields of wrapping class and all super classes are returned too\r\n+\t */\r\n+\tpublic PotentialVariableDeclarationFunction includingFields(boolean includingFields) {\r\n+\t\tthis.includingFields = includingFields;\r\n+\t\treturn this;\r\n+\t}\r\n+}\r\ndiff --git a/src/main/java/spoon/reflect/visitor/filter/SiblingsFunction.java b/src/main/java/spoon/reflect/visitor/filter/SiblingsFunction.java\nnew file mode 100644\nindex 0000000..5075246\n--- /dev/null\n+++ b/src/main/java/spoon/reflect/visitor/filter/SiblingsFunction.java\n@@ -0,0 +1,90 @@\n+/**\r\n+ * Copyright (C) 2006-2017 INRIA and contributors\r\n+ * Spoon - http://spoon.gforge.inria.fr/\r\n+ *\r\n+ * This software is governed by the CeCILL-C License under French law and\r\n+ * abiding by the rules of distribution of free software. You can use, modify\r\n+ * and/or redistribute the software under the terms of the CeCILL-C license as\r\n+ * circulated by CEA, CNRS and INRIA at http://www.cecill.info.\r\n+ *\r\n+ * This program is distributed in the hope that it will be useful, but WITHOUT\r\n+ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\r\n+ * FITNESS FOR A PARTICULAR PURPOSE. See the CeCILL-C License for more details.\r\n+ *\r\n+ * The fact that you are presently reading this means that you have had\r\n+ * knowledge of the CeCILL-C license and that you accept its terms.\r\n+ */\r\n+package spoon.reflect.visitor.filter;\r\n+\r\n+import spoon.reflect.declaration.CtElement;\r\n+import spoon.reflect.visitor.CtScanner;\r\n+import spoon.reflect.visitor.chain.CtConsumableFunction;\r\n+import spoon.reflect.visitor.chain.CtConsumer;\r\n+\r\n+/**\r\n+ * visits siblings of input element.\r\n+ * The sibling is the element whose sibling.getParent()==input.getParent()\r\n+ * <br>\r\n+ * The siblings are visited in order in which they would be visited by CtScanner.\r\n+ * The input element is by default not visited. But if {@link #includingSelf(boolean)} is called with value true,\r\n+ * then input element is visited too in the order in which CtScanner would visit it.\r\n+ *\r\n+ *  The visiting order is relevant, because this scanner is used for example resolve local variable declarations.\r\n+ */\r\n+public class SiblingsFunction implements CtConsumableFunction<CtElement> {\r\n+\r\n+\t/**\r\n+\t * Defines visiting mode\r\n+\t */\r\n+\tpublic enum Mode {\r\n+\t\tALL,\t//all siblings are visited\r\n+\t\tPREVIOUS, //only previous siblings of input element\r\n+\t\tNEXT\t//only next siblings of input element\r\n+\t}\r\n+\r\n+\tprivate Mode mode = Mode.ALL;\r\n+\tprivate boolean includingSelf = false;\r\n+\r\n+\tpublic SiblingsFunction() {\r\n+\t}\r\n+\r\n+\t/**\r\n+\t * @param includingSelf if false then input element is not visited\r\n+\t */\r\n+\tpublic SiblingsFunction includingSelf(boolean includingSelf) {\r\n+\t\tthis.includingSelf = includingSelf;\r\n+\t\treturn this;\r\n+\t}\r\n+\r\n+\t/**\r\n+\t * @param mode defines which siblings will be visited. See {@link Mode} for possible values\r\n+\t */\r\n+\tpublic SiblingsFunction mode(Mode mode) {\r\n+\t\tthis.mode = mode;\r\n+\t\treturn this;\r\n+\t}\r\n+\r\n+\t@Override\r\n+\tpublic void apply(final CtElement input, final CtConsumer<Object> outputConsumer) {\r\n+\t\tfinal CtElement parent = input.getParent();\r\n+\t\tparent.accept(new CtScanner() {\r\n+\t\t\tboolean hasVisitedInput = false;\r\n+\t\t\tboolean visitPrev = mode == Mode.ALL || mode == Mode.PREVIOUS;\r\n+\t\t\tboolean visitNext = mode == Mode.ALL || mode == Mode.NEXT;\r\n+\t\t\t@Override\r\n+\t\t\tpublic void scan(CtElement element) {\r\n+\t\t\t\tif (element != null && element.getParent() == parent) {\r\n+\t\t\t\t\t//visit only elements whose parent is same\r\n+\t\t\t\t\tboolean canVisit = hasVisitedInput ? visitNext : visitPrev;\r\n+\t\t\t\t\tif (input == element) {\r\n+\t\t\t\t\t\thasVisitedInput = true;\r\n+\t\t\t\t\t\tcanVisit = includingSelf;\r\n+\t\t\t\t\t}\r\n+\t\t\t\t\tif (canVisit) {\r\n+\t\t\t\t\t\toutputConsumer.accept(element);\r\n+\t\t\t\t\t}\r\n+\t\t\t\t}\r\n+\t\t\t}\r\n+\t\t});\r\n+\t}\r\n+}\r\ndiff --git a/src/main/java/spoon/support/reflect/reference/CtLocalVariableReferenceImpl.java b/src/main/java/spoon/support/reflect/reference/CtLocalVariableReferenceImpl.java\nindex 6711d33..3bd5259 100644\n--- a/src/main/java/spoon/support/reflect/reference/CtLocalVariableReferenceImpl.java\n+++ b/src/main/java/spoon/support/reflect/reference/CtLocalVariableReferenceImpl.java\n@@ -17,15 +17,13 @@\n package spoon.support.reflect.reference;\n \n import spoon.reflect.code.CtLocalVariable;\n-import spoon.reflect.declaration.CtElement;\n-import spoon.reflect.declaration.CtPackage;\n+import spoon.reflect.declaration.CtVariable;\n import spoon.reflect.declaration.ParentNotInitializedException;\n import spoon.reflect.factory.Factory;\n import spoon.reflect.reference.CtLocalVariableReference;\n import spoon.reflect.visitor.CtVisitor;\n-import spoon.reflect.visitor.filter.AbstractFilter;\n-\n-import java.util.List;\n+import spoon.reflect.visitor.Filter;\n+import spoon.reflect.visitor.filter.PotentialVariableDeclarationFunction;\n \n /**\n  * An implementation for {@link CtLocalVariableReference}.\n@@ -50,6 +48,7 @@ public class CtLocalVariableReferenceImpl<T>\n \t\tvisitor.visitCtLocalVariableReference(this);\n \t}\n \n+\t@SuppressWarnings(\"unchecked\")\n \t@Override\n \tpublic CtLocalVariable<T> getDeclaration() {\n \t\t// without a factory, we are not able to filter for local variables\n@@ -57,30 +56,35 @@ public class CtLocalVariableReferenceImpl<T>\n \t\tif (factory == null) {\n \t\t\treturn null;\n \t\t}\n-\t\tfinal SimpleNameFilter filter = new SimpleNameFilter();\n \n-\t\t// successively iterate through all parents of this reference and\n-\t\t// return first result (which must be the closest declaration\n-\t\t// respecting visible scope)\n+\t\tfinal String simpleName = getSimpleName();\n+\n+\t\t//handle the CtLocalVariableReference which were created by CtLocalVariable#getReference() and which are not yet part of model, so we cannot found them using standard rules\n+\t\tif (parent instanceof CtLocalVariable) {\n+\t\t\tCtLocalVariable<T> var = (CtLocalVariable<T>) parent;\n+\t\t\tif (simpleName.equals(var.getSimpleName())) {\n+\t\t\t\treturn var;\n+\t\t\t}\n+\t\t}\n \t\ttry {\n-\t\t\tCtElement parent = getParent();\n-\t\t\t// stop at `package` level to avoid lookups to foreign Java files\n-\t\t\twhile (parent != null && !(parent instanceof CtPackage)) {\n-\t\t\t\tfinal List<CtLocalVariable<T>> localVariables =\n-\t\t\t\t\t\tparent.getElements(filter);\n-\t\t\t\t// since `parent` may be a class declaring multiple local\n-\t\t\t\t// variables with same name in different methods, we have to\n-\t\t\t\t// check if any of the findings is visible in current scope by\n-\t\t\t\t// validating that the parent of a finding is parent of this\n-\t\t\t\t// reference as well\n-\t\t\t\tfor (final CtLocalVariable<T> lv : localVariables) {\n-\t\t\t\t\tif (getParent().equals(lv) || hasParent(lv.getParent())) {\n-\t\t\t\t\t\treturn lv;\n-\t\t\t\t\t}\n+\t\t\t// successively iterate through all parents of this reference and\n+\t\t\t// return first result (which must be the closest declaration\n+\t\t\t// respecting visible scope)\n+\t\t\tCtVariable<?> var = map(new PotentialVariableDeclarationFunction()).select(new Filter<CtVariable<?>>() {\n+\t\t\t\t@Override\n+\t\t\t\tpublic boolean matches(CtVariable<?> var) {\n+\t\t\t\t\treturn simpleName.equals(var.getSimpleName());\n \t\t\t\t}\n-\t\t\t\tparent = parent.getParent();\n+\t\t\t}).first();\n+\t\t\tif (var instanceof CtLocalVariable) {\n+\t\t\t\treturn (CtLocalVariable<T>) var;\n \t\t\t}\n-\t\t} catch (final ParentNotInitializedException e) {\n+\t\t\tif (var != null) {\n+\t\t\t\t//we have found another variable declaration with same simple name, which hides declaration of this local variable reference\n+\t\t\t\t//handle it as not found\n+\t\t\t\treturn null;\n+\t\t\t}\n+\t\t} catch (ParentNotInitializedException e) {\n \t\t\t// handle this case as 'not found'\n \t\t}\n \t\treturn null;\n@@ -90,22 +94,4 @@ public class CtLocalVariableReferenceImpl<T>\n \tpublic CtLocalVariableReference<T> clone() {\n \t\treturn (CtLocalVariableReference<T>) super.clone();\n \t}\n-\n-\t/**\n-\t * A {@link spoon.reflect.visitor.Filter} that filters all\n-\t * {@link CtLocalVariable}s with simple name equals to\n-\t * {@link #getSimpleName()}.\n-\t */\n-\tprivate final class SimpleNameFilter\n-\t\t\textends AbstractFilter<CtLocalVariable<T>> {\n-\n-\t\tSimpleNameFilter() {\n-\t\t\tsuper();\n-\t\t}\n-\n-\t\t@Override\n-\t\tpublic boolean matches(final CtLocalVariable<T> element) {\n-\t\t\treturn element.getSimpleName().equals(getSimpleName());\n-\t\t}\n-\t}\n }\n", 
    "projectMetrics": {
      "numberSourceFiles": 463, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 473, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 128588560, 
        "hostName": "local", 
        "totalMemory": 274726912, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 8:18:45 AM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/199993301/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            85
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 85
        }, 
        "testing": {
          "stepDurations": [
            285
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 285
        }, 
        "cloning": {
          "stepDurations": [
            19
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 19
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 8:05:48 AM", 
      "totalDuration": 769
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1017, 
        "numberRunning": 1022, 
        "numberFailing": 1, 
        "numberErroring": 4, 
        "failures": [
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 1
          }, 
          {
            "failureName": "spoon.SpoonException", 
            "isError": true, 
            "occurrences": 4
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/201940544", 
      "failingClasses": [
        {
          "numberPassing": 21, 
          "numberRunning": 25, 
          "testClass": "spoon.test.imports.ImportTest", 
          "numberFailing": 1, 
          "numberErroring": 3, 
          "numberSkipping": 0
        }, 
        {
          "numberPassing": 5, 
          "numberRunning": 6, 
          "testClass": "spoon.test.main.MainTest", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "spoon.SpoonException", 
          "testMethod": "testSpoonWithImports", 
          "testClass": "spoon.test.imports.ImportTest", 
          "detail": "Cannot compute access path to type: spoon.test.imports.testclasses.internal.SuperClass$ProtectedInterface$NestedOfProtectedInterface in context of type: spoon.test.imports.testclasses.ClientClass$InnerClass5", 
          "isError": true
        }, 
        {
          "failureName": "spoon.SpoonException", 
          "testMethod": "testTest", 
          "testClass": "spoon.test.main.MainTest", 
          "detail": "spoon.SpoonException: Cannot compute access path to type: spoon.test.imports.testclasses.internal.SuperClass$ProtectedInterface$NestedOfProtectedInterface in context of type: spoon.test.imports.testclasses.ClientClass$InnerClass5", 
          "isError": true
        }, 
        {
          "failureName": "spoon.SpoonException", 
          "testMethod": "testImportOfAnInnerClassInASuperClassPackageAutoImport", 
          "testClass": "spoon.test.imports.ImportTest", 
          "detail": "spoon.SpoonException: Cannot compute access path to type: spoon.test.imports.testclasses.internal.SuperClass$ProtectedInterface$NestedOfProtectedInterface in context of type: spoon.test.imports.testclasses.ClientClass$InnerClass5", 
          "isError": true
        }, 
        {
          "failureName": "spoon.SpoonException", 
          "testMethod": "testImportOfAnInnerClassInASuperClassPackageFullQualified", 
          "testClass": "spoon.test.imports.ImportTest", 
          "detail": "spoon.SpoonException: Cannot compute access path to type: spoon.test.imports.testclasses.internal.SuperClass$ProtectedInterface$NestedOfProtectedInterface in context of type: spoon.test.imports.testclasses.ClientClass$InnerClass5", 
          "isError": true
        }, 
        {
          "failureName": "java.lang.AssertionError", 
          "testMethod": "testCanAccess", 
          "testClass": "spoon.test.imports.ImportTest", 
          "detail": "ClientClass should have access to spoon.test.imports.testclasses.internal.PublicInterface2$NestedInterface but it has not", 
          "isError": false
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/203101555", 
        "date": "Feb 19, 2017 8:42:14 AM", 
        "id": 203101555
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/201940544", 
        "date": "Feb 15, 2017 6:14:42 PM", 
        "id": 201940544
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/92cedf9af2909264092eff8d75069d74e9368ea6", 
        "sha": "92cedf9af2909264092eff8d75069d74e9368ea6", 
        "branchName": "master", 
        "date": "Feb 19, 2017 8:33:22 AM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/e5665b160f66a421bcf48c7625401a3d292bcb21", 
        "sha": "e5665b160f66a421bcf48c7625401a3d292bcb21", 
        "branchName": "master", 
        "date": "Feb 15, 2017 6:01:30 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-201940544-203101555", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 463, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 469, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 21, 
        "numberDeleted": 28
      }
    }, 
    "bugId": "Bears_40", 
    "diff": "diff --git a/src/main/java/spoon/support/reflect/reference/CtTypeReferenceImpl.java b/src/main/java/spoon/support/reflect/reference/CtTypeReferenceImpl.java\nindex 95dfeb2..4d39fac 100644\n--- a/src/main/java/spoon/support/reflect/reference/CtTypeReferenceImpl.java\n+++ b/src/main/java/spoon/support/reflect/reference/CtTypeReferenceImpl.java\n@@ -264,6 +264,22 @@ public class CtTypeReferenceImpl<T> extends CtReferenceImpl implements CtTypeRef\n \t\t}\n \t}\n \n+\t/**\n+\t * Detects if this type is an code responsible for implementing of that type.<br>\n+\t * In means it detects whether this type can access protected members of that type\n+\t * @return true if this type or any declaring type recursively is subtype of type or directly is the type.\n+\t */\n+\tprivate boolean isImplementationOf(CtTypeReference<?> type) {\n+\t\tCtTypeReference<?> impl = this;\n+\t\twhile (impl != null) {\n+\t\t\tif (impl.isSubtypeOf(type)) {\n+\t\t\t\treturn true;\n+\t\t\t}\n+\t\t\timpl = impl.getDeclaringType();\n+\t\t}\n+\t\treturn false;\n+\t}\n+\n \t@Override\n \tpublic <C extends CtActualTypeContainer> C setActualTypeArguments(List<? extends CtTypeReference<?>> actualTypeArguments) {\n \t\tif (actualTypeArguments == null || actualTypeArguments.isEmpty()) {\n@@ -621,21 +637,36 @@ public class CtTypeReferenceImpl<T> extends CtReferenceImpl implements CtTypeRef\n \t\t\t\treturn true;\n \t\t\t}\n \t\t\tif (modifiers.contains(ModifierKind.PROTECTED)) {\n-\t\t\t\tif (isSubtypeOf(type)) {\n-\t\t\t\t\t//is visible in subtypes\n+\t\t\t\t//the accessed type is protected in scope of declaring type.\n+\t\t\t\tCtTypeReference<?> declaringType = type.getDeclaringType();\n+\t\t\t\tif (declaringType == null) {\n+\t\t\t\t\t//top level type cannot be protected. So this is a model inconsistency.\n+\t\t\t\t\tthrow new SpoonException(\"The protected class \" + type.getQualifiedName() + \" has no declaring class.\");\n+\t\t\t\t}\n+\t\t\t\tif (isImplementationOf(declaringType)) {\n+\t\t\t\t\t//type is visible in code which implements declaringType\n \t\t\t\t\treturn true;\n \t\t\t\t} //else it is visible in same package, like package protected\n+\t\t\t\treturn isInSamePackage(type);\n \t\t\t}\n \t\t\tif (modifiers.contains(ModifierKind.PRIVATE)) {\n \t\t\t\t//it is visible in scope of the same class only\n \t\t\t\treturn type.getTopLevelType().getQualifiedName().equals(this.getTopLevelType().getQualifiedName());\n \t\t\t}\n-\t\t\t//package protected\n-\t\t\tif (type.getTopLevelType().getPackage().getSimpleName().equals(this.getTopLevelType().getPackage().getSimpleName())) {\n-\t\t\t\t//visible only in scope of the same package\n+\t\t\t/*\n+\t\t\t * no modifier, we have to check if it is nested type and if yes, if parent is interface or class.\n+\t\t\t * In case of no parent then implicit access is package protected\n+\t\t\t * In case of parent is interface, then implicit access is PUBLIC\n+\t\t\t * In case of parent is class, then implicit access is package protected\n+\t\t\t */\n+\t\t\tCtTypeReference<?> declaringTypeRef = type.getDeclaringType();\n+\t\t\tif (declaringTypeRef != null && declaringTypeRef.isInterface()) {\n+\t\t\t\t//the declaring type is interface, then implicit access is PUBLIC\n \t\t\t\treturn true;\n \t\t\t}\n-\t\t\treturn false;\n+\t\t\t//package protected\n+\t\t\t//visible only in scope of the same package\n+\t\t\treturn isInSamePackage(type);\n \t\t} catch (SpoonClassNotFoundException e) {\n \t\t\thandleParentNotFound(e);\n \t\t\t//if the modifiers cannot be resolved then we expect that it is visible\n@@ -643,6 +674,10 @@ public class CtTypeReferenceImpl<T> extends CtReferenceImpl implements CtTypeRef\n \t\t}\n \t}\n \n+\tprivate boolean isInSamePackage(CtTypeReference<?> type) {\n+\t\treturn type.getTopLevelType().getPackage().getSimpleName().equals(this.getTopLevelType().getPackage().getSimpleName());\n+\t}\n+\n \t@Override\n \tpublic CtTypeReference<?> getTopLevelType() {\n \t\tCtTypeReference<?> type = this;\n@@ -659,7 +694,7 @@ public class CtTypeReferenceImpl<T> extends CtReferenceImpl implements CtTypeRef\n \tpublic CtTypeReference<?> getAccessType() {\n \t\tCtTypeReference<?> declType = this.getDeclaringType();\n \t\tif (declType == null) {\n-\t\t\tthrow new SpoonException(\"The nestedType is expected, but it is: \" + getQualifiedName());\n+\t\t\tthrow new SpoonException(\"The declaring type is expected, but \" + getQualifiedName() + \" is top level type\");\n \t\t}\n \t\tCtType<?> contextType = getParent(CtType.class);\n \t\tif (contextType == null) {\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 101301248, 
        "hostName": "local", 
        "totalMemory": 296222720, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 8:05:21 AM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/201940544/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            1, 
            0, 
            0, 
            0, 
            69
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 70
        }, 
        "testing": {
          "stepDurations": [
            259
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 259
        }, 
        "cloning": {
          "stepDurations": [
            20
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 20
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 7:53:35 AM", 
      "totalDuration": 700
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1021, 
        "numberRunning": 1024, 
        "numberFailing": 3, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "org.junit.ComparisonFailure", 
            "isError": false, 
            "occurrences": 3
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/204567691", 
      "failureDetails": [
        {
          "failureName": "org.junit.ComparisonFailure", 
          "detail": "expected:<[android.content.]DialogInterface$OnCl...> but was:<[]DialogInterface$OnCl...>", 
          "isError": false, 
          "testMethod": "test", 
          "testClass": "spoon.test.type.TypeTest"
        }, 
        {
          "failureName": "org.junit.ComparisonFailure", 
          "detail": "expected:<new [com.example.]Type[list.size()]> but was:<new []Type[list.size()]>", 
          "isError": false, 
          "testMethod": "testInitializeWithNewArray", 
          "testClass": "spoon.test.arrays.ArraysTest"
        }, 
        {
          "failureName": "org.junit.ComparisonFailure", 
          "detail": "expected:<[org.apache.lucene.store.]Lock$With> but was:<[]Lock$With>", 
          "isError": false, 
          "testMethod": "testCtNewClassInNoClasspath", 
          "testClass": "spoon.test.constructorcallnewclass.NewClassTest"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 6, 
          "numberRunning": 7, 
          "testClass": "spoon.test.constructorcallnewclass.NewClassTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }, 
        {
          "numberPassing": 11, 
          "numberRunning": 12, 
          "testClass": "spoon.test.type.TypeTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }, 
        {
          "numberPassing": 3, 
          "numberRunning": 4, 
          "testClass": "spoon.test.arrays.ArraysTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/207361743", 
        "date": "Mar 3, 2017 2:53:53 PM", 
        "id": 207361743
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/204567691", 
        "date": "Feb 23, 2017 1:46:32 PM", 
        "id": 204567691
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/6433c2c6641e4e3eb172d04cb39ac5373b38ed74", 
        "sha": "6433c2c6641e4e3eb172d04cb39ac5373b38ed74", 
        "branchName": "master", 
        "date": "Mar 3, 2017 2:44:31 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/e7acf58718e88be92e7a50531510a152df03504d", 
        "sha": "e7acf58718e88be92e7a50531510a152df03504d", 
        "branchName": "master", 
        "date": "Feb 23, 2017 1:26:35 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-204567691-207361743", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 5, 
        "numberDeleted": 7
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_41", 
    "diff": "diff --git a/src/main/java/spoon/support/compiler/jdt/ReferenceBuilder.java b/src/main/java/spoon/support/compiler/jdt/ReferenceBuilder.java\nindex 41a22b3..58f0d86 100644\n--- a/src/main/java/spoon/support/compiler/jdt/ReferenceBuilder.java\n+++ b/src/main/java/spoon/support/compiler/jdt/ReferenceBuilder.java\n@@ -84,6 +84,7 @@ import spoon.reflect.code.CtLambda;\n import spoon.reflect.declaration.CtPackage;\n import spoon.reflect.declaration.CtParameter;\n import spoon.reflect.declaration.ModifierKind;\n+import spoon.reflect.factory.PackageFactory;\n import spoon.reflect.reference.CtArrayTypeReference;\n import spoon.reflect.reference.CtCatchVariableReference;\n import spoon.reflect.reference.CtExecutableReference;\n@@ -532,10 +533,11 @@ public class ReferenceBuilder {\n \t\tif (res == null) {\n \t\t\treturn this.jdtTreeBuilder.getFactory().Type().createReference(CharOperation.toString(ref.getParameterizedTypeName()));\n \t\t}\n-\t\tCtPackageReference packageReference = index >= 0\n-\t\t\t\t? this.jdtTreeBuilder.getFactory().Package().getOrCreate(concatSubArray(namesParameterized, index)).getReference()\n-\t\t\t\t: this.jdtTreeBuilder.getFactory().Package().topLevel();\n-\t\tinner.setPackage(packageReference);\n+\t\tif (inner.getPackage() == null) {\n+\t\t\tPackageFactory packageFactory = this.jdtTreeBuilder.getFactory().Package();\n+\t\t\tCtPackageReference packageReference = index >= 0 ? packageFactory.getOrCreate(concatSubArray(namesParameterized, index)).getReference() : packageFactory.topLevel();\n+\t\t\tinner.setPackage(packageReference);\n+\t\t}\n \t\treturn res;\n \t}\n \n@@ -572,6 +574,8 @@ public class ReferenceBuilder {\n \t\t} else if (Character.isUpperCase(name.charAt(0))) {\n \t\t\tmain = this.jdtTreeBuilder.getFactory().Core().createTypeReference();\n \t\t\tmain.setSimpleName(name);\n+\t\t\tfinal CtReference declaring = this.getDeclaringReferenceFromImports(name.toCharArray());\n+\t\t\tsetPackageOrDeclaringType(main, declaring);\n \t\t} else if (name.startsWith(\"?\")) {\n \t\t\treturn (CtTypeReference) this.jdtTreeBuilder.getFactory().Core().createWildcardReference();\n \t\t}\n", 
    "projectMetrics": {
      "numberSourceFiles": 463, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 469, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 164877992, 
        "hostName": "local", 
        "totalMemory": 247463936, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 7:52:52 AM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/204567691/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            1, 
            0, 
            0, 
            0, 
            80
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 81
        }, 
        "testing": {
          "stepDurations": [
            282
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 282
        }, 
        "cloning": {
          "stepDurations": [
            20
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 20
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 7:40:15 AM", 
      "totalDuration": 751
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1026, 
        "numberRunning": 1027, 
        "numberFailing": 0, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "spoon.reflect.declaration.ParentNotInitializedException", 
            "isError": true, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/210079209", 
      "failingClasses": [
        {
          "numberPassing": 2, 
          "numberRunning": 3, 
          "testClass": "spoon.test.prettyprinter.QualifiedThisRefTest", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "spoon.reflect.declaration.ParentNotInitializedException", 
          "testMethod": "testPrintCtFieldAccessWorkEvenWhenParentNotInitialized", 
          "testClass": "spoon.test.prettyprinter.QualifiedThisRefTest", 
          "detail": "parent not initialized for class spoon.support.reflect.code.CtInvocationImpl (unknown file)", 
          "isError": true
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/210080599", 
        "date": "Mar 11, 2017 5:48:52 PM", 
        "id": 210080599
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/210079209", 
        "date": "Mar 11, 2017 5:40:40 PM", 
        "id": 210079209
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/6d7af94b1e5cd9295c379ecfa886cacd97af7a9a", 
        "sha": "6d7af94b1e5cd9295c379ecfa886cacd97af7a9a", 
        "branchName": "master", 
        "date": "Mar 11, 2017 5:40:44 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/24ccd7213761c97d2de8586a48cc49c500ffd740", 
        "sha": "24ccd7213761c97d2de8586a48cc49c500ffd740", 
        "branchName": "master", 
        "date": "Mar 11, 2017 5:32:15 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-210079209-210080599", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 469, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 469, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 1, 
        "numberDeleted": 1
      }
    }, 
    "bugId": "Bears_42", 
    "diff": "diff --git a/src/main/java/spoon/reflect/visitor/filter/PotentialVariableDeclarationFunction.java b/src/main/java/spoon/reflect/visitor/filter/PotentialVariableDeclarationFunction.java\nindex 12d93e4..842b070 100644\n--- a/src/main/java/spoon/reflect/visitor/filter/PotentialVariableDeclarationFunction.java\n+++ b/src/main/java/spoon/reflect/visitor/filter/PotentialVariableDeclarationFunction.java\n@@ -70,7 +70,7 @@ public class PotentialVariableDeclarationFunction implements CtConsumableFunctio\n \r\n \t\tCtElement scopeElement = input;\r\n \t\t//Search input and then all parents until first CtPackage for element which may represents the declaration of this local variable\r\n-\t\twhile (scopeElement != null && !(scopeElement instanceof CtPackage)) {\r\n+\t\twhile (scopeElement != null && !(scopeElement instanceof CtPackage) && scopeElement.isParentInitialized()) {\r\n \t\t\tCtElement parent = scopeElement.getParent();\r\n \t\t\tif (parent instanceof CtType<?>) {\r\n \t\t\t\tif (includingFields) {\r\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 175543448, 
        "hostName": "local", 
        "totalMemory": 251658240, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 7:38:20 AM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/210079209/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            74
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 74
        }, 
        "testing": {
          "stepDurations": [
            202
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 202
        }, 
        "cloning": {
          "stepDurations": [
            21
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 21
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 7:29:54 AM", 
      "totalDuration": 498
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1026, 
        "numberRunning": 1028, 
        "numberFailing": 2, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 2
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/211086222", 
      "failureDetails": [
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "expected:<3> but was:<2>", 
          "isError": false, 
          "testMethod": "testOverridingMethodFromSubClassOfAbstractClass", 
          "testClass": "spoon.test.filters.FilterTest"
        }, 
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "expected:<1> but was:<0>", 
          "isError": false, 
          "testMethod": "testOverridingMethodFromSubClassOfInterface", 
          "testClass": "spoon.test.filters.FilterTest"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 37, 
          "numberRunning": 39, 
          "testClass": "spoon.test.filters.FilterTest", 
          "numberFailing": 2, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/211090498", 
        "date": "Mar 14, 2017 9:12:55 PM", 
        "id": 211090498
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/211086222", 
        "date": "Mar 14, 2017 9:01:01 PM", 
        "id": 211086222
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/286e6e993ab642e2e4331ba4573eadab5ca12b1c", 
        "sha": "286e6e993ab642e2e4331ba4573eadab5ca12b1c", 
        "branchName": "master", 
        "date": "Mar 14, 2017 9:04:50 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/f87ba4fe585aa93f9ec950b08179b5a1411e1e28", 
        "sha": "f87ba4fe585aa93f9ec950b08179b5a1411e1e28", 
        "branchName": "master", 
        "date": "Mar 14, 2017 8:53:04 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-211086222-211090498", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 5, 
        "numberDeleted": 1
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_43", 
    "diff": "diff --git a/src/main/java/spoon/support/reflect/reference/CtExecutableReferenceImpl.java b/src/main/java/spoon/support/reflect/reference/CtExecutableReferenceImpl.java\nindex 68438c4..bad7238 100644\n--- a/src/main/java/spoon/support/reflect/reference/CtExecutableReferenceImpl.java\n+++ b/src/main/java/spoon/support/reflect/reference/CtExecutableReferenceImpl.java\n@@ -236,11 +236,7 @@ public class CtExecutableReferenceImpl<T> extends CtReferenceImpl implements CtE\n \t\tif (!isSame) {\n \t\t\treturn false;\n \t\t}\n-\t\tif (getDeclaringType().isAnonymous()) {\n-\t\t\tif (!getDeclaringType().getDeclaringType().isSubtypeOf(executable.getDeclaringType())) {\n-\t\t\t\treturn false;\n-\t\t\t}\n-\t\t} else if (!getDeclaringType().isSubtypeOf(executable.getDeclaringType())) {\n+\t\tif (!getDeclaringType().isSubtypeOf(executable.getDeclaringType())) {\n \t\t\treturn false;\n \t\t}\n \t\treturn true;\n", 
    "projectMetrics": {
      "numberSourceFiles": 469, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 470, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 144297976, 
        "hostName": "local", 
        "totalMemory": 285212672, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 7:36:50 AM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/211086222/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            67
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 67
        }, 
        "testing": {
          "stepDurations": [
            181
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 181
        }, 
        "cloning": {
          "stepDurations": [
            21
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 21
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 7:28:11 AM", 
      "totalDuration": 511
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1028, 
        "numberRunning": 1029, 
        "numberFailing": 1, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/211090498", 
      "failingClasses": [
        {
          "numberPassing": 0, 
          "numberRunning": 1, 
          "testClass": "spoon.test.ctBlock.TestCtBlock", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "java.lang.AssertionError", 
          "testClass": "spoon.test.ctBlock.TestCtBlock", 
          "testMethod": "testRemoveStatement", 
          "isError": false
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/211342085", 
        "date": "Mar 15, 2017 2:22:34 PM", 
        "id": 211342085
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/211090498", 
        "date": "Mar 14, 2017 9:12:55 PM", 
        "id": 211090498
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/561853c421c1e8fc6b3cdd3b3837bf8c2940020a", 
        "sha": "561853c421c1e8fc6b3cdd3b3837bf8c2940020a", 
        "branchName": "master", 
        "date": "Mar 15, 2017 2:13:01 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/286e6e993ab642e2e4331ba4573eadab5ca12b1c", 
        "sha": "286e6e993ab642e2e4331ba4573eadab5ca12b1c", 
        "branchName": "master", 
        "date": "Mar 14, 2017 9:04:50 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-211090498-211342085", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 469, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 472, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 17, 
        "numberDeleted": 1
      }
    }, 
    "bugId": "Bears_44", 
    "diff": "diff --git a/src/main/java/spoon/support/reflect/code/CtBlockImpl.java b/src/main/java/spoon/support/reflect/code/CtBlockImpl.java\nindex 1e289a5..64700e7 100644\n--- a/src/main/java/spoon/support/reflect/code/CtBlockImpl.java\n+++ b/src/main/java/spoon/support/reflect/code/CtBlockImpl.java\n@@ -190,7 +190,23 @@ public class CtBlockImpl<R> extends CtStatementImpl implements CtBlock<R> {\n \t@Override\n \tpublic void removeStatement(CtStatement statement) {\n \t\tif (this.statements != CtElementImpl.<CtStatement>emptyList()) {\n-\t\t\tthis.statements.remove(statement);\n+\n+\t\t\tboolean hasBeenRemoved = false;\n+\t\t\t// we cannot use a remove(statement) as it uses the equals\n+\t\t\t// and a block can have twice exactly the same statement.\n+\t\t\tfor (int i = 0; i < this.statements.size(); i++) {\n+\t\t\t\tif (this.statements.get(i) == statement) {\n+\t\t\t\t\tthis.statements.remove(i);\n+\t\t\t\t\thasBeenRemoved = true;\n+\t\t\t\t\tbreak;\n+\t\t\t\t}\n+\t\t\t}\n+\n+\t\t\t// in case we use it with a statement manually built\n+\t\t\tif (!hasBeenRemoved) {\n+\t\t\t\tthis.statements.remove(statement);\n+\t\t\t}\n+\n \t\t\tif (isImplicit() && statements.size() == 0) {\n \t\t\t\tsetImplicit(false);\n \t\t\t}\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 154958136, 
        "hostName": "local", 
        "totalMemory": 248512512, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 7:27:51 AM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/211090498/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            73
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 73
        }, 
        "testing": {
          "stepDurations": [
            193
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 193
        }, 
        "cloning": {
          "stepDurations": [
            19
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 19
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 7:19:52 AM", 
      "totalDuration": 474
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1029, 
        "numberRunning": 1031, 
        "numberFailing": 2, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 2
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/211342085", 
      "failureDetails": [
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "expected:<public static final java.lang.String PREFIX = \"BasePrefix\";> but was:<public static final java.lang.String PREFIX = (spoon.test.field.testclasses.BaseClass.PREFIX) + \".b\";>", 
          "isError": false, 
          "testMethod": "testGetDefaultExpression", 
          "testClass": "spoon.test.field.FieldTest"
        }, 
        {
          "failureName": "java.lang.AssertionError", 
          "testMethod": "testGetDeclarationOfFieldAfterClone", 
          "isError": false, 
          "testClass": "spoon.test.reference.CloneReferenceTest"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 1, 
          "numberRunning": 2, 
          "testClass": "spoon.test.reference.CloneReferenceTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }, 
        {
          "numberPassing": 3, 
          "numberRunning": 4, 
          "testClass": "spoon.test.field.FieldTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/211425556", 
        "date": "Mar 15, 2017 5:52:56 PM", 
        "id": 211425556
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/211342085", 
        "date": "Mar 15, 2017 2:22:34 PM", 
        "id": 211342085
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/f818e07e0713e20a4cb40dae32a8c7579d8bf140", 
        "sha": "f818e07e0713e20a4cb40dae32a8c7579d8bf140", 
        "branchName": "master", 
        "date": "Mar 15, 2017 5:44:35 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/561853c421c1e8fc6b3cdd3b3837bf8c2940020a", 
        "sha": "561853c421c1e8fc6b3cdd3b3837bf8c2940020a", 
        "branchName": "master", 
        "date": "Mar 15, 2017 2:13:01 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-211342085-211425556", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 4, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 32, 
        "numberDeleted": 6
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_45", 
    "diff": "diff --git a/src/main/java/spoon/refactoring/Refactoring.java b/src/main/java/spoon/refactoring/Refactoring.java\nindex 398b076..fce0c5f 100644\n--- a/src/main/java/spoon/refactoring/Refactoring.java\n+++ b/src/main/java/spoon/refactoring/Refactoring.java\n@@ -36,10 +36,14 @@ public final class Refactoring {\n \t * \t\tNew name of the element.\n \t */\n \tpublic static void changeTypeName(final CtType<?> type, String name) {\n+\n+\t\tfinal String typeQFN = type.getQualifiedName();\n+\n \t\tfinal List<CtTypeReference<?>> references = Query.getElements(type.getFactory(), new TypeFilter<CtTypeReference<?>>(CtTypeReference.class) {\n \t\t\t@Override\n \t\t\tpublic boolean matches(CtTypeReference<?> reference) {\n-\t\t\t\treturn type.getQualifiedName().equals(reference.getQualifiedName());\n+\t\t\t\tString refFQN = reference.getQualifiedName();\n+\t\t\t\treturn typeQFN.equals(refFQN);\n \t\t\t}\n \t\t});\n \ndiff --git a/src/main/java/spoon/support/compiler/SnippetCompilationHelper.java b/src/main/java/spoon/support/compiler/SnippetCompilationHelper.java\nindex 96ba423..7039feb 100644\n--- a/src/main/java/spoon/support/compiler/SnippetCompilationHelper.java\n+++ b/src/main/java/spoon/support/compiler/SnippetCompilationHelper.java\n@@ -91,9 +91,8 @@ public class SnippetCompilationHelper {\n \r\n \t\tif (ret instanceof CtClass) {\r\n \t\t\tCtClass klass = (CtClass) ret;\r\n-\t\t\tklass.setSimpleName(klass.getSimpleName().replaceAll(\"^[0-9]*\", \"\"));\r\n-\t\t\tklass.setParent(ret.getFactory().Package().getRootPackage());\r\n \t\t\tret.getFactory().Package().getRootPackage().addType(klass);\r\n+\t\t\tklass.setSimpleName(klass.getSimpleName().replaceAll(\"^[0-9]*\", \"\"));\r\n \t\t}\r\n \t\treturn ret;\r\n \t}\r\ndiff --git a/src/main/java/spoon/support/reflect/declaration/CtNamedElementImpl.java b/src/main/java/spoon/support/reflect/declaration/CtNamedElementImpl.java\nindex db4eb5f..aefe25d 100644\n--- a/src/main/java/spoon/support/reflect/declaration/CtNamedElementImpl.java\n+++ b/src/main/java/spoon/support/reflect/declaration/CtNamedElementImpl.java\n@@ -43,6 +43,7 @@ public abstract class CtNamedElementImpl extends CtElementImpl implements CtName\n \t\tif (factory instanceof FactoryImpl) {\n \t\t\tsimpleName = ((FactoryImpl) factory).dedup(simpleName);\n \t\t}\n+\n \t\tthis.simpleName = simpleName;\n \t\treturn (T) this;\n \t}\ndiff --git a/src/main/java/spoon/support/reflect/reference/CtFieldReferenceImpl.java b/src/main/java/spoon/support/reflect/reference/CtFieldReferenceImpl.java\nindex e112408..fc7c633 100644\n--- a/src/main/java/spoon/support/reflect/reference/CtFieldReferenceImpl.java\n+++ b/src/main/java/spoon/support/reflect/reference/CtFieldReferenceImpl.java\n@@ -17,13 +17,11 @@\n package spoon.support.reflect.reference;\n \n import spoon.Launcher;\n-import spoon.reflect.declaration.CtElement;\n import spoon.reflect.declaration.CtEnum;\n import spoon.reflect.declaration.CtField;\n import spoon.reflect.declaration.CtType;\n import spoon.reflect.declaration.CtVariable;\n import spoon.reflect.declaration.ModifierKind;\n-import spoon.reflect.declaration.ParentNotInitializedException;\n import spoon.reflect.reference.CtFieldReference;\n import spoon.reflect.reference.CtTypeReference;\n import spoon.reflect.visitor.CtVisitor;\n@@ -130,35 +128,9 @@ public class CtFieldReferenceImpl<T> extends CtVariableReferenceImpl<T> implemen\n \t@Override\n \t@SuppressWarnings(\"unchecked\")\n \tpublic CtField<T> getDeclaration() {\n-\t\tfinal CtField<T> ctField = lookupDynamically();\n-\t\tif (ctField != null) {\n-\t\t\treturn ctField;\n-\t\t}\n \t\treturn fromDeclaringType();\n \t}\n \n-\tprivate CtField<T> lookupDynamically() {\n-\t\tCtElement element = this;\n-\t\tCtField optional = null;\n-\t\tString name = getSimpleName();\n-\t\ttry {\n-\t\t\tdo {\n-\t\t\t\tCtType type = element.getParent(CtType.class);\n-\t\t\t\tif (type == null) {\n-\t\t\t\t\treturn null;\n-\t\t\t\t}\n-\t\t\t\tfinal CtField potential = type.getField(name);\n-\t\t\t\tif (potential != null) {\n-\t\t\t\t\toptional = potential;\n-\t\t\t\t}\n-\t\t\t\telement = type;\n-\t\t\t} while (optional == null);\n-\t\t} catch (ParentNotInitializedException e) {\n-\t\t\treturn null;\n-\t\t}\n-\t\treturn optional;\n-\t}\n-\n \tprivate CtField<T> fromDeclaringType() {\n \t\tif (declaringType == null) {\n \t\t\treturn null;\n", 
    "projectMetrics": {
      "numberSourceFiles": 469, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 474, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 118243048, 
        "hostName": "local", 
        "totalMemory": 305135616, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 7:24:53 AM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/211342085/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            72
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 72
        }, 
        "testing": {
          "stepDurations": [
            154
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 154
        }, 
        "cloning": {
          "stepDurations": [
            22
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 22
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 7:16:38 AM", 
      "totalDuration": 486
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1039, 
        "numberRunning": 1040, 
        "numberFailing": 0, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "java.lang.NullPointerException", 
            "isError": true, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/213996751", 
      "failingClasses": [
        {
          "numberPassing": 0, 
          "numberRunning": 1, 
          "testClass": "spoon.test.ctElement.MetadataTest", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "java.lang.NullPointerException", 
          "isError": true, 
          "testClass": "spoon.test.ctElement.MetadataTest", 
          "testMethod": "testMetadata"
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/215500998", 
        "date": "Mar 27, 2017 2:04:47 PM", 
        "id": 215500998
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/213996751", 
        "date": "Mar 22, 2017 9:44:04 PM", 
        "id": 213996751
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/5403f1552074216126dd0350d0426fc7ccf2dd2c", 
        "sha": "5403f1552074216126dd0350d0426fc7ccf2dd2c", 
        "branchName": "master", 
        "date": "Mar 27, 2017 1:56:43 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/f190d8ebcdcfdba60a5490a5a934599fd93b159d", 
        "sha": "f190d8ebcdcfdba60a5490a5a934599fd93b159d", 
        "branchName": "master", 
        "date": "Mar 22, 2017 9:35:37 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-213996751-215500998", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 474, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 478, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 0, 
        "numberDeleted": 3
      }
    }, 
    "bugId": "Bears_46", 
    "diff": "diff --git a/src/main/java/spoon/support/reflect/declaration/CtElementImpl.java b/src/main/java/spoon/support/reflect/declaration/CtElementImpl.java\nindex 465902d..c775076 100644\n--- a/src/main/java/spoon/support/reflect/declaration/CtElementImpl.java\n+++ b/src/main/java/spoon/support/reflect/declaration/CtElementImpl.java\n@@ -386,6 +386,9 @@ public abstract class CtElementImpl implements CtElement, Serializable {\n \n \t@Override\n \tpublic Set<String> getMetadataKeys() {\n+\t\tif (metadata == null) {\n+\t\t\treturn Collections.EMPTY_SET;\n+\t\t}\n \t\treturn metadata.keySet();\n \t}\n \n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 129243320, 
        "hostName": "local", 
        "totalMemory": 286261248, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 7:19:09 AM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/213996751/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            1, 
            0, 
            0, 
            0, 
            66
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 67
        }, 
        "testing": {
          "stepDurations": [
            171
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 171
        }, 
        "cloning": {
          "stepDurations": [
            22
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 22
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 7:11:04 AM", 
      "totalDuration": 478
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1047, 
        "numberRunning": 1048, 
        "numberFailing": 1, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "org.junit.ComparisonFailure", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/218213030", 
      "failureDetails": [
        {
          "failureName": "org.junit.ComparisonFailure", 
          "detail": "expected:<...gImport#doSomething([externallib].SomeType)> but was:<...gImport#doSomething([fr.inria].SomeType)>", 
          "isError": false, 
          "testMethod": "testAnotherMissingImport", 
          "testClass": "spoon.test.imports.ImportTest"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 27, 
          "numberRunning": 28, 
          "testClass": "spoon.test.imports.ImportTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/221992429", 
        "date": "Apr 14, 2017 9:23:15 AM", 
        "id": 221992429
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/218213030", 
        "date": "Apr 3, 2017 10:15:39 PM", 
        "id": 218213030
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/d25247f87b6bdb3aa917a90e70f1d1117424f153", 
        "sha": "d25247f87b6bdb3aa917a90e70f1d1117424f153", 
        "branchName": "master", 
        "date": "Apr 14, 2017 9:14:26 AM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/11d500fb62e40afef7e00af14a5cfadf4eb73011", 
        "sha": "11d500fb62e40afef7e00af14a5cfadf4eb73011", 
        "branchName": "master", 
        "date": "Apr 3, 2017 10:03:43 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-218213030-221992429", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 0, 
        "numberDeleted": 3
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_47", 
    "diff": "diff --git a/src/main/java/spoon/support/compiler/jdt/ReferenceBuilder.java b/src/main/java/spoon/support/compiler/jdt/ReferenceBuilder.java\nindex 58f0d86..a04d953 100644\n--- a/src/main/java/spoon/support/compiler/jdt/ReferenceBuilder.java\n+++ b/src/main/java/spoon/support/compiler/jdt/ReferenceBuilder.java\n@@ -641,6 +641,9 @@ public class ReferenceBuilder {\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n+\t\t\tif (binding.actualType() instanceof MissingTypeBinding) {\n+\t\t\t\tref = getTypeReference(binding.actualType());\n+\t\t\t}\n \n \t\t\tif (((ParameterizedTypeBinding) binding).arguments != null) {\n \t\t\t\tfor (TypeBinding b : ((ParameterizedTypeBinding) binding).arguments) {\n", 
    "projectMetrics": {
      "numberSourceFiles": 474, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 480, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 143795520, 
        "hostName": "local", 
        "totalMemory": 284164096, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 9, 2018 11:59:49 PM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/218213030/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            1, 
            0, 
            0, 
            1, 
            102
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 104
        }, 
        "testing": {
          "stepDurations": [
            271
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 271
        }, 
        "cloning": {
          "stepDurations": [
            23
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 23
        }
      }, 
      "reproductionDateBeginning": "Oct 9, 2018 11:48:23 PM", 
      "totalDuration": 678
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1057, 
        "numberRunning": 1058, 
        "numberFailing": 0, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "spoon.SpoonException", 
            "isError": true, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/225344336", 
      "failingClasses": [
        {
          "numberPassing": 31, 
          "numberRunning": 32, 
          "testClass": "spoon.test.generics.GenericsTest", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "spoon.SpoonException", 
          "testMethod": "testClassContextOnInnerClass", 
          "testClass": "spoon.test.generics.GenericsTest", 
          "detail": "Cannot resolve 1) type parameter <T>  of declarer public class Banana<T> {\n    abstract class Vitamins extends java.util.AbstractList<T> {    }\n}", 
          "isError": true
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/226528821", 
        "date": "Apr 27, 2017 9:17:25 PM", 
        "id": 226528821
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/225344336", 
        "date": "Apr 24, 2017 9:37:50 PM", 
        "id": 225344336
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/4c0ac3299569c30661ef249b9a30813fc1081b62", 
        "sha": "4c0ac3299569c30661ef249b9a30813fc1081b62", 
        "branchName": "master", 
        "date": "Apr 27, 2017 9:08:19 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/27fc8208c4da4145c687c7f4db057de7dbed50f6", 
        "sha": "27fc8208c4da4145c687c7f4db057de7dbed50f6", 
        "branchName": "master", 
        "date": "Apr 24, 2017 9:28:30 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-225344336-226528821", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 478, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 484, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 1, 
        "numberDeleted": 12
      }
    }, 
    "bugId": "Bears_48", 
    "diff": "diff --git a/src/main/java/spoon/support/visitor/ClassTypingContext.java b/src/main/java/spoon/support/visitor/ClassTypingContext.java\nindex ba9f1cc..8147a59 100644\n--- a/src/main/java/spoon/support/visitor/ClassTypingContext.java\n+++ b/src/main/java/spoon/support/visitor/ClassTypingContext.java\n@@ -373,7 +373,7 @@ public class ClassTypingContext implements GenericTypeAdapter {\n \t\t\t\t\tthrow new SpoonException(\"Cannot adapt type parameters of non type scope\");\r\n \t\t\t\t}\r\n \t\t\t\tCtType<?> typeDeclarer = (CtType<?>) declarer;\r\n-\t\t\t\tList<CtTypeReference<?>> actualTypeArguments = typeToArguments.get(typeDeclarer.getQualifiedName());\r\n+\t\t\t\tList<CtTypeReference<?>> actualTypeArguments = getActualTypeArguments(typeDeclarer.getQualifiedName());\r\n \t\t\t\tif (actualTypeArguments == null) {\r\n \t\t\t\t\t/*\r\n \t\t\t\t\t * the actualTypeArguments of this declarer cannot be resolved.\r\n@@ -399,6 +399,17 @@ public class ClassTypingContext implements GenericTypeAdapter {\n \t\treturn result;\r\n \t}\r\n \r\n+\tprivate List<CtTypeReference<?>> getActualTypeArguments(String qualifiedName) {\r\n+\t\tList<CtTypeReference<?>> actualTypeArguments = typeToArguments.get(qualifiedName);\r\n+\t\tif (actualTypeArguments != null) {\r\n+\t\t\treturn actualTypeArguments;\r\n+\t\t}\r\n+\t\tif (enclosingClassTypingContext != null) {\r\n+\t\t\treturn enclosingClassTypingContext.getActualTypeArguments(qualifiedName);\r\n+\t\t}\r\n+\t\treturn null;\r\n+\t}\r\n+\r\n \tprivate static CtTypeReference<?> getValue(List<CtTypeReference<?>> arguments, CtTypeParameter typeParam, CtFormalTypeDeclarer declarer) {\r\n \t\tif (declarer.getFormalCtTypeParameters().size() != arguments.size()) {\r\n \t\t\tthrow new SpoonException(\"Unexpected count of actual type arguments\");\r\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 151565960, 
        "hostName": "local", 
        "totalMemory": 377487360, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 9, 2018 11:54:40 PM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/225344336/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            1, 
            0, 
            0, 
            0, 
            100
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 101
        }, 
        "testing": {
          "stepDurations": [
            299
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 299
        }, 
        "cloning": {
          "stepDurations": [
            21
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 21
        }
      }, 
      "reproductionDateBeginning": "Oct 9, 2018 11:40:54 PM", 
      "totalDuration": 820
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1059, 
        "numberRunning": 1060, 
        "numberFailing": 0, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "java.lang.ArrayIndexOutOfBoundsException", 
            "isError": true, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/227073271", 
      "failureDetails": [
        {
          "failureName": "java.lang.ArrayIndexOutOfBoundsException", 
          "detail": "0", 
          "isError": true, 
          "testMethod": "annotationAddValue", 
          "testClass": "spoon.test.annotation.AnnotationTest"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 35, 
          "numberRunning": 36, 
          "testClass": "spoon.test.annotation.AnnotationTest", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/228362442", 
        "date": "May 3, 2017 4:37:12 PM", 
        "id": 228362442
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/227073271", 
        "date": "Apr 29, 2017 8:55:20 AM", 
        "id": 227073271
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/4dedea2d16b5d20c99d724461318f783c8631d3d", 
        "sha": "4dedea2d16b5d20c99d724461318f783c8631d3d", 
        "branchName": "master", 
        "date": "May 3, 2017 4:28:09 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/f993132633e7ecdd4145052b9eac0267659f9c6e", 
        "sha": "f993132633e7ecdd4145052b9eac0267659f9c6e", 
        "branchName": "master", 
        "date": "Apr 29, 2017 8:46:32 AM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-227073271-228362442", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 2, 
        "numberDeleted": 1
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_49", 
    "diff": "diff --git a/src/main/java/spoon/support/reflect/declaration/CtAnnotationImpl.java b/src/main/java/spoon/support/reflect/declaration/CtAnnotationImpl.java\nindex 9db6ff1..5c89ea0 100644\n--- a/src/main/java/spoon/support/reflect/declaration/CtAnnotationImpl.java\n+++ b/src/main/java/spoon/support/reflect/declaration/CtAnnotationImpl.java\n@@ -110,7 +110,8 @@ public class CtAnnotationImpl<A extends Annotation> extends CtExpressionImpl<A>\n \t\t\t// Value should be converted to a CtNewArray.\n \t\t\tres = getFactory().Core().createNewArray();\n \t\t\tObject[] values = (Object[]) value;\n-\t\t\tres.setType(getFactory().Type().createArrayReference(getFactory().Type().createReference(values[0].getClass())));\n+\n+\t\t\tres.setType(getFactory().Type().createArrayReference(getFactory().Type().createReference(value.getClass().getComponentType())));\n \t\t\tfor (Object o : values) {\n \t\t\t\t((CtNewArray) res).addElement(convertValueToExpression(o));\n \t\t\t}\n", 
    "projectMetrics": {
      "numberSourceFiles": 479, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 486, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 102126664, 
        "hostName": "local", 
        "totalMemory": 201850880, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 5:31:43 PM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/227073271/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            62
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 62
        }, 
        "testing": {
          "stepDurations": [
            141
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 141
        }, 
        "cloning": {
          "stepDurations": [
            18
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 18
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 5:25:03 PM", 
      "totalDuration": 393
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1059, 
        "numberRunning": 1060, 
        "numberFailing": 0, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "spoon.SpoonException", 
            "isError": true, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/228371032", 
      "failingClasses": [
        {
          "numberPassing": 13, 
          "numberRunning": 14, 
          "testClass": "spoon.test.api.APITest", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "spoon.SpoonException", 
          "testMethod": "testBasicAPIUsage", 
          "testClass": "spoon.test.api.APITest", 
          "detail": "java.lang.RuntimeException: inconsistent compilation unit: '/root/workspace/INRIA/spoon/228371032/src/test/resources/spoon/test/api/CommentedClass.java': declared types are []", 
          "isError": true
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/228407512", 
        "date": "May 3, 2017 6:24:13 PM", 
        "id": 228407512
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/228371032", 
        "date": "May 3, 2017 4:59:05 PM", 
        "id": 228371032
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/d3f34babbcfeea49de9d6175d581df3f8b491845", 
        "sha": "d3f34babbcfeea49de9d6175d581df3f8b491845", 
        "branchName": "master", 
        "date": "May 3, 2017 6:15:09 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/8850c5ba129601b4f38fb5a3017fe9dcbc918aa3", 
        "sha": "8850c5ba129601b4f38fb5a3017fe9dcbc918aa3", 
        "branchName": "master", 
        "date": "May 3, 2017 4:50:14 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-228371032-228407512", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 479, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 486, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 11, 
        "numberDeleted": 9
      }
    }, 
    "bugId": "Bears_50", 
    "diff": "diff --git a/src/main/java/spoon/support/compiler/jdt/JDTBasedSpoonCompiler.java b/src/main/java/spoon/support/compiler/jdt/JDTBasedSpoonCompiler.java\nindex 71a37d7..58ba2da 100644\n--- a/src/main/java/spoon/support/compiler/jdt/JDTBasedSpoonCompiler.java\n+++ b/src/main/java/spoon/support/compiler/jdt/JDTBasedSpoonCompiler.java\n@@ -415,16 +415,18 @@ public class JDTBasedSpoonCompiler implements spoon.SpoonModelBuilder {\n \t\tJDTTreeBuilder builder = new JDTTreeBuilder(factory);\r\n \t\tunitLoop:\r\n \t\tfor (CompilationUnitDeclaration unit : units) {\r\n-\t\t\tfinal String unitPath = new String(unit.getFileName());\r\n-\t\t\tfor (final CompilationUnitFilter cuf : compilationUnitFilters) {\r\n-\t\t\t\tif (cuf.exclude(unitPath)) {\r\n-\t\t\t\t\t// do not traverse this unit\r\n-\t\t\t\t\tcontinue unitLoop;\r\n+\t\t\tif (!unit.isEmpty()) {\r\n+\t\t\t\tfinal String unitPath = new String(unit.getFileName());\r\n+\t\t\t\tfor (final CompilationUnitFilter cuf : compilationUnitFilters) {\r\n+\t\t\t\t\tif (cuf.exclude(unitPath)) {\r\n+\t\t\t\t\t\t// do not traverse this unit\r\n+\t\t\t\t\t\tcontinue unitLoop;\r\n+\t\t\t\t\t}\r\n+\t\t\t\t}\r\n+\t\t\t\tunit.traverse(builder, unit.scope);\r\n+\t\t\t\tif (getFactory().getEnvironment().isCommentsEnabled()) {\r\n+\t\t\t\t\tnew JDTCommentBuilder(unit, factory).build();\r\n \t\t\t\t}\r\n-\t\t\t}\r\n-\t\t\tunit.traverse(builder, unit.scope);\r\n-\t\t\tif (getFactory().getEnvironment().isCommentsEnabled()) {\r\n-\t\t\t\tnew JDTCommentBuilder(unit, factory).build();\r\n \t\t\t}\r\n \t\t}\r\n \t}\r\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 146372032, 
        "hostName": "local", 
        "totalMemory": 256901120, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 5:21:37 PM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/228371032/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            92
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 92
        }, 
        "testing": {
          "stepDurations": [
            141
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 141
        }, 
        "cloning": {
          "stepDurations": [
            19
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 19
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 5:14:30 PM", 
      "totalDuration": 422
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1060, 
        "numberRunning": 1061, 
        "numberFailing": 0, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "spoon.SpoonException", 
            "isError": true, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/228407512", 
      "failureDetails": [
        {
          "failureName": "spoon.SpoonException", 
          "detail": "Cannot resolve type erasure of the type parameter reference, which is not able to found it's declaration.", 
          "isError": true, 
          "testMethod": "testGetGenericMethodFromReferene", 
          "testClass": "spoon.test.methodreference.MethodReferenceTest"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 10, 
          "numberRunning": 11, 
          "testClass": "spoon.test.methodreference.MethodReferenceTest", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/228634633", 
        "date": "May 4, 2017 9:54:45 AM", 
        "id": 228634633
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/228407512", 
        "date": "May 3, 2017 6:24:13 PM", 
        "id": 228407512
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/caafc7ec841dd072fc0478d328ab5bd94eb6fdbe", 
        "sha": "caafc7ec841dd072fc0478d328ab5bd94eb6fdbe", 
        "branchName": "master", 
        "date": "May 4, 2017 9:44:59 AM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/d3f34babbcfeea49de9d6175d581df3f8b491845", 
        "sha": "d3f34babbcfeea49de9d6175d581df3f8b491845", 
        "branchName": "master", 
        "date": "May 3, 2017 6:15:09 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-228407512-228634633", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 2, 
        "numberDeleted": 17
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_51", 
    "diff": "diff --git a/src/main/java/spoon/support/reflect/reference/CtTypeParameterReferenceImpl.java b/src/main/java/spoon/support/reflect/reference/CtTypeParameterReferenceImpl.java\nindex 692202a..3267dd6 100644\n--- a/src/main/java/spoon/support/reflect/reference/CtTypeParameterReferenceImpl.java\n+++ b/src/main/java/spoon/support/reflect/reference/CtTypeParameterReferenceImpl.java\n@@ -19,9 +19,11 @@ package spoon.support.reflect.reference;\n import spoon.SpoonException;\n import spoon.reflect.declaration.CtElement;\n import spoon.reflect.declaration.CtFormalTypeDeclarer;\n+import spoon.reflect.declaration.CtMethod;\n import spoon.reflect.declaration.CtType;\n import spoon.reflect.declaration.CtTypeParameter;\n import spoon.reflect.reference.CtActualTypeContainer;\n+import spoon.reflect.reference.CtExecutableReference;\n import spoon.reflect.reference.CtIntersectionTypeReference;\n import spoon.reflect.reference.CtTypeParameterReference;\n import spoon.reflect.reference.CtTypeReference;\n@@ -173,15 +175,28 @@ public class CtTypeParameterReferenceImpl extends CtTypeReferenceImpl<Object> im\n \t\t\treturn null;\n \t\t}\n \n+\t\tCtElement e = this;\n+\t\tCtElement parent = getParent();\n+\t\tif (parent instanceof CtExecutableReference) {\n+\t\t\tCtElement parent2 = parent.getParent();\n+\t\t\tif (parent2 instanceof CtMethod) {\n+\t\t\t\te = parent2;\n+\t\t\t} else {\n+\t\t\t\te = ((CtExecutableReference<?>) parent).getDeclaringType().getTypeDeclaration();\n+\t\t\t}\n+\t\t} else {\n+\t\t\te = e.getParent(CtFormalTypeDeclarer.class);\n+\t\t}\n+\n \t\t// case #1: we're a type of a method parameter, a local variable, ...\n \t\t// the strategy is to look in the parents\n \t\t// collecting all formal type declarers of the hierarchy\n-\t\tCtElement e = this;\n-\t\twhile ((e = e.getParent(CtFormalTypeDeclarer.class)) != null) {\n+\t\twhile (e != null) {\n \t\t\tCtTypeParameter result = findTypeParamDeclaration((CtFormalTypeDeclarer) e, this.getSimpleName());\n \t\t\tif (result != null) {\n \t\t\t\treturn result;\n \t\t\t}\n+\t\t\te = e.getParent(CtFormalTypeDeclarer.class);\n \t\t}\n \t\treturn null;\n \t}\n", 
    "projectMetrics": {
      "numberSourceFiles": 479, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 487, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 164235480, 
        "hostName": "local", 
        "totalMemory": 249561088, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 5:13:52 PM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/228407512/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            1, 
            0, 
            0, 
            0, 
            83
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 84
        }, 
        "testing": {
          "stepDurations": [
            209
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 209
        }, 
        "cloning": {
          "stepDurations": [
            18
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 18
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 5:04:09 PM", 
      "totalDuration": 576
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1061, 
        "numberRunning": 1062, 
        "numberFailing": 1, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/228634633", 
      "failingClasses": [
        {
          "numberPassing": 28, 
          "numberRunning": 29, 
          "testClass": "spoon.test.imports.ImportTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "java.lang.AssertionError", 
          "testMethod": "testSuperInheritanceHierarchyFunctionNoClasspath", 
          "testClass": "spoon.test.imports.ImportTest", 
          "detail": "expected:<2> but was:<1>", 
          "isError": false
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/228649848", 
        "date": "May 4, 2017 10:57:12 AM", 
        "id": 228649848
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/228634633", 
        "date": "May 4, 2017 9:54:45 AM", 
        "id": 228634633
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/8ca2213e50dbe82b0cbffc07a4d4aef573dcd06e", 
        "sha": "8ca2213e50dbe82b0cbffc07a4d4aef573dcd06e", 
        "branchName": "master", 
        "date": "May 4, 2017 10:48:08 AM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/caafc7ec841dd072fc0478d328ab5bd94eb6fdbe", 
        "sha": "caafc7ec841dd072fc0478d328ab5bd94eb6fdbe", 
        "branchName": "master", 
        "date": "May 4, 2017 9:44:59 AM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-228634633-228649848", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 479, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 487, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 2, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 57, 
        "numberDeleted": 73
      }
    }, 
    "bugId": "Bears_52", 
    "diff": "diff --git a/src/main/java/spoon/reflect/visitor/filter/SuperInheritanceHierarchyFunction.java b/src/main/java/spoon/reflect/visitor/filter/SuperInheritanceHierarchyFunction.java\nindex 2aa981b..15e59d4 100644\n--- a/src/main/java/spoon/reflect/visitor/filter/SuperInheritanceHierarchyFunction.java\n+++ b/src/main/java/spoon/reflect/visitor/filter/SuperInheritanceHierarchyFunction.java\n@@ -56,6 +56,47 @@ public class SuperInheritanceHierarchyFunction implements CtConsumableFunction<C\n \tprivate CtScannerListener listener;\r\n \tprivate boolean returnTypeReferences = false;\r\n \r\n+\t/**\r\n+\t * Super inheritance hierarchy scanning listener.\r\n+\t * Use it instead of {@link CtScannerListener}\r\n+\t * if you need to know whether visited type reference is class or interface\r\n+\t */\r\n+\tprivate static class Listener implements CtScannerListener {\r\n+\r\n+\t\t/**\r\n+\t\t * Called before the scanner enters an type\r\n+\t\t *\r\n+\t\t * @param typeRef the type reference to be scanned.\r\n+\t\t * @param isClass true if type reference refers to class, false if it is an interface\r\n+\t\t * @return a {@link ScanningMode} that drives how the scanner processes this element and its children.\r\n+\t\t * For instance, returning {@link ScanningMode#SKIP_ALL} causes that element and all children to be skipped and {@link #exit(CtElement)} are be NOT called for that element.\r\n+\t\t */\r\n+\t\tpublic ScanningMode enter(CtTypeReference<?> typeRef, boolean isClass) {\r\n+\t\t\treturn enter((CtElement) typeRef);\r\n+\t\t}\r\n+\r\n+\t\t/**\r\n+\t\t * This method is called after the element and all its children have been visited.\r\n+\t\t * This method is NOT called if an exception is thrown in {@link #enter(CtElement)} or during the scanning of the element or any of its children element.\r\n+\t\t * This method is NOT called for an element for which {@link #enter(CtElement)} returned {@link ScanningMode#SKIP_ALL}.\r\n+\t\t *\r\n+\t\t * @param typeRef the type reference that has just been scanned.\r\n+\t\t * @param isClass true if type reference refers to class, false if it is an interface\r\n+\t\t */\r\n+\t\tpublic void exit(CtTypeReference<?> typeRef, boolean isClass) {\r\n+\t\t\texit((CtElement) typeRef);\r\n+\t\t}\r\n+\r\n+\t\t@Override\r\n+\t\tpublic ScanningMode enter(CtElement element) {\r\n+\t\t\treturn ScanningMode.NORMAL;\r\n+\t\t}\r\n+\r\n+\t\t@Override\r\n+\t\tpublic void exit(CtElement element) {\r\n+\t\t}\r\n+\t}\r\n+\r\n \t/**\r\n \t * The mapping function created using this constructor\r\n \t * will visit each super class and super interface\r\n@@ -87,7 +128,7 @@ public class SuperInheritanceHierarchyFunction implements CtConsumableFunction<C\n \t * which is used to assure that each interface is visited only once.\r\n \t * It can be extended to implement more powerful listener\r\n \t */\r\n-\tpublic static class DistinctTypeListener implements CtScannerListener {\r\n+\tpublic static class DistinctTypeListener extends Listener {\r\n \t\tSet<String> visitedSet;\r\n \r\n \t\tpublic DistinctTypeListener(Set<String> visitedSet) {\r\n@@ -165,12 +206,30 @@ public class SuperInheritanceHierarchyFunction implements CtConsumableFunction<C\n \t@Override\r\n \tpublic void apply(CtTypeInformation input, CtConsumer<Object> outputConsumer) {\r\n \t\tCtTypeReference<?> typeRef;\r\n+\t\tCtType<?> type;\r\n+\t\t//detect whether input is a class or something else (e.g. interface)\r\n+\t\tboolean isClass;\r\n \t\tif (input instanceof CtType) {\r\n-\t\t\ttypeRef = ((CtType<?>) input).getReference();\r\n+\t\t\ttype = (CtType<?>) input;\r\n+\t\t\ttypeRef = type.getReference();\r\n \t\t} else {\r\n \t\t\ttypeRef = (CtTypeReference<?>) input;\r\n+\t\t\ttry {\r\n+\t\t\t\ttype = typeRef.getTypeDeclaration();\r\n+\t\t\t} catch (SpoonClassNotFoundException e) {\r\n+\t\t\t\tif (typeRef.getFactory().getEnvironment().getNoClasspath() == false) {\r\n+\t\t\t\t\tthrow e;\r\n+\t\t\t\t}\r\n+\t\t\t\ttype = null;\r\n+\t\t\t}\r\n \t\t}\r\n-\t\tScanningMode mode = enter(typeRef);\r\n+\t\t//if the type is unknown, than we expect it is interface, otherwise we would visit java.lang.Object too, even for interfaces\r\n+\t\tisClass = type == null ? false : (type instanceof CtClass);\r\n+\t\tif (isClass == false && includingInterfaces == false) {\r\n+\t\t\t//the input is interface, but this scanner should visit only interfaces. Finish\r\n+\t\t\treturn;\r\n+\t\t}\r\n+\t\tScanningMode mode = enter(typeRef, isClass);\r\n \t\tif (mode == SKIP_ALL) {\r\n \t\t\t//listener decided to not visit that input. Finish\r\n \t\t\treturn;\r\n@@ -182,14 +241,20 @@ public class SuperInheritanceHierarchyFunction implements CtConsumableFunction<C\n \t\t\t}\r\n \t\t}\r\n \t\tif (mode == NORMAL) {\r\n-\t\t\tvisitSuperClasses(typeRef, outputConsumer, includingInterfaces);\r\n+\t\t\tif (isClass == false) {\r\n+\t\t\t\tvisitSuperInterfaces(typeRef, outputConsumer);\r\n+\t\t\t} else {\r\n+\t\t\t\t//call visitSuperClasses only for input of type class. The contract of visitSuperClasses requires that\r\n+\t\t\t\tvisitSuperClasses(typeRef, outputConsumer, includingInterfaces);\r\n+\t\t\t}\r\n \t\t}\r\n-\t\texit(typeRef);\r\n+\t\texit(typeRef, isClass);\r\n \t}\r\n \r\n \t/**\r\n \t * calls `outputConsumer.accept(superClass)` for all super classes of superType.\r\n \t *\r\n+\t * @param superTypeRef the reference to a class. This method is called only for classes. Never for interface\r\n \t * @param includingInterfaces if true then all superInterfaces of each type are sent to `outputConsumer` too.\r\n \t */\r\n \tprotected void visitSuperClasses(CtTypeReference<?> superTypeRef, CtConsumer<Object> outputConsumer, boolean includingInterfaces) {\r\n@@ -205,23 +270,11 @@ public class SuperInheritanceHierarchyFunction implements CtConsumableFunction<C\n \t\t}\r\n \t\tCtTypeReference<?> superClassRef = superTypeRef.getSuperclass();\r\n \t\tif (superClassRef == null) {\r\n-\t\t\tCtType<?> superType;\r\n-\t\t\ttry {\r\n-\t\t\t\tsuperType = superTypeRef.getTypeDeclaration();\r\n-\t\t\t} catch (SpoonClassNotFoundException e) {\r\n-\t\t\t\tif (failOnClassNotFound) {\r\n-\t\t\t\t\tthrow e;\r\n-\t\t\t\t}\r\n-\t\t\t\treturn;\r\n-\t\t\t}\r\n-\t\t\tif (superType instanceof CtClass) {\r\n-\t\t\t\t// only CtCLasses extend object, so visit Object too\r\n-\t\t\t\tsuperClassRef = superTypeRef.getFactory().Type().OBJECT;\r\n-\t\t\t} else {\r\n-\t\t\t\treturn;\r\n-\t\t\t}\r\n+\t\t\t//only CtClasses extend object,\r\n+\t\t\t//this method is called only for classes (not for interfaces) so we know we can visit java.lang.Object now too\r\n+\t\t\tsuperClassRef = superTypeRef.getFactory().Type().OBJECT;\r\n \t\t}\r\n-\t\tScanningMode mode = enter(superClassRef);\r\n+\t\tScanningMode mode = enter(superClassRef, false);\r\n \t\tif (mode == SKIP_ALL) {\r\n \t\t\treturn;\r\n \t\t}\r\n@@ -229,7 +282,7 @@ public class SuperInheritanceHierarchyFunction implements CtConsumableFunction<C\n \t\tif (mode == NORMAL && query.isTerminated() == false) {\r\n \t\t\tvisitSuperClasses(superClassRef, outputConsumer, includingInterfaces);\r\n \t\t}\r\n-\t\texit(superClassRef);\r\n+\t\texit(superClassRef, false);\r\n \t}\r\n \r\n \t/**\r\n@@ -248,7 +301,7 @@ public class SuperInheritanceHierarchyFunction implements CtConsumableFunction<C\n \t\t\treturn;\r\n \t\t}\r\n \t\tfor (CtTypeReference<?> ifaceRef : superInterfaces) {\r\n-\t\t\tScanningMode mode = enter(ifaceRef);\r\n+\t\t\tScanningMode mode = enter(ifaceRef, true);\r\n \t\t\tif (mode == SKIP_ALL) {\r\n \t\t\t\tcontinue;\r\n \t\t\t}\r\n@@ -256,7 +309,7 @@ public class SuperInheritanceHierarchyFunction implements CtConsumableFunction<C\n \t\t\tif (mode == NORMAL && query.isTerminated() == false) {\r\n \t\t\t\tvisitSuperInterfaces(ifaceRef, outputConsumer);\r\n \t\t\t}\r\n-\t\t\texit(ifaceRef);\r\n+\t\t\texit(ifaceRef, true);\r\n \t\t\tif (query.isTerminated()) {\r\n \t\t\t\treturn;\r\n \t\t\t}\r\n@@ -268,13 +321,24 @@ public class SuperInheritanceHierarchyFunction implements CtConsumableFunction<C\n \t\tthis.query = query;\r\n \t}\r\n \r\n-\tprivate ScanningMode enter(CtTypeReference<?> type) {\r\n-\t\treturn listener == null ? NORMAL : listener.enter(type);\r\n+\tprivate ScanningMode enter(CtTypeReference<?> type, boolean isClass) {\r\n+\t\tif (listener == null) {\r\n+\t\t\treturn NORMAL;\r\n+\t\t}\r\n+\t\tif (listener instanceof Listener) {\r\n+\t\t\tListener typeListener = (Listener) listener;\r\n+\t\t\treturn typeListener.enter(type, isClass);\r\n+\t\t}\r\n+\t\treturn listener.enter(type);\r\n \t}\r\n \r\n-\tprivate void exit(CtTypeReference<?> type) {\r\n+\tprivate void exit(CtTypeReference<?> type, boolean isClass) {\r\n \t\tif (listener != null) {\r\n-\t\t\tlistener.exit(type);\r\n+\t\t\tif (listener instanceof Listener) {\r\n+\t\t\t\t((Listener) listener).exit(type, isClass);\r\n+\t\t\t} else {\r\n+\t\t\t\tlistener.exit(type);\r\n+\t\t\t}\r\n \t\t}\r\n \t}\r\n \r\ndiff --git a/src/main/java/spoon/support/visitor/ClassTypingContext.java b/src/main/java/spoon/support/visitor/ClassTypingContext.java\nindex e876c5f..f382483 100644\n--- a/src/main/java/spoon/support/visitor/ClassTypingContext.java\n+++ b/src/main/java/spoon/support/visitor/ClassTypingContext.java\n@@ -24,7 +24,6 @@ import java.util.Map;\n import java.util.Set;\r\n \r\n import spoon.SpoonException;\r\n-import spoon.reflect.declaration.CtClass;\r\n import spoon.reflect.declaration.CtElement;\r\n import spoon.reflect.declaration.CtFormalTypeDeclarer;\r\n import spoon.reflect.declaration.CtType;\r\n@@ -318,14 +317,13 @@ public class ClassTypingContext extends AbstractTypingContext {\n \t\t\tsuper(visitedSet);\r\n \t\t}\r\n \t\t@Override\r\n-\t\tpublic ScanningMode enter(CtElement element) {\r\n-\t\t\tScanningMode mode = super.enter(element);\r\n+\t\tpublic ScanningMode enter(CtTypeReference<?> typeRef, boolean isClass) {\r\n+\t\t\tScanningMode mode = super.enter(typeRef);\r\n \t\t\tif (mode == ScanningMode.SKIP_ALL) {\r\n \t\t\t\t//this interface was already visited. Do not visit it again\r\n \t\t\t\treturn mode;\r\n \t\t\t}\r\n-\t\t\tCtType<?> type = ((CtTypeReference<?>) element).getTypeDeclaration();\r\n-\t\t\tif (type instanceof CtClass) {\r\n+\t\t\tif (isClass) {\r\n \t\t\t\tif (foundArguments != null) {\r\n \t\t\t\t\t//we have found result then we can finish before entering super class. All interfaces of found type should be still visited\r\n \t\t\t\t\t//skip before super class (and it's interfaces) of found type is visited\r\n@@ -336,7 +334,7 @@ public class ClassTypingContext extends AbstractTypingContext {\n \t\t\t\t * Remember that, so we can continue at this place if needed.\r\n \t\t\t\t * If we enter class, then this listener assures that that class and all it's not yet visited interfaces are visited\r\n \t\t\t\t */\r\n-\t\t\t\tlastResolvedSuperclass = type;\r\n+\t\t\t\tlastResolvedSuperclass = typeRef;\r\n \t\t\t}\r\n \t\t\t//this type was not visited yet. Visit it normally\r\n \t\t\treturn ScanningMode.NORMAL;\r\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 147948512, 
        "hostName": "local", 
        "totalMemory": 251658240, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 5:13:47 PM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/228634633/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            86
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 86
        }, 
        "testing": {
          "stepDurations": [
            209
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 209
        }, 
        "cloning": {
          "stepDurations": [
            18
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 18
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 5:04:06 PM", 
      "totalDuration": 575
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1065, 
        "numberRunning": 1067, 
        "numberFailing": 2, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "org.junit.ComparisonFailure", 
            "isError": false, 
            "occurrences": 1
          }, 
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/232723487", 
      "failureDetails": [
        {
          "failureName": "org.junit.ComparisonFailure", 
          "detail": "expected:<[spoon.test.same.]B> but was:<[]B>", 
          "isError": false, 
          "testMethod": "testSingleExcludeWithoutFilter", 
          "testClass": "spoon.test.filters.CUFilterTest"
        }, 
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "\nExpected: is \"com.cristal.ircica.applicationcolis.userinterface.fragments.CompletableFragment\"\n     but: was \"CompletableFragment\"", 
          "isError": false, 
          "testMethod": "testSpoonShouldInferImplicitPackageInNoClasspath", 
          "testClass": "spoon.test.ctClass.CtClassTest"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 4, 
          "numberRunning": 5, 
          "testClass": "spoon.test.ctClass.CtClassTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }, 
        {
          "numberPassing": 2, 
          "numberRunning": 3, 
          "testClass": "spoon.test.filters.CUFilterTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/232809734", 
        "date": "May 16, 2017 2:50:58 PM", 
        "id": 232809734
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/232723487", 
        "date": "May 16, 2017 10:00:19 AM", 
        "id": 232723487
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/71554f9048ff5fb4bc30acafecae71a13a5ba356", 
        "sha": "71554f9048ff5fb4bc30acafecae71a13a5ba356", 
        "branchName": "master", 
        "date": "May 16, 2017 2:42:58 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/de8682d6032f9bcc2828679a82c41d1c4af7c9e9", 
        "sha": "de8682d6032f9bcc2828679a82c41d1c4af7c9e9", 
        "branchName": "master", 
        "date": "May 16, 2017 9:52:23 AM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-232723487-232809734", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 2, 
        "numberDeleted": 1
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_53", 
    "diff": "diff --git a/src/main/java/spoon/support/compiler/jdt/ReferenceBuilder.java b/src/main/java/spoon/support/compiler/jdt/ReferenceBuilder.java\nindex a04d953..b245a2c 100644\n--- a/src/main/java/spoon/support/compiler/jdt/ReferenceBuilder.java\n+++ b/src/main/java/spoon/support/compiler/jdt/ReferenceBuilder.java\n@@ -913,7 +913,8 @@ public class ReferenceBuilder {\n \t\t} else if (declaring instanceof CtTypeReference) {\n \t\t\tref.setDeclaringType((CtTypeReference) declaring);\n \t\t} else if (declaring == null) {\n-\t\t\tref.setPackage(jdtTreeBuilder.getFactory().Package().topLevel());\n+\t\t\t// in that case we consider the package should be the same as the current one. Fix #1293\n+\t\t\tref.setPackage(jdtTreeBuilder.getContextBuilder().compilationUnitSpoon.getDeclaredPackage().getReference());\n \t\t} else {\n \t\t\tthrow new AssertionError(\"unexpected declaring type: \" + declaring.getClass() + \" of \" + declaring);\n \t\t}\n", 
    "projectMetrics": {
      "numberSourceFiles": 479, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 493, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 146749392, 
        "hostName": "local", 
        "totalMemory": 235929600, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 4:52:46 PM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/232723487/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            62
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 62
        }, 
        "testing": {
          "stepDurations": [
            139
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 139
        }, 
        "cloning": {
          "stepDurations": [
            19
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 19
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 4:46:15 PM", 
      "totalDuration": 386
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1078, 
        "numberRunning": 1079, 
        "numberFailing": 0, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "spoon.compiler.ModelBuildingException", 
            "isError": true, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/234113323", 
      "failingClasses": [
        {
          "numberPassing": 5, 
          "numberRunning": 6, 
          "testClass": "spoon.test.ctClass.CtClassTest", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "spoon.compiler.ModelBuildingException", 
          "testMethod": "testDefaultConstructorAreOk", 
          "testClass": "spoon.test.ctClass.CtClassTest", 
          "detail": "The constructor BooleanArrays() is not visible at /root/workspace/INRIA/spoon/234113323/BooleanArraysBaseTest.java:14", 
          "isError": true
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/234113988", 
        "date": "May 19, 2017 8:23:16 PM", 
        "id": 234113988
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/234113323", 
        "date": "May 19, 2017 8:20:50 PM", 
        "id": 234113323
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/014167880a6e1c523bb27614a02a298ff12eade7", 
        "sha": "014167880a6e1c523bb27614a02a298ff12eade7", 
        "branchName": "master", 
        "date": "May 19, 2017 8:14:44 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/9b69b9c3611a632324d3ae00e658b0280dcc734b", 
        "sha": "9b69b9c3611a632324d3ae00e658b0280dcc734b", 
        "branchName": "master", 
        "date": "May 19, 2017 8:12:28 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-234113323-234113988", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 482, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 510, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 2, 
        "numberDeleted": 16
      }
    }, 
    "bugId": "Bears_54", 
    "diff": "diff --git a/src/main/java/spoon/reflect/visitor/ImportScannerImpl.java b/src/main/java/spoon/reflect/visitor/ImportScannerImpl.java\nindex 564d67f..41edede 100644\n--- a/src/main/java/spoon/reflect/visitor/ImportScannerImpl.java\n+++ b/src/main/java/spoon/reflect/visitor/ImportScannerImpl.java\n@@ -73,6 +73,7 @@ public class ImportScannerImpl extends CtScanner implements ImportScanner {\n \tprotected CtTypeReference<?> targetType;\n \tprivate Map<String, Boolean> namesPresentInJavaLang = new HashMap<>();\n \tprivate Set<String> fieldAndMethodsNames = new HashSet<String>();\n+\tprivate Set<CtTypeReference> exploredReferences = new HashSet<>(); // list of explored references\n \n \t@Override\n \tpublic <T> void visitCtFieldRead(CtFieldRead<T> fieldRead) {\n@@ -248,10 +249,20 @@ public class ImportScannerImpl extends CtScanner implements ImportScanner {\n \t\t}\n \t}\n \n+\tprivate boolean isThereAnotherClassWithSameNameInAnotherPackage(CtTypeReference<?> ref) {\n+\t\tfor (CtTypeReference typeref : this.exploredReferences) {\n+\t\t\tif (typeref.getSimpleName().equals(ref.getSimpleName()) && !typeref.getQualifiedName().equals(ref.getQualifiedName())) {\n+\t\t\t\treturn true;\n+\t\t\t}\n+\t\t}\n+\t\treturn false;\n+\t}\n+\n \t/**\n \t * Adds a type to the classImports.\n \t */\n \tprotected boolean addClassImport(CtTypeReference<?> ref) {\n+\t\tthis.exploredReferences.add(ref);\n \t\tif (ref == null) {\n \t\t\treturn false;\n \t\t}\n@@ -279,6 +290,10 @@ public class ImportScannerImpl extends CtScanner implements ImportScanner {\n \t\t\treturn false;\n \t\t}\n \n+\t\tif (this.isThereAnotherClassWithSameNameInAnotherPackage(ref)) {\n+\t\t\treturn false;\n+\t\t}\n+\n \t\t// we want to be sure that we are not importing a class because a static field or method we already imported\n \t\t// moreover we make exception for same package classes to avoid problems in FQN mode\n \n@@ -346,8 +361,7 @@ public class ImportScannerImpl extends CtScanner implements ImportScanner {\n \t\t\t\t}\n \t\t\t}\n \t\t}\n-\t\t//note: we must add the type refs from the same package too, to assure that isImported(typeRef) returns true for them\n-\t\t//these type refs are removed in #getClassImports()\n+\n \t\tclassImports.put(ref.getSimpleName(), ref);\n \t\treturn true;\n \t}\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 159666320, 
        "hostName": "local", 
        "totalMemory": 251658240, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 4:32:39 PM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/234113323/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            74
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 74
        }, 
        "testing": {
          "stepDurations": [
            203
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 203
        }, 
        "cloning": {
          "stepDurations": [
            18
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 18
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 4:23:25 PM", 
      "totalDuration": 547
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1074, 
        "numberRunning": 1082, 
        "numberFailing": 8, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 8
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/234612953", 
      "failureDetails": [
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "The java file should contain import for Launcher", 
          "isError": false, 
          "testMethod": "testNoFQNWhenUsedInTryCatch", 
          "testClass": "spoon.test.variable.AccessFullyQualifiedFieldTest"
        }, 
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "Can't compile spooned-javalang", 
          "isError": false, 
          "testMethod": "testJavaLangIsConsideredAsImported", 
          "testClass": "spoon.test.imports.ImportTest"
        }, 
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "Spoon ignores the arguments of CtInvocations expected:<3> but was:<1>", 
          "isError": false, 
          "testMethod": "testSpoonWithImports", 
          "testClass": "spoon.test.imports.ImportTest"
        }, 
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "expected:<4> but was:<2>", 
          "isError": false, 
          "testMethod": "testComputeImportsInClass", 
          "testClass": "spoon.test.imports.ImportScannerTest"
        }, 
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "The java file should contain import for Launcher", 
          "isError": false, 
          "testMethod": "testNoFQNWhenUsedInLoop", 
          "testClass": "spoon.test.variable.AccessFullyQualifiedFieldTest"
        }, 
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "expected:<3> but was:<2>", 
          "isError": false, 
          "testMethod": "testNotImportExecutableType", 
          "testClass": "spoon.test.imports.ImportTest"
        }, 
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "The java file should contain import for Launcher", 
          "isError": false, 
          "testMethod": "testNoFQNWhenShadowedByLocalVariable", 
          "testClass": "spoon.test.variable.AccessFullyQualifiedFieldTest"
        }, 
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "The java file should contain import for Launcher", 
          "isError": false, 
          "testMethod": "testNoFQNWhenShadowedByField", 
          "testClass": "spoon.test.variable.AccessFullyQualifiedFieldTest"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 5, 
          "numberRunning": 9, 
          "testClass": "spoon.test.variable.AccessFullyQualifiedFieldTest", 
          "numberFailing": 4, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }, 
        {
          "numberPassing": 27, 
          "numberRunning": 30, 
          "testClass": "spoon.test.imports.ImportTest", 
          "numberFailing": 3, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }, 
        {
          "numberPassing": 3, 
          "numberRunning": 4, 
          "testClass": "spoon.test.imports.ImportScannerTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/235302726", 
        "date": "May 23, 2017 6:51:13 PM", 
        "id": 235302726
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/234612953", 
        "date": "May 21, 2017 10:46:37 PM", 
        "id": 234612953
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/08151bda54b23451d85534763a4ec706708c2e53", 
        "sha": "08151bda54b23451d85534763a4ec706708c2e53", 
        "branchName": "master", 
        "date": "May 23, 2017 6:43:20 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/4a41286b73ef0230f3df61a921db0306195ca31e", 
        "sha": "4a41286b73ef0230f3df61a921db0306195ca31e", 
        "branchName": "master", 
        "date": "May 21, 2017 10:38:30 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-234612953-235302726", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 3, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 64, 
        "numberDeleted": 42
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_55", 
    "diff": "diff --git a/src/main/java/spoon/reflect/visitor/ImportScannerImpl.java b/src/main/java/spoon/reflect/visitor/ImportScannerImpl.java\nindex 41edede..9f46670 100644\n--- a/src/main/java/spoon/reflect/visitor/ImportScannerImpl.java\n+++ b/src/main/java/spoon/reflect/visitor/ImportScannerImpl.java\n@@ -22,6 +22,7 @@ import spoon.reflect.code.CtFieldAccess;\n import spoon.reflect.code.CtFieldRead;\n import spoon.reflect.code.CtFieldWrite;\n import spoon.reflect.code.CtInvocation;\n+import spoon.reflect.code.CtLiteral;\n import spoon.reflect.declaration.CtAnnotationType;\n import spoon.reflect.declaration.CtClass;\n import spoon.reflect.declaration.CtElement;\n@@ -54,6 +55,7 @@ import java.util.LinkedList;\n import java.util.List;\n import java.util.Map;\n import java.util.Set;\n+import java.util.StringTokenizer;\n import java.util.TreeMap;\n \n /**\n@@ -100,10 +102,9 @@ public class ImportScannerImpl extends CtScanner implements ImportScanner {\n \t@Override\n \tpublic <T> void visitCtFieldReference(CtFieldReference<T> reference) {\n \t\tenter(reference);\n+\t\tscan(reference.getDeclaringType());\n \t\tif (reference.isStatic()) {\n-\t\t\tif (!addFieldImport(reference)) {\n-\t\t\t\tscan(reference.getDeclaringType());\n-\t\t\t}\n+\t\t\taddFieldImport(reference);\n \t\t} else {\n \t\t\tscan(reference.getDeclaringType());\n \t\t}\n@@ -137,10 +138,15 @@ public class ImportScannerImpl extends CtScanner implements ImportScanner {\n \t@Override\n \tpublic <T> void visitCtTypeReference(CtTypeReference<T> reference) {\n \t\tif (!(reference instanceof CtArrayTypeReference)) {\n+\t\t\tCtTypeReference typeReference;\n \t\t\tif (reference.getDeclaringType() == null) {\n-\t\t\t\taddClassImport(reference);\n+\t\t\t\ttypeReference = reference;\n \t\t\t} else {\n-\t\t\t\taddClassImport(reference.getAccessType());\n+\t\t\t\ttypeReference = reference.getAccessType();\n+\t\t\t}\n+\n+\t\t\tif (!this.isTypeInCollision(typeReference, false)) {\n+\t\t\t\tthis.addClassImport(typeReference);\n \t\t\t}\n \t\t}\n \t\tsuper.visitCtTypeReference(reference);\n@@ -277,14 +283,7 @@ public class ImportScannerImpl extends CtScanner implements ImportScanner {\n \t\tif (ref.getPackage() == null || ref.getPackage().isUnnamedPackage()) {\n \t\t\treturn false;\n \t\t}\n-\t\tif (ref.getPackage().getSimpleName().equals(\"java.lang\")) {\n-\t\t\tif (classNamePresentInJavaLang(ref)) {\n-\t\t\t\t// Don't import class with names clashing with some classes present in java.lang,\n-\t\t\t\t// because it leads to undecidability and compilation errors. I. e. always leave\n-\t\t\t\t// com.mycompany.String fully-qualified.\n-\t\t\t\treturn false;\n-\t\t\t}\n-\t\t}\n+\n \t\tif (targetType != null && targetType.canAccess(ref) == false) {\n \t\t\t//ref type is not visible in targetType we must not add import for it, java compiler would fail on that.\n \t\t\treturn false;\n@@ -560,7 +559,6 @@ public class ImportScannerImpl extends CtScanner implements ImportScanner {\n \n \t/**\n \t * Test if the reference can be imported, i.e. test if the importation could lead to a collision.\n-\t * In FQN mode, it only tests the first package name: if a collision occurs with this first one, it should be imported.\n \t * @param ref\n \t * @return true if the ref should be imported.\n \t */\n@@ -577,6 +575,12 @@ public class ImportScannerImpl extends CtScanner implements ImportScanner {\n \t\t\t\tparent = ref;\n \t\t\t}\n \n+\t\t\t// in that case we are trying to import a type because of a literal we are scanning\n+\t\t\t// i.e. a string, an int, etc.\n+\t\t\tif (parent instanceof CtLiteral) {\n+\t\t\t\treturn false;\n+\t\t\t}\n+\n \t\t\tSet<String> localVariablesOfBlock = new HashSet<>();\n \n \t\t\tif (parent instanceof CtField) {\n@@ -588,8 +592,13 @@ public class ImportScannerImpl extends CtScanner implements ImportScanner {\n \t\t\t}\n \n \t\t\twhile (!(parent instanceof CtPackage)) {\n-\t\t\t\tif ((parent instanceof CtFieldReference) || (parent instanceof CtExecutableReference)) {\n-\t\t\t\t\tCtReference parentType = (CtReference) parent;\n+\t\t\t\tif ((parent instanceof CtFieldReference) || (parent instanceof CtExecutableReference) || (parent instanceof CtInvocation)) {\n+\t\t\t\t\tCtReference parentType;\n+\t\t\t\t\tif (parent instanceof CtInvocation) {\n+\t\t\t\t\t\tparentType = ((CtInvocation) parent).getExecutable();\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\tparentType = (CtReference) parent;\n+\t\t\t\t\t}\n \t\t\t\t\tLinkedList<String> qualifiedNameTokens = new LinkedList<>();\n \n \t\t\t\t\t// we don't want to test the current ref name, as we risk to create field import and make autoreference\n@@ -600,39 +609,54 @@ public class ImportScannerImpl extends CtScanner implements ImportScanner {\n \t\t\t\t\tCtTypeReference typeReference;\n \t\t\t\t\tif (parent instanceof CtFieldReference) {\n \t\t\t\t\t\ttypeReference = ((CtFieldReference) parent).getDeclaringType();\n-\t\t\t\t\t} else {\n+\t\t\t\t\t} else if (parent instanceof CtExecutableReference) {\n \t\t\t\t\t\ttypeReference = ((CtExecutableReference) parent).getDeclaringType();\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\ttypeReference = ((CtInvocation) parent).getExecutable().getDeclaringType();\n \t\t\t\t\t}\n \n \t\t\t\t\tif (typeReference != null) {\n-\t\t\t\t\t\tqualifiedNameTokens.add(typeReference.getSimpleName());\n+\t\t\t\t\t\tqualifiedNameTokens.addFirst(typeReference.getSimpleName());\n \n \t\t\t\t\t\tif (typeReference.getPackage() != null) {\n-\t\t\t\t\t\t\tCtPackage ctPackage = typeReference.getPackage().getDeclaration();\n-\n-\t\t\t\t\t\t\twhile (ctPackage != null) {\n-\t\t\t\t\t\t\t\tqualifiedNameTokens.add(ctPackage.getSimpleName());\n-\n-\t\t\t\t\t\t\t\tCtElement packParent = ctPackage.getParent();\n-\t\t\t\t\t\t\t\tif (packParent.getParent() != null && !((CtPackage) packParent).getSimpleName().equals(CtPackage.TOP_LEVEL_PACKAGE_NAME)) {\n-\t\t\t\t\t\t\t\t\tctPackage = (CtPackage) packParent;\n-\t\t\t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\t\t\tctPackage = null;\n-\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\tStringTokenizer token = new StringTokenizer(typeReference.getPackage().getSimpleName(), CtPackage.PACKAGE_SEPARATOR);\n+\t\t\t\t\t\t\tint index = 0;\n+\t\t\t\t\t\t\twhile (token.hasMoreElements()) {\n+\t\t\t\t\t\t\t\tqualifiedNameTokens.add(index, token.nextToken());\n+\t\t\t\t\t\t\t\tindex++;\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t\tif (!qualifiedNameTokens.isEmpty()) {\n \t\t\t\t\t\t// qualified name token are ordered in the reverse order\n \t\t\t\t\t\t// if the first package name is a variable name somewhere, it could lead to a collision\n-\t\t\t\t\t\tif (fieldAndMethodsNames.contains(qualifiedNameTokens.getLast()) || localVariablesOfBlock.contains(qualifiedNameTokens.getLast())) {\n-\t\t\t\t\t\t\tqualifiedNameTokens.removeLast();\n+\t\t\t\t\t\tif (fieldAndMethodsNames.contains(qualifiedNameTokens.getFirst()) || localVariablesOfBlock.contains(qualifiedNameTokens.getFirst())) {\n+\t\t\t\t\t\t\tqualifiedNameTokens.removeFirst();\n \n \t\t\t\t\t\t\tif (fqnMode) {\n-\t\t\t\t\t\t\t\treturn true;\n+\t\t\t\t\t\t\t\t// in case we are testing a type: we should not import it if its entire name is in collision\n+\t\t\t\t\t\t\t\t// for example: spoon.Launcher if a field spoon and another one Launcher exists\n+\t\t\t\t\t\t\t\tif (ref instanceof CtTypeReference) {\n+\t\t\t\t\t\t\t\t\tif (qualifiedNameTokens.isEmpty()) {\n+\t\t\t\t\t\t\t\t\t\treturn true;\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t// but if the other package names are not a variable name, it's ok to import\n+\t\t\t\t\t\t\t\t\tfor (int i =  0; i < qualifiedNameTokens.size(); i++) {\n+\t\t\t\t\t\t\t\t\t\tString testedToken = qualifiedNameTokens.get(i);\n+\t\t\t\t\t\t\t\t\t\tif (!fieldAndMethodsNames.contains(testedToken) && !localVariablesOfBlock.contains(testedToken)) {\n+\t\t\t\t\t\t\t\t\t\t\treturn true;\n+\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\treturn false;\n+\n+\t\t\t\t\t\t\t\t// However if it is a static method/field, we always accept to import them in this case\n+\t\t\t\t\t\t\t\t// It is the last possibility for managing import for us\n+\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\treturn true;\n+\t\t\t\t\t\t\t\t}\n \t\t\t\t\t\t\t} else {\n \t\t\t\t\t\t\t\t// but if the other package names are not a variable name, it's ok to import\n-\t\t\t\t\t\t\t\tfor (int i = qualifiedNameTokens.size() - 1; i > 0; i--) {\n+\t\t\t\t\t\t\t\tfor (int i =  0; i < qualifiedNameTokens.size(); i++) {\n \t\t\t\t\t\t\t\t\tString testedToken = qualifiedNameTokens.get(i);\n \t\t\t\t\t\t\t\t\tif (!fieldAndMethodsNames.contains(testedToken) && !localVariablesOfBlock.contains(testedToken)) {\n \t\t\t\t\t\t\t\t\t\treturn false;\ndiff --git a/src/main/java/spoon/reflect/visitor/MinimalImportScanner.java b/src/main/java/spoon/reflect/visitor/MinimalImportScanner.java\nindex 912692f..8f93166 100644\n--- a/src/main/java/spoon/reflect/visitor/MinimalImportScanner.java\n+++ b/src/main/java/spoon/reflect/visitor/MinimalImportScanner.java\n@@ -29,7 +29,8 @@ public class MinimalImportScanner extends ImportScannerImpl implements ImportSca\n \n \t/**\n \t * This method use @link{ImportScannerImpl#isTypeInCollision} to import a ref only if there is a collision\n-\t * @param ref\n+\t * @param ref: the type we are testing, it can be a CtTypeReference, a CtFieldReference or a CtExecutableReference\n+\t *\n \t * @return true if the ref should be imported.\n \t */\n \tprivate boolean shouldTypeBeImported(CtReference ref) {\n@@ -54,6 +55,12 @@ public class MinimalImportScanner extends ImportScannerImpl implements ImportSca\n \n \t@Override\n \tprotected boolean addFieldImport(CtFieldReference ref) {\n+\t\tif (ref.getDeclaringType() != null) {\n+\t\t\tif (isImportedInClassImports(ref.getDeclaringType())) {\n+\t\t\t\treturn false;\n+\t\t\t}\n+\t\t}\n+\n \t\tboolean shouldTypeBeImported = this.shouldTypeBeImported(ref);\n \n \t\tif (shouldTypeBeImported) {\n@@ -70,6 +77,11 @@ public class MinimalImportScanner extends ImportScannerImpl implements ImportSca\n \n \t@Override\n \tprotected boolean addMethodImport(CtExecutableReference ref) {\n+\t\tif (ref.getDeclaringType() != null) {\n+\t\t\tif (isImportedInClassImports(ref.getDeclaringType())) {\n+\t\t\t\treturn false;\n+\t\t\t}\n+\t\t}\n \t\tboolean shouldTypeBeImported = this.shouldTypeBeImported(ref);\n \n \t\tif (shouldTypeBeImported) {\ndiff --git a/src/main/java/spoon/reflect/visitor/printer/ElementPrinterHelper.java b/src/main/java/spoon/reflect/visitor/printer/ElementPrinterHelper.java\nindex 2133fe5..8ede107 100644\n--- a/src/main/java/spoon/reflect/visitor/printer/ElementPrinterHelper.java\n+++ b/src/main/java/spoon/reflect/visitor/printer/ElementPrinterHelper.java\n@@ -283,7 +283,7 @@ public class ElementPrinterHelper {\n \t\t\t\t\timportTypeStr = this.removeInnerTypeSeparator(fieldRef.getDeclaringType().getQualifiedName()) + \".\" + fieldRef.getSimpleName();\n \t\t\t\t}\n \n-\t\t\t\tif (!importTypeStr.equals(\"\")) {\n+\t\t\t\tif (!importTypeStr.equals(\"\") && !importTypeStr.startsWith(\"java.lang\")) {\n \t\t\t\t\tprinter.write(importStr + \" \" + importTypeStr + \";\").writeln().writeTabs();\n \t\t\t\t}\n \t\t\t}\n", 
    "projectMetrics": {
      "numberSourceFiles": 483, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 511, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 89932184, 
        "hostName": "local", 
        "totalMemory": 262668288, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 4:22:44 PM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/234612953/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            1, 
            0, 
            0, 
            0, 
            65
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 66
        }, 
        "testing": {
          "stepDurations": [
            169
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 169
        }, 
        "cloning": {
          "stepDurations": [
            19
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 19
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 4:14:08 PM", 
      "totalDuration": 510
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1083, 
        "numberRunning": 1084, 
        "numberFailing": 0, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "java.lang.NullPointerException", 
            "isError": true, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/237078306", 
      "failingClasses": [
        {
          "numberPassing": 4, 
          "numberRunning": 5, 
          "testClass": "spoon.test.imports.ImportScannerTest", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "java.lang.NullPointerException", 
          "testClass": "spoon.test.imports.ImportScannerTest", 
          "testMethod": "testTargetTypeNull", 
          "isError": true
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/237089137", 
        "date": "May 29, 2017 11:03:21 AM", 
        "id": 237089137
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/237078306", 
        "date": "May 29, 2017 10:21:36 AM", 
        "id": 237078306
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/b3f568da7a38aad38505e923d9b9f4025f38b0ca", 
        "sha": "b3f568da7a38aad38505e923d9b9f4025f38b0ca", 
        "branchName": "master", 
        "date": "May 29, 2017 10:54:20 AM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/54e1909ab7217cd8417d4d15cc7c0d127750b474", 
        "sha": "54e1909ab7217cd8417d4d15cc7c0d127750b474", 
        "branchName": "master", 
        "date": "May 29, 2017 10:13:14 AM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-237078306-237089137", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 484, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 512, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 1, 
        "numberDeleted": 1
      }
    }, 
    "bugId": "Bears_56", 
    "diff": "diff --git a/src/main/java/spoon/reflect/visitor/ImportScannerImpl.java b/src/main/java/spoon/reflect/visitor/ImportScannerImpl.java\nindex 9f46670..614a6f9 100644\n--- a/src/main/java/spoon/reflect/visitor/ImportScannerImpl.java\n+++ b/src/main/java/spoon/reflect/visitor/ImportScannerImpl.java\n@@ -563,7 +563,7 @@ public class ImportScannerImpl extends CtScanner implements ImportScanner {\n \t * @return true if the ref should be imported.\n \t */\n \tprotected boolean isTypeInCollision(CtReference ref, boolean fqnMode) {\n-\t\tif (targetType.getSimpleName().equals(ref.getSimpleName()) && !targetType.equals(ref)) {\n+\t\tif (targetType != null && targetType.getSimpleName().equals(ref.getSimpleName()) && !targetType.equals(ref)) {\n \t\t\treturn true;\n \t\t}\n \n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 144269200, 
        "hostName": "local", 
        "totalMemory": 258998272, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 4:14:54 PM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/237078306/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            1, 
            0, 
            0, 
            0, 
            93
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 94
        }, 
        "testing": {
          "stepDurations": [
            219
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 219
        }, 
        "cloning": {
          "stepDurations": [
            19
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 19
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 4:05:41 PM", 
      "totalDuration": 547
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1087, 
        "numberRunning": 1088, 
        "numberFailing": 1, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/237133219", 
      "failureDetails": [
        {
          "failureName": "java.lang.AssertionError", 
          "testMethod": "testmportInCu", 
          "isError": false, 
          "testClass": "spoon.test.imports.ImportTest"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 32, 
          "numberRunning": 33, 
          "testClass": "spoon.test.imports.ImportTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/237187910", 
        "date": "May 29, 2017 4:29:03 PM", 
        "id": 237187910
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/237133219", 
        "date": "May 29, 2017 1:34:16 PM", 
        "id": 237133219
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/0b9650639379d1d9f38060d5b013015d01c5b231", 
        "sha": "0b9650639379d1d9f38060d5b013015d01c5b231", 
        "branchName": "master", 
        "date": "May 29, 2017 4:19:55 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/ce6baba196990f5ae3dcbf48bbdbd5d20cf95441", 
        "sha": "ce6baba196990f5ae3dcbf48bbdbd5d20cf95441", 
        "branchName": "master", 
        "date": "May 29, 2017 1:26:05 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-237133219-237187910", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 2, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 35, 
        "numberDeleted": 4
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_57", 
    "diff": "diff --git a/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java b/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java\nindex 2781fcd..2749c97 100644\n--- a/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java\n+++ b/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java\n@@ -1796,12 +1796,14 @@ public class DefaultJavaPrettyPrinter implements CtVisitor, PrettyPrinter {\n \t@Override\n \tpublic void calculate(CompilationUnit sourceCompilationUnit, List<CtType<?>> types) {\n \t\tthis.sourceCompilationUnit = sourceCompilationUnit;\n-\t\t// reset the import scanner between each compilationunit\n+\n+\t\t// reset the importsContext to avoid errors with multiple CU\n \t\tif (env.isAutoImports()) {\n \t\t\tthis.importsContext = new ImportScannerImpl();\n \t\t} else {\n \t\t\tthis.importsContext = new MinimalImportScanner();\n \t\t}\n+\n \t\tSet<CtReference> imports = new HashSet<>();\n \t\tfor (CtType<?> t : types) {\n \t\t\timports.addAll(computeImports(t));\ndiff --git a/src/main/java/spoon/reflect/visitor/ImportScannerImpl.java b/src/main/java/spoon/reflect/visitor/ImportScannerImpl.java\nindex 614a6f9..68e4f28 100644\n--- a/src/main/java/spoon/reflect/visitor/ImportScannerImpl.java\n+++ b/src/main/java/spoon/reflect/visitor/ImportScannerImpl.java\n@@ -20,7 +20,6 @@ import spoon.reflect.code.CtBlock;\n import spoon.reflect.code.CtCatchVariable;\n import spoon.reflect.code.CtFieldAccess;\n import spoon.reflect.code.CtFieldRead;\n-import spoon.reflect.code.CtFieldWrite;\n import spoon.reflect.code.CtInvocation;\n import spoon.reflect.code.CtLiteral;\n import spoon.reflect.declaration.CtAnnotationType;\n@@ -80,7 +79,6 @@ public class ImportScannerImpl extends CtScanner implements ImportScanner {\n \t@Override\n \tpublic <T> void visitCtFieldRead(CtFieldRead<T> fieldRead) {\n \t\tenter(fieldRead);\n-\t\tscan(fieldRead.getVariable());\n \t\tscan(fieldRead.getAnnotations());\n \t\tscan(fieldRead.getTypeCasts());\n \t\tscan(fieldRead.getVariable());\n@@ -88,17 +86,6 @@ public class ImportScannerImpl extends CtScanner implements ImportScanner {\n \t\texit(fieldRead);\n \t}\n \n-\t@Override\n-\tpublic <T> void visitCtFieldWrite(CtFieldWrite<T> fieldWrite) {\n-\t\tenter(fieldWrite);\n-\t\tscan(fieldWrite.getVariable());\n-\t\tscan(fieldWrite.getAnnotations());\n-\t\tscan(fieldWrite.getTypeCasts());\n-\t\tscan(fieldWrite.getVariable());\n-\t\tscan(fieldWrite.getTarget());\n-\t\texit(fieldWrite);\n-\t}\n-\n \t@Override\n \tpublic <T> void visitCtFieldReference(CtFieldReference<T> reference) {\n \t\tenter(reference);\n@@ -124,17 +111,6 @@ public class ImportScannerImpl extends CtScanner implements ImportScanner {\n \t\texit(reference);\n \t}\n \n-\t@Override\n-\tpublic <T> void visitCtInvocation(CtInvocation<T> invocation) {\n-\t\tenter(invocation);\n-\t\tscan(invocation.getAnnotations());\n-\t\tscan(invocation.getTypeCasts());\n-\t\tscan(invocation.getTarget());\n-\t\tscan(invocation.getExecutable());\n-\t\tscan(invocation.getArguments());\n-\t\texit(invocation);\n-\t}\n-\n \t@Override\n \tpublic <T> void visitCtTypeReference(CtTypeReference<T> reference) {\n \t\tif (!(reference instanceof CtArrayTypeReference)) {\n@@ -207,9 +183,6 @@ public class ImportScannerImpl extends CtScanner implements ImportScanner {\n \n \t@Override\n \tpublic Collection<CtReference> computeAllImports(CtType<?> simpleType) {\n-\t\tclassImports.clear();\n-\t\tfieldImports.clear();\n-\t\tmethodImports.clear();\n \t\t//look for top declaring type of that simpleType\n \t\ttargetType = simpleType.getReference().getTopLevelType();\n \t\taddClassImport(simpleType.getReference());\n@@ -224,11 +197,7 @@ public class ImportScannerImpl extends CtScanner implements ImportScanner {\n \n \t@Override\n \tpublic Collection<CtTypeReference<?>> computeImports(CtElement element) {\n-\t\tclassImports.clear();\n-\t\tfieldImports.clear();\n-\t\tmethodImports.clear();\n \t\t//look for top declaring type of that simpleType\n-\n \t\tif (element instanceof CtType) {\n \t\t\tCtType simpleType = (CtType) element;\n \t\t\ttargetType = simpleType.getReference().getTopLevelType();\n@@ -404,11 +373,11 @@ public class ImportScannerImpl extends CtScanner implements ImportScanner {\n \t */\n \tprivate boolean declaringTypeIsLocalOrImported(CtTypeReference declaringType) {\n \t\tif (declaringType != null) {\n-\t\t\tif (isImportedInClassImports(declaringType) || classNamePresentInJavaLang(declaringType)) {\n+\t\t\tif (!isTypeInCollision(declaringType, false) && addClassImport(declaringType)) {\n \t\t\t\treturn true;\n \t\t\t}\n \n-\t\t\tif (!isTypeInCollision(declaringType, false) && addClassImport(declaringType)) {\n+\t\t\tif (isImportedInClassImports(declaringType) || classNamePresentInJavaLang(declaringType)) {\n \t\t\t\treturn true;\n \t\t\t}\n \n", 
    "projectMetrics": {
      "numberSourceFiles": 484, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 516, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 173484160, 
        "hostName": "local", 
        "totalMemory": 262144000, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 4:02:25 PM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/237133219/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            1, 
            0, 
            0, 
            0, 
            89
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 90
        }, 
        "testing": {
          "stepDurations": [
            187
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 187
        }, 
        "cloning": {
          "stepDurations": [
            21
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 21
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 3:53:00 PM", 
      "totalDuration": 557
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1088, 
        "numberRunning": 1090, 
        "numberFailing": 2, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 1
          }, 
          {
            "failureName": "org.junit.ComparisonFailure", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/237507053", 
      "failingClasses": [
        {
          "numberPassing": 9, 
          "numberRunning": 10, 
          "testClass": "spoon.test.prettyprinter.DefaultPrettyPrinterTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }, 
        {
          "numberPassing": 1, 
          "numberRunning": 2, 
          "testClass": "spoon.test.prettyprinter.LinesTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "java.lang.AssertionError", 
          "testMethod": "testIdenticalPrettyPrinter", 
          "testClass": "spoon.test.prettyprinter.LinesTest", 
          "detail": "class A {\n    ArrayList<String> list = new ArrayList<>();} not handled expected:<5> but was:<7>", 
          "isError": false
        }, 
        {
          "failureName": "org.junit.ComparisonFailure", 
          "testMethod": "printClassCreatedWithSpoon", 
          "testClass": "spoon.test.prettyprinter.DefaultPrettyPrinterTest", 
          "detail": "expected:<[]package foo;\n\n\nclass...> but was:<[\n\n]package foo;\n\n\nclass...>", 
          "isError": false
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/237511642", 
        "date": "May 30, 2017 3:22:20 PM", 
        "id": 237511642
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/237507053", 
        "date": "May 30, 2017 3:08:35 PM", 
        "id": 237507053
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/67934eece720ef593284dfa39edf57a3aa9458e0", 
        "sha": "67934eece720ef593284dfa39edf57a3aa9458e0", 
        "branchName": "master", 
        "date": "May 30, 2017 3:14:01 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/4d49c23ba542e0eacb679d911a523cd9bf4a3712", 
        "sha": "4d49c23ba542e0eacb679d911a523cd9bf4a3712", 
        "branchName": "master", 
        "date": "May 30, 2017 3:00:14 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-237507053-237511642", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 485, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 516, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 4, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 24, 
        "numberDeleted": 23
      }
    }, 
    "bugId": "Bears_58", 
    "diff": "diff --git a/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java b/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java\nindex 4439811..6986322 100644\n--- a/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java\n+++ b/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java\n@@ -282,7 +282,7 @@ public class DefaultJavaPrettyPrinter implements CtVisitor, PrettyPrinter {\n \t\t\tcontext.elementStack.push(e);\n \t\t\tif (env.isPreserveLineNumbers()) {\n \t\t\t\tif (!(e instanceof CtNamedElement)) {\n-\t\t\t\t\tprinter.adjustPosition(e, sourceCompilationUnit);\n+\t\t\t\t\tprinter.adjustStartPosition(e);\n \t\t\t\t}\n \t\t\t}\n \t\t\te.accept(this);\n@@ -436,9 +436,10 @@ public class DefaultJavaPrettyPrinter implements CtVisitor, PrettyPrinter {\n \t\t\t}\n \t\t}\n \t\tprinter.decTab();\n+\t\tprinter.adjustEndPosition(block);\n \t\tif (env.isPreserveLineNumbers()) {\n \t\t\tif (!block.isImplicit()) {\n-\t\t\t\tprinter.write(\"}\");\n+\t\t\t\tprinter.writeTabs().write(\"}\");\n \t\t\t}\n \t\t} else {\n \t\t\tprinter.writeln().writeTabs();\n@@ -528,7 +529,7 @@ public class DefaultJavaPrettyPrinter implements CtVisitor, PrettyPrinter {\n \t\t// lst.addAll(elementPrinterHelper.getComments(ctClass, CommentOffset.INSIDE));\n \t\tprinter.write(\" {\").incTab();\n \t\telementPrinterHelper.writeElementList(ctClass.getTypeMembers());\n-\t\tprinter.decTab().writeTabs().write(\"}\");\n+\t\tprinter.adjustEndPosition(ctClass).decTab().writeTabs().write(\"}\");\n \t\tcontext.popCurrentThis();\n \t}\n \n@@ -1092,7 +1093,7 @@ public class DefaultJavaPrettyPrinter implements CtVisitor, PrettyPrinter {\n \n \t\t\telementPrinterHelper.writeActualTypeArguments(invocation);\n \t\t\tif (env.isPreserveLineNumbers()) {\n-\t\t\t\tprinter.adjustPosition(invocation, sourceCompilationUnit);\n+\t\t\t\tprinter.adjustStartPosition(invocation);\n \t\t\t}\n \t\t\tprinter.write(invocation.getExecutable().getSimpleName());\n \t\t}\n@@ -1163,7 +1164,7 @@ public class DefaultJavaPrettyPrinter implements CtVisitor, PrettyPrinter {\n \t\t\tenterCtStatement(localVariable);\n \t\t}\n \t\tif (env.isPreserveLineNumbers()) {\n-\t\t\tprinter.adjustPosition(localVariable, sourceCompilationUnit);\n+\t\t\tprinter.adjustStartPosition(localVariable);\n \t\t}\n \t\tif (!context.noTypeDecl()) {\n \t\t\telementPrinterHelper.writeModifiers(localVariable);\n@@ -1185,7 +1186,7 @@ public class DefaultJavaPrettyPrinter implements CtVisitor, PrettyPrinter {\n \t@Override\n \tpublic <T> void visitCtCatchVariable(CtCatchVariable<T> catchVariable) {\n \t\tif (env.isPreserveLineNumbers()) {\n-\t\t\tprinter.adjustPosition(catchVariable, sourceCompilationUnit);\n+\t\t\tprinter.adjustStartPosition(catchVariable);\n \t\t}\n \t\telementPrinterHelper.writeModifiers(catchVariable);\n \t\tscan(catchVariable.getType());\n@@ -1813,7 +1814,12 @@ public class DefaultJavaPrettyPrinter implements CtVisitor, PrettyPrinter {\n \t\telementPrinterHelper.writeHeader(types, imports);\n \t\tfor (CtType<?> t : types) {\n \t\t\tscan(t);\n-\t\t\tprinter.writeln().writeln().writeTabs();\n+\t\t\tif (!env.isPreserveLineNumbers()) {\n+\t\t\t\t// saving lines and chars\n+\t\t\t\tprinter.writeln().writeln().writeTabs();\n+\t\t\t} else {\n+\t\t\t\tprinter.adjustEndPosition(t);\n+\t\t\t}\n \t\t}\n \t}\n \ndiff --git a/src/main/java/spoon/reflect/visitor/printer/ElementPrinterHelper.java b/src/main/java/spoon/reflect/visitor/printer/ElementPrinterHelper.java\nindex 0882ead..0f50d2a 100644\n--- a/src/main/java/spoon/reflect/visitor/printer/ElementPrinterHelper.java\n+++ b/src/main/java/spoon/reflect/visitor/printer/ElementPrinterHelper.java\n@@ -88,7 +88,7 @@ public class ElementPrinterHelper {\n \tpublic void visitCtNamedElement(CtNamedElement namedElement, CompilationUnit sourceCompilationUnit) {\n \t\twriteAnnotations(namedElement);\n \t\tif (env.isPreserveLineNumbers()) {\n-\t\t\tprinter.adjustPosition(namedElement, sourceCompilationUnit);\n+\t\t\tprinter.adjustStartPosition(namedElement);\n \t\t}\n \t}\n \n@@ -261,7 +261,6 @@ public class ElementPrinterHelper {\n \t\tif (!types.isEmpty()) {\n \t\t\tfor (CtType<?> ctType : types) {\n \t\t\t\twriteComment(ctType, CommentOffset.TOP_FILE);\n-\t\t\t\tprinter.writeln().writeln().writeTabs();\n \t\t\t}\n \t\t\t// writing the header package\n \t\t\tif (!types.get(0).getPackage().isUnnamedPackage()) {\ndiff --git a/src/main/java/spoon/reflect/visitor/printer/PrinterHelper.java b/src/main/java/spoon/reflect/visitor/printer/PrinterHelper.java\nindex 9b19bc3..e4c01ed 100644\n--- a/src/main/java/spoon/reflect/visitor/printer/PrinterHelper.java\n+++ b/src/main/java/spoon/reflect/visitor/printer/PrinterHelper.java\n@@ -16,7 +16,6 @@\n  */\n package spoon.reflect.visitor.printer;\n \n-import org.apache.log4j.Level;\n import spoon.compiler.Environment;\n import spoon.reflect.code.BinaryOperatorKind;\n import spoon.reflect.code.UnaryOperatorKind;\n@@ -160,24 +159,30 @@ public class PrinterHelper {\n \t\treturn (c == ' ') || (c == '\\t') || (c == '\\n') || (c == '\\r');\n \t}\n \n-\tpublic void adjustPosition(CtElement e, CompilationUnit unitExpected) {\n-\t\tif (e.getPosition() != null && !e.isImplicit() && e.getPosition().getCompilationUnit() != null && e.getPosition().getCompilationUnit() == unitExpected) {\n+\tpublic PrinterHelper adjustStartPosition(CtElement e) {\n+\t\tif (e.getPosition() != null && !e.isImplicit()) {\n+\t\t\t// we should add some lines\n \t\t\twhile (line < e.getPosition().getLine()) {\n \t\t\t\twriteln();\n \t\t\t}\n \t\t\t// trying to remove some lines\n \t\t\twhile (line > e.getPosition().getLine()) {\n \t\t\t\tif (!removeLine()) {\n-\t\t\t\t\tif (line > e.getPosition().getEndLine()) {\n-\t\t\t\t\t\tfinal String message = \"cannot adjust position of \" + e.getClass().getSimpleName() + \" '\" //\n-\t\t\t\t\t\t\t\t+ e.getShortRepresentation() + \"' \" + \" to match lines: \" + line + \" > [\" //\n-\t\t\t\t\t\t\t\t+ e.getPosition().getLine() + \", \" + e.getPosition().getEndLine() + \"]\"; //\n-\t\t\t\t\t\tenv.report(null, Level.WARN, e, message);\n-\t\t\t\t\t}\n \t\t\t\t\tbreak;\n \t\t\t\t}\n \t\t\t}\n \t\t}\n+\t\treturn this;\n+\t}\n+\n+\tpublic PrinterHelper adjustEndPosition(CtElement e) {\n+\t\tif (env.isPreserveLineNumbers() && e.getPosition() != null) {\n+\t\t\t// let's add lines if required\n+\t\t\twhile (line < e.getPosition().getEndLine()) {\n+\t\t\t\twriteln();\n+\t\t\t}\n+\t\t}\n+\t\treturn this;\n \t}\n \n \tpublic void undefineLine() {\ndiff --git a/src/main/java/spoon/support/compiler/jdt/JDTBasedSpoonCompiler.java b/src/main/java/spoon/support/compiler/jdt/JDTBasedSpoonCompiler.java\nindex ff14d04..d9e128b 100644\n--- a/src/main/java/spoon/support/compiler/jdt/JDTBasedSpoonCompiler.java\n+++ b/src/main/java/spoon/support/compiler/jdt/JDTBasedSpoonCompiler.java\n@@ -504,6 +504,7 @@ public class JDTBasedSpoonCompiler implements spoon.SpoonModelBuilder {\n \r\n \t\t\t\tIOUtils.copy(is, new FileOutputStream(file));\r\n \r\n+\r\n \t\t\t\tif (!printedFiles.contains(file)) {\r\n \t\t\t\t\tprintedFiles.add(file);\r\n \t\t\t\t}\r\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 169442888, 
        "hostName": "local", 
        "totalMemory": 299892736, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 3:50:43 PM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/237507053/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            76
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 76
        }, 
        "testing": {
          "stepDurations": [
            205
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 205
        }, 
        "cloning": {
          "stepDurations": [
            25
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 25
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 3:41:32 PM", 
      "totalDuration": 544
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1089, 
        "numberRunning": 1094, 
        "numberFailing": 4, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "org.junit.ComparisonFailure", 
            "isError": false, 
            "occurrences": 2
          }, 
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 2
          }, 
          {
            "failureName": "spoon.SpoonException", 
            "isError": true, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/237627560", 
      "failureDetails": [
        {
          "failureName": "org.junit.ComparisonFailure", 
          "detail": "expected:<<T[> void method1(T])> but was:<<T[ extends java.lang.String> void method1(T extends java.lang.String])>", 
          "isError": false, 
          "testMethod": "testOneReferenceWithGenericMethodOutOfTheClass", 
          "testClass": "spoon.test.reference.ExecutableReferenceGenericTest"
        }, 
        {
          "failureName": "spoon.SpoonException", 
          "detail": "Cannot resolve type erasure of the type parameter reference, which is not able to found it's declaration.", 
          "isError": true, 
          "testMethod": "testGetGenericMethodFromReference", 
          "testClass": "spoon.test.methodreference.MethodReferenceTest"
        }, 
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "expected:<T> but was:<T extends java.lang.String>", 
          "isError": false, 
          "testMethod": "testGetGenericExecutableReference", 
          "testClass": "spoon.test.methodreference.MethodReferenceTest"
        }, 
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "expected:<4> but was:<3>", 
          "isError": false, 
          "testMethod": "testWildcard", 
          "testClass": "spoon.test.generics.GenericsTest"
        }, 
        {
          "failureName": "org.junit.ComparisonFailure", 
          "detail": "expected:<<T[> void method1(T])> but was:<<T[ extends java.lang.String> void method1(T extends java.lang.String])>", 
          "isError": false, 
          "testMethod": "testMultiReferenceBetweenMethodsWithGenericInSameClass", 
          "testClass": "spoon.test.reference.ExecutableReferenceGenericTest"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 10, 
          "numberRunning": 12, 
          "testClass": "spoon.test.methodreference.MethodReferenceTest", 
          "numberFailing": 1, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }, 
        {
          "numberPassing": 34, 
          "numberRunning": 35, 
          "testClass": "spoon.test.generics.GenericsTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }, 
        {
          "numberPassing": 10, 
          "numberRunning": 12, 
          "testClass": "spoon.test.reference.ExecutableReferenceGenericTest", 
          "numberFailing": 2, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/237821366", 
        "date": "May 31, 2017 9:52:54 AM", 
        "id": 237821366
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/237627560", 
        "date": "May 30, 2017 8:29:09 PM", 
        "id": 237627560
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/95828480ea5fee6df898509c84c6a95b14681ce3", 
        "sha": "95828480ea5fee6df898509c84c6a95b14681ce3", 
        "branchName": "master", 
        "date": "May 31, 2017 9:43:56 AM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/b6e524c0a197dd2cfe3b4752737e85729d17a59c", 
        "sha": "b6e524c0a197dd2cfe3b4752737e85729d17a59c", 
        "branchName": "master", 
        "date": "May 30, 2017 8:20:24 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-237627560-237821366", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 4, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 71, 
        "numberDeleted": 58
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_59", 
    "diff": "diff --git a/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java b/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java\nindex 6986322..46b0b40 100644\n--- a/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java\n+++ b/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java\n@@ -535,7 +535,24 @@ public class DefaultJavaPrettyPrinter implements CtVisitor, PrettyPrinter {\n \n \t@Override\n \tpublic void visitCtTypeParameter(CtTypeParameter typeParameter) {\n-\t\tvisitCtTypeParameterReference(typeParameter.getReference());\n+\t\tCtTypeParameterReference ref = typeParameter.getReference();\n+\t\tif (ref.isImplicit()) {\n+\t\t\treturn;\n+\t\t}\n+\t\telementPrinterHelper.writeAnnotations(ref);\n+\t\tif (printQualified(ref)) {\n+\t\t\tprinter.write(ref.getQualifiedName());\n+\t\t} else {\n+\t\t\tprinter.write(ref.getSimpleName());\n+\t\t}\n+\t\tif (ref.getBoundingType() != null) {\n+\t\t\tif (ref.isUpper()) {\n+\t\t\t\tprinter.write(\" extends \");\n+\t\t\t} else {\n+\t\t\t\tprinter.write(\" super \");\n+\t\t\t}\n+\t\t\tscan(ref.getBoundingType());\n+\t\t}\n \t}\n \n \t@Override\n@@ -1585,21 +1602,29 @@ public class DefaultJavaPrettyPrinter implements CtVisitor, PrettyPrinter {\n \t\t} else {\n \t\t\tprinter.write(ref.getSimpleName());\n \t\t}\n-\t\tif (ref.getBoundingType() != null) {\n-\t\t\tif (ref.isUpper()) {\n+\t}\n+\n+\t@Override\n+\tpublic void visitCtWildcardReference(CtWildcardReference wildcardReference) {\n+\t\tif (wildcardReference.isImplicit()) {\n+\t\t\treturn;\n+\t\t}\n+\t\telementPrinterHelper.writeAnnotations(wildcardReference);\n+\t\tif (printQualified(wildcardReference)) {\n+\t\t\tprinter.write(wildcardReference.getQualifiedName());\n+\t\t} else {\n+\t\t\tprinter.write(wildcardReference.getSimpleName());\n+\t\t}\n+\t\tif (wildcardReference.getBoundingType() != null) {\n+\t\t\tif (wildcardReference.isUpper()) {\n \t\t\t\tprinter.write(\" extends \");\n \t\t\t} else {\n \t\t\t\tprinter.write(\" super \");\n \t\t\t}\n-\t\t\tscan(ref.getBoundingType());\n+\t\t\tscan(wildcardReference.getBoundingType());\n \t\t}\n \t}\n \n-\t@Override\n-\tpublic void visitCtWildcardReference(CtWildcardReference wildcardReference) {\n-\t\tvisitCtTypeParameterReference(wildcardReference);\n-\t}\n-\n \tprivate boolean printQualified(CtTypeReference<?> ref) {\n \t\tif (importsContext.isImported(ref) || (this.env.isAutoImports() && ref.getPackage() != null && ref.getPackage().getSimpleName().equals(\"java.lang\"))) {\n \t\t\t// If my.pkg.Something is imported, but\ndiff --git a/src/main/java/spoon/support/compiler/jdt/ReferenceBuilder.java b/src/main/java/spoon/support/compiler/jdt/ReferenceBuilder.java\nindex 67c67e4..9b0bdea 100644\n--- a/src/main/java/spoon/support/compiler/jdt/ReferenceBuilder.java\n+++ b/src/main/java/spoon/support/compiler/jdt/ReferenceBuilder.java\n@@ -16,20 +16,6 @@\n  */\n package spoon.support.compiler.jdt;\n \n-import static spoon.support.compiler.jdt.JDTTreeBuilderQuery.searchPackage;\n-import static spoon.support.compiler.jdt.JDTTreeBuilderQuery.searchType;\n-import static spoon.support.compiler.jdt.JDTTreeBuilderQuery.searchTypeBinding;\n-\n-import java.util.ArrayList;\n-import java.util.Arrays;\n-import java.util.Collections;\n-import java.util.HashMap;\n-import java.util.List;\n-import java.util.Map;\n-import java.util.TreeMap;\n-import java.util.regex.Matcher;\n-import java.util.regex.Pattern;\n-\n import org.eclipse.jdt.core.compiler.CharOperation;\n import org.eclipse.jdt.internal.compiler.ast.ASTNode;\n import org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration;\n@@ -79,7 +65,6 @@ import org.eclipse.jdt.internal.compiler.lookup.TypeBinding;\n import org.eclipse.jdt.internal.compiler.lookup.TypeVariableBinding;\n import org.eclipse.jdt.internal.compiler.lookup.VariableBinding;\n import org.eclipse.jdt.internal.compiler.lookup.WildcardBinding;\n-\n import spoon.reflect.code.CtLambda;\n import spoon.reflect.declaration.CtPackage;\n import spoon.reflect.declaration.CtParameter;\n@@ -97,8 +82,27 @@ import spoon.reflect.reference.CtTypeParameterReference;\n import spoon.reflect.reference.CtTypeReference;\n import spoon.reflect.reference.CtVariableReference;\n \n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.Collections;\n+import java.util.HashMap;\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Set;\n+import java.util.TreeMap;\n+import java.util.regex.Matcher;\n+import java.util.regex.Pattern;\n+\n+import static spoon.support.compiler.jdt.JDTTreeBuilderQuery.searchPackage;\n+import static spoon.support.compiler.jdt.JDTTreeBuilderQuery.searchType;\n+import static spoon.support.compiler.jdt.JDTTreeBuilderQuery.searchTypeBinding;\n+\n public class ReferenceBuilder {\n \n+\t// Allow to detect circular references and to avoid endless recursivity\n+\t// when resolving parameterizedTypes (e.g. Enum<E extends Enum<E>>)\n+\tprivate Set<TypeBinding> exploringParameterizedBindings = new HashSet<>();\n \tprivate Map<String, CtTypeReference<?>> basestypes = new TreeMap<>();\n \n \tprivate boolean bounds = false;\n@@ -650,7 +654,12 @@ public class ReferenceBuilder {\n \t\t\t\t\tif (bindingCache.containsKey(b)) {\n \t\t\t\t\t\tref.addActualTypeArgument(getCtCircularTypeReference(b));\n \t\t\t\t\t} else {\n-\t\t\t\t\t\tref.addActualTypeArgument(getTypeReference(b));\n+\t\t\t\t\t\tif (!this.exploringParameterizedBindings.contains(b)) {\n+\t\t\t\t\t\t\tthis.exploringParameterizedBindings.add(b);\n+\t\t\t\t\t\t\tref.addActualTypeArgument(getTypeReference(b));\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\tthis.exploringParameterizedBindings.remove(b);\n+\t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n@@ -676,12 +685,35 @@ public class ReferenceBuilder {\n \t\t\tref.setSimpleName(new String(binding.sourceName()));\n \t\t} else if (binding instanceof TypeVariableBinding) {\n \t\t\tboolean oldBounds = bounds;\n-\t\t\tref = this.jdtTreeBuilder.getFactory().Core().createTypeParameterReference();\n+\n \t\t\tif (binding instanceof CaptureBinding) {\n \t\t\t\tref = this.jdtTreeBuilder.getFactory().Core().createWildcardReference();\n \t\t\t\tbounds = true;\n \t\t\t} else {\n+\t\t\t\tTypeVariableBinding typeParamBinding = (TypeVariableBinding) binding;\n+\t\t\t\tReferenceBinding superClass = typeParamBinding.superclass;\n+\t\t\t\tReferenceBinding[] superInterfaces = typeParamBinding.superInterfaces();\n+\n+\t\t\t\tCtTypeReference refSuperClass = null;\n+\n+\t\t\t\t// if the type parameter has a super class other than java.lang.Object, we get it\n+\t\t\t\t// superClass.superclass() is null if it's java.lang.Object\n+\t\t\t\tif (superClass != null && !(superClass.superclass() == null)) {\n+\t\t\t\t\trefSuperClass = this.getTypeReference(superClass);\n+\n+\t\t\t\t// if the type parameter has a super interface, then we'll get it too, as a superclass\n+\t\t\t\t// type parameter can only extends an interface or a class, so we don't make the distinction\n+\t\t\t\t// in Spoon. Moreover we can only have one extends in a type parameter.\n+\t\t\t\t} else if (superInterfaces != null && superInterfaces.length == 1) {\n+\t\t\t\t\trefSuperClass = this.getTypeReference(superInterfaces[0]);\n+\t\t\t\t}\n+\n+\t\t\t\tref = this.jdtTreeBuilder.getFactory().Core().createTypeParameterReference();\n \t\t\t\tref.setSimpleName(new String(binding.sourceName()));\n+\n+\t\t\t\tif (refSuperClass != null) {\n+\t\t\t\t\t((CtTypeParameterReference) ref).addBound(refSuperClass);\n+\t\t\t\t}\n \t\t\t}\n \t\t\tTypeVariableBinding b = (TypeVariableBinding) binding;\n \t\t\tif (bounds) {\n@@ -721,15 +753,19 @@ public class ReferenceBuilder {\n \t\t\t\tref = ref == null ? ref : ref.clone();\n \t\t\t}\n \t\t} else if (binding instanceof WildcardBinding) {\n+\t\t\tWildcardBinding wildcardBinding = (WildcardBinding) binding;\n \t\t\tref = this.jdtTreeBuilder.getFactory().Core().createWildcardReference();\n-\t\t\tif (((WildcardBinding) binding).boundKind == Wildcard.SUPER && ref instanceof CtTypeParameterReference) {\n+\n+\t\t\tif (wildcardBinding.boundKind == Wildcard.SUPER && ref instanceof CtTypeParameterReference) {\n \t\t\t\t((CtTypeParameterReference) ref).setUpper(false);\n \t\t\t}\n \n-\t\t\tif (((WildcardBinding) binding).bound != null && ref instanceof CtTypeParameterReference) {\n-\t\t\t\tif (bindingCache.containsKey(((WildcardBinding) binding).bound)) {\n-\t\t\t\t\t((CtTypeParameterReference) ref).setBoundingType(getCtCircularTypeReference(((WildcardBinding) binding).bound));\n+\t\t\tif (wildcardBinding.bound != null && ref instanceof CtTypeParameterReference) {\n+\t\t\t\tif (bindingCache.containsKey(wildcardBinding.bound)) {\n+\t\t\t\t\t((CtTypeParameterReference) ref).setBoundingType(getCtCircularTypeReference(wildcardBinding.bound));\n \t\t\t\t} else {\n+\n+\n \t\t\t\t\t((CtTypeParameterReference) ref).setBoundingType(getTypeReference(((WildcardBinding) binding).bound));\n \t\t\t\t}\n \t\t\t}\n@@ -801,6 +837,7 @@ public class ReferenceBuilder {\n \t\t\tthrow new RuntimeException(\"Unknown TypeBinding: \" + binding.getClass() + \" \" + binding);\n \t\t}\n \t\tbindingCache.remove(binding);\n+\t\tthis.exploringParameterizedBindings.clear();\n \t\treturn (CtTypeReference<T>) ref;\n \t}\n \ndiff --git a/src/main/java/spoon/support/reflect/reference/CtExecutableReferenceImpl.java b/src/main/java/spoon/support/reflect/reference/CtExecutableReferenceImpl.java\nindex a194b82..94d6a33 100644\n--- a/src/main/java/spoon/support/reflect/reference/CtExecutableReferenceImpl.java\n+++ b/src/main/java/spoon/support/reflect/reference/CtExecutableReferenceImpl.java\n@@ -315,7 +315,9 @@ public class CtExecutableReferenceImpl<T> extends CtReferenceImpl implements CtE\n \t\t\t\tcontinue;\n \t\t\t}\n \t\t\tfor (int i = 0; i < parameters.size(); i++) {\n-\t\t\t\tif (m.getParameterTypes()[i] != parameters.get(i).getActualClass()) {\n+\t\t\t\tClass<?> methodParameterType = m.getParameterTypes()[i];\n+\t\t\t\tClass<?> currentParameterType = parameters.get(i).getActualClass();\n+\t\t\t\tif (methodParameterType != currentParameterType) {\n \t\t\t\t\tcontinue method_loop;\n \t\t\t\t}\n \t\t\t}\ndiff --git a/src/main/java/spoon/support/reflect/reference/CtTypeParameterReferenceImpl.java b/src/main/java/spoon/support/reflect/reference/CtTypeParameterReferenceImpl.java\nindex 3267dd6..0fe88f8 100644\n--- a/src/main/java/spoon/support/reflect/reference/CtTypeParameterReferenceImpl.java\n+++ b/src/main/java/spoon/support/reflect/reference/CtTypeParameterReferenceImpl.java\n@@ -178,7 +178,8 @@ public class CtTypeParameterReferenceImpl extends CtTypeReferenceImpl<Object> im\n \t\tCtElement e = this;\n \t\tCtElement parent = getParent();\n \t\tif (parent instanceof CtExecutableReference) {\n-\t\t\tCtElement parent2 = parent.getParent();\n+\n+\t\t\tCtElement parent2 = ((CtExecutableReference) parent).getDeclaration();\n \t\t\tif (parent2 instanceof CtMethod) {\n \t\t\t\te = parent2;\n \t\t\t} else {\n", 
    "projectMetrics": {
      "numberSourceFiles": 486, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 516, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 191414952, 
        "hostName": "local", 
        "totalMemory": 252182528, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 3:50:12 PM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/237627560/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            1, 
            0, 
            0, 
            0, 
            72
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 73
        }, 
        "testing": {
          "stepDurations": [
            210
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 210
        }, 
        "cloning": {
          "stepDurations": [
            19
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 19
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 3:40:44 PM", 
      "totalDuration": 562
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1093, 
        "numberRunning": 1095, 
        "numberFailing": 2, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 1
          }, 
          {
            "failureName": "org.junit.ComparisonFailure", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/238234811", 
      "failingClasses": [
        {
          "numberPassing": 1, 
          "numberRunning": 2, 
          "testClass": "spoon.test.prettyprinter.LinesTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }, 
        {
          "numberPassing": 8, 
          "numberRunning": 9, 
          "testClass": "spoon.test.trycatch.TryCatchTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "java.lang.AssertionError", 
          "testMethod": "testPrettyPrinterWithLines", 
          "isError": false, 
          "testClass": "spoon.test.prettyprinter.LinesTest"
        }, 
        {
          "failureName": "org.junit.ComparisonFailure", 
          "testMethod": "testMultiTryCatchWithCustomExceptions", 
          "testClass": "spoon.test.trycatch.TryCatchTest", 
          "detail": "expected:<[]catch (spoon.test.tr...> but was:<[ ]catch (spoon.test.tr...>", 
          "isError": false
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/238235509", 
        "date": "Jun 1, 2017 9:35:46 AM", 
        "id": 238235509
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/238234811", 
        "date": "Jun 1, 2017 9:33:55 AM", 
        "id": 238234811
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/d3a9c911046c1ca36fd193d5f333ed8f8e3e76d7", 
        "sha": "d3a9c911046c1ca36fd193d5f333ed8f8e3e76d7", 
        "branchName": "master", 
        "date": "Jun 1, 2017 9:27:28 AM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/419d8133ce970465eb018f074d251a7a26562de9", 
        "sha": "419d8133ce970465eb018f074d251a7a26562de9", 
        "branchName": "master", 
        "date": "Jun 1, 2017 9:25:20 AM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-238234811-238235509", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 486, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 516, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 4, 
        "numberDeleted": 2
      }
    }, 
    "bugId": "Bears_60", 
    "diff": "diff --git a/src/main/java/spoon/support/reflect/declaration/CtElementImpl.java b/src/main/java/spoon/support/reflect/declaration/CtElementImpl.java\nindex c775076..9b90830 100644\n--- a/src/main/java/spoon/support/reflect/declaration/CtElementImpl.java\n+++ b/src/main/java/spoon/support/reflect/declaration/CtElementImpl.java\n@@ -31,8 +31,8 @@ import spoon.reflect.visitor.DefaultJavaPrettyPrinter;\n import spoon.reflect.visitor.Filter;\n import spoon.reflect.visitor.ModelConsistencyChecker;\n import spoon.reflect.visitor.Query;\n-import spoon.reflect.visitor.chain.CtFunction;\n import spoon.reflect.visitor.chain.CtConsumableFunction;\n+import spoon.reflect.visitor.chain.CtFunction;\n import spoon.reflect.visitor.chain.CtQuery;\n import spoon.reflect.visitor.filter.AnnotationFilter;\n import spoon.support.util.EmptyClearableList;\n@@ -228,7 +228,9 @@ public abstract class CtElementImpl implements CtElement, Serializable {\n \t\t\tLOGGER.error(ERROR_MESSAGE_TO_STRING, ignore);\n \t\t\terrorMessage = ERROR_MESSAGE_TO_STRING;\n \t\t}\n-\t\treturn printer.toString() + errorMessage;\n+\t\t// in line-preservation mode, newlines are added at the beginning to matches the lines\n+\t\t// removing them from the toString() representation\n+\t\treturn printer.toString().replaceFirst(\"^\\\\s+\", \"\") + errorMessage;\n \t}\n \n \t@SuppressWarnings(\"unchecked\")\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 361580648, 
        "hostName": "spirals-bears", 
        "totalMemory": 450887680, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 10, 2018 3:49:52 AM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/238234811/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            1, 
            69
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 70
        }, 
        "testing": {
          "stepDurations": [
            265
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 265
        }, 
        "cloning": {
          "stepDurations": [
            10
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 10
        }
      }, 
      "reproductionDateBeginning": "Dec 10, 2018 3:38:29 AM", 
      "totalDuration": 676
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1096, 
        "numberRunning": 1097, 
        "numberFailing": 1, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "org.junit.ComparisonFailure", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/239865488", 
      "failureDetails": [
        {
          "failureName": "org.junit.ComparisonFailure", 
          "detail": "expected:<spoon.reflect.code.C[tComment$C]ommentType> but was:<spoon.reflect.code.C[]ommentType>", 
          "isError": false, 
          "testMethod": "testCreateTypeRef", 
          "testClass": "spoon.test.factory.TypeFactoryTest"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 2, 
          "numberRunning": 3, 
          "testClass": "spoon.test.factory.TypeFactoryTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/239871875", 
        "date": "Jun 6, 2017 10:31:33 AM", 
        "id": 239871875
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/239865488", 
        "date": "Jun 6, 2017 10:07:02 AM", 
        "id": 239865488
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/acda3dd7f0377564c9c6e4f31ab485490c9e2c62", 
        "sha": "acda3dd7f0377564c9c6e4f31ab485490c9e2c62", 
        "branchName": "master", 
        "date": "Jun 6, 2017 10:23:19 AM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/e95e933309dfd90ce178f88cb192b514439f960c", 
        "sha": "e95e933309dfd90ce178f88cb192b514439f960c", 
        "branchName": "master", 
        "date": "Jun 6, 2017 9:58:27 AM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-239865488-239871875", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 486, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 518, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 0, 
        "numberDeleted": 4
      }
    }, 
    "bugId": "Bears_61", 
    "diff": "diff --git a/src/main/java/spoon/reflect/factory/CodeFactory.java b/src/main/java/spoon/reflect/factory/CodeFactory.java\nindex d7287e2..48f5a83 100644\n--- a/src/main/java/spoon/reflect/factory/CodeFactory.java\n+++ b/src/main/java/spoon/reflect/factory/CodeFactory.java\n@@ -573,6 +573,10 @@ public class CodeFactory extends SubFactory {\n \t\tif (originalClass.isPrimitive()) {\n \t\t\treturn typeReference;\n \t\t}\n+\t\tif (originalClass.getDeclaringClass() != null) {\n+\t\t\t// the inner class reference does not have package\n+\t\t\treturn typeReference.setDeclaringType(createCtTypeReference(originalClass.getDeclaringClass()));\n+\t\t}\n \t\treturn typeReference.setPackage(createCtPackageReference(originalClass.getPackage()));\n \t}\n \n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 304523232, 
        "hostName": "spirals-bears", 
        "totalMemory": 480772096, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 10, 2018 3:38:19 AM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/239865488/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            70
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 70
        }, 
        "testing": {
          "stepDurations": [
            258
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 258
        }, 
        "cloning": {
          "stepDurations": [
            11
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 11
        }
      }, 
      "reproductionDateBeginning": "Dec 10, 2018 3:27:18 AM", 
      "totalDuration": 654
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1097, 
        "numberRunning": 1099, 
        "numberFailing": 2, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 2
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/239871875", 
      "failingClasses": [
        {
          "numberPassing": 10, 
          "numberRunning": 12, 
          "testClass": "spoon.test.template.TemplateTest", 
          "numberFailing": 2, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "java.lang.AssertionError", 
          "testMethod": "testSimpleTemplate", 
          "testClass": "spoon.test.template.TemplateTest", 
          "detail": "expected:<0> but was:<1>", 
          "isError": false
        }, 
        {
          "failureName": "java.lang.AssertionError", 
          "testMethod": "testSubstitutionInsertAllNtoN", 
          "testClass": "spoon.test.template.TemplateTest", 
          "detail": "expected:<0> but was:<1>", 
          "isError": false
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/239928671", 
        "date": "Jun 6, 2017 1:47:42 PM", 
        "id": 239928671
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/239871875", 
        "date": "Jun 6, 2017 10:31:33 AM", 
        "id": 239871875
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/e95cd3fb968265d3757f40e290c9f7c4cad55afb", 
        "sha": "e95cd3fb968265d3757f40e290c9f7c4cad55afb", 
        "branchName": "master", 
        "date": "Jun 6, 2017 1:39:33 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/acda3dd7f0377564c9c6e4f31ab485490c9e2c62", 
        "sha": "acda3dd7f0377564c9c6e4f31ab485490c9e2c62", 
        "branchName": "master", 
        "date": "Jun 6, 2017 10:23:19 AM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-239871875-239928671", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 486, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 521, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 2, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 0, 
        "numberDeleted": 28
      }
    }, 
    "bugId": "Bears_62", 
    "diff": "diff --git a/src/main/java/spoon/support/visitor/ClassTypingContext.java b/src/main/java/spoon/support/visitor/ClassTypingContext.java\nindex f5ce921..36e5c58 100644\n--- a/src/main/java/spoon/support/visitor/ClassTypingContext.java\n+++ b/src/main/java/spoon/support/visitor/ClassTypingContext.java\n@@ -17,6 +17,7 @@\n package spoon.support.visitor;\n \n import java.util.ArrayList;\n+import java.util.Collections;\n import java.util.HashMap;\n import java.util.HashSet;\n import java.util.List;\n@@ -691,6 +692,19 @@ public class ClassTypingContext extends AbstractTypingContext {\n \t\t\t\t\t//the type cannot be adapted.\n \t\t\t\t\treturn false;\n \t\t\t\t}\n+\n+\t\t\t\t// we can be in a case where thisType is CtType and thatType is CtType<?>\n+\t\t\t\t// the types are not equals but it's overridden\n+\t\t\t\t// in that specific case we simply remove the list of actualTypeArguments from thatType\n+\t\t\t\tif (thisType.getActualTypeArguments().isEmpty() && thatType.getActualTypeArguments().size() == 1) {\n+\t\t\t\t\tCtTypeReference actualTA = thatType.getActualTypeArguments().get(0);\n+\t\t\t\t\tif (actualTA instanceof CtWildcardReference) {\n+\t\t\t\t\t\tif (((CtWildcardReference) actualTA).getBoundingType() == null) {\n+\t\t\t\t\t\t\tthatType.setActualTypeArguments(Collections.EMPTY_LIST);\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\n \t\t\t\tif (thisType.equals(thatType) == false) {\n \t\t\t\t\treturn false;\n \t\t\t\t}\ndiff --git a/src/main/java/spoon/template/Substitution.java b/src/main/java/spoon/template/Substitution.java\nindex 966fbd4..825c7df 100644\n--- a/src/main/java/spoon/template/Substitution.java\n+++ b/src/main/java/spoon/template/Substitution.java\n@@ -41,6 +41,7 @@ import spoon.support.template.SubstitutionVisitor;\n \n import java.lang.reflect.Field;\n import java.util.List;\n+import java.util.Set;\n \n /**\n  * This class defines the substitution API for templates (see {@link Template}).\n@@ -171,6 +172,7 @@ public abstract class Substitution {\n \t */\n \tstatic void insertAllMethods(CtType<?> targetType, Template<?> template, CtClass<?> sourceClass) {\n \n+\t\tSet<CtMethod<?>> methodsOfTemplate = sourceClass.getFactory().Type().get(Template.class).getMethods();\n \t\t// insert all the methods\n \t\tfor (CtMethod<?> m : sourceClass.getMethods()) {\n \t\t\tif (m.getAnnotation(Local.class) != null) {\n@@ -179,6 +181,18 @@ public abstract class Substitution {\n \t\t\tif (m.getAnnotation(Parameter.class) != null) {\n \t\t\t\tcontinue;\n \t\t\t}\n+\n+\t\t\tboolean isOverridingTemplateItf = false;\n+\t\t\tfor (CtMethod m2 : methodsOfTemplate) {\n+\t\t\t\tif (m.isOverriding(m2)) {\n+\t\t\t\t\tisOverridingTemplateItf = true;\n+\t\t\t\t}\n+\t\t\t}\n+\n+\t\t\tif (isOverridingTemplateItf) {\n+\t\t\t\tcontinue;\n+\t\t\t}\n+\n \t\t\tinsertMethod(targetType, template, m);\n \t\t}\n \t}\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 256503352, 
        "hostName": "spirals-bears", 
        "totalMemory": 464519168, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 10, 2018 3:36:06 AM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/239871875/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            66
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 66
        }, 
        "testing": {
          "stepDurations": [
            261
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 261
        }, 
        "cloning": {
          "stepDurations": [
            10
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 10
        }
      }, 
      "reproductionDateBeginning": "Dec 10, 2018 3:25:11 AM", 
      "totalDuration": 647
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1097, 
        "numberRunning": 1101, 
        "numberFailing": 4, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 4
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/240253890", 
      "failureDetails": [
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "Can't compile testclasses", 
          "isError": false, 
          "testMethod": "testConstructorCallGenerics", 
          "testClass": "spoon.test.generics.GenericsTest"
        }, 
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "expected:<1> but was:<0>", 
          "isError": false, 
          "testMethod": "testDiamondComplexGenericsRxJava", 
          "testClass": "spoon.test.generics.GenericsTest"
        }, 
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "Can't compile testclasses", 
          "isError": false, 
          "testMethod": "testNewClassGenerics", 
          "testClass": "spoon.test.generics.GenericsTest"
        }, 
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "Can't compile testclasses", 
          "isError": false, 
          "testMethod": "testInvocationGenerics", 
          "testClass": "spoon.test.generics.GenericsTest"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 33, 
          "numberRunning": 37, 
          "testClass": "spoon.test.generics.GenericsTest", 
          "numberFailing": 4, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/240366857", 
        "date": "Jun 7, 2017 3:22:56 PM", 
        "id": 240366857
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/240253890", 
        "date": "Jun 7, 2017 9:27:11 AM", 
        "id": 240253890
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/c3e72a990e1d507f010cdcdf6da4662f0848eedf", 
        "sha": "c3e72a990e1d507f010cdcdf6da4662f0848eedf", 
        "branchName": "master", 
        "date": "Jun 7, 2017 3:14:23 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/17f3a3fe7ce6ce1ea7a4f0226391b322996e7dd5", 
        "sha": "17f3a3fe7ce6ce1ea7a4f0226391b322996e7dd5", 
        "branchName": "master", 
        "date": "Jun 7, 2017 9:18:59 AM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-240253890-240366857", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 12, 
        "numberDeleted": 5
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_63", 
    "diff": "diff --git a/src/main/java/spoon/support/compiler/jdt/ReferenceBuilder.java b/src/main/java/spoon/support/compiler/jdt/ReferenceBuilder.java\nindex b842daa..3e81dbc 100644\n--- a/src/main/java/spoon/support/compiler/jdt/ReferenceBuilder.java\n+++ b/src/main/java/spoon/support/compiler/jdt/ReferenceBuilder.java\n@@ -86,10 +86,8 @@ import java.util.ArrayList;\n import java.util.Arrays;\n import java.util.Collections;\n import java.util.HashMap;\n-import java.util.HashSet;\n import java.util.List;\n import java.util.Map;\n-import java.util.Set;\n import java.util.TreeMap;\n import java.util.regex.Matcher;\n import java.util.regex.Pattern;\n@@ -102,7 +100,7 @@ public class ReferenceBuilder {\n \n \t// Allow to detect circular references and to avoid endless recursivity\n \t// when resolving parameterizedTypes (e.g. Enum<E extends Enum<E>>)\n-\tprivate Set<TypeBinding> exploringParameterizedBindings = new HashSet<>();\n+\tprivate Map<TypeBinding, CtTypeReference> exploringParameterizedBindings = new HashMap<>();\n \tprivate Map<String, CtTypeReference<?>> basestypes = new TreeMap<>();\n \n \tprivate boolean bounds = false;\n@@ -654,11 +652,16 @@ public class ReferenceBuilder {\n \t\t\t\t\tif (bindingCache.containsKey(b)) {\n \t\t\t\t\t\tref.addActualTypeArgument(getCtCircularTypeReference(b));\n \t\t\t\t\t} else {\n-\t\t\t\t\t\tif (!this.exploringParameterizedBindings.contains(b)) {\n-\t\t\t\t\t\t\tthis.exploringParameterizedBindings.add(b);\n-\t\t\t\t\t\t\tref.addActualTypeArgument(getTypeReference(b));\n+\t\t\t\t\t\tif (!this.exploringParameterizedBindings.containsKey(b)) {\n+\t\t\t\t\t\t\tthis.exploringParameterizedBindings.put(b, null);\n+\t\t\t\t\t\t\tCtTypeReference typeRefB = getTypeReference(b);\n+\t\t\t\t\t\t\tthis.exploringParameterizedBindings.put(b, typeRefB);\n+\t\t\t\t\t\t\tref.addActualTypeArgument(typeRefB);\n \t\t\t\t\t\t} else {\n-\t\t\t\t\t\t\tthis.exploringParameterizedBindings.remove(b);\n+\t\t\t\t\t\t\tCtTypeReference typeRefB = this.exploringParameterizedBindings.get(b);\n+\t\t\t\t\t\t\tif (typeRefB != null) {\n+\t\t\t\t\t\t\t\tref.addActualTypeArgument(typeRefB.clone());\n+\t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t}\n", 
    "projectMetrics": {
      "numberSourceFiles": 486, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 531, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 312288488, 
        "hostName": "spirals-bears", 
        "totalMemory": 503316480, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 10, 2018 3:33:22 AM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/240253890/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            68
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 68
        }, 
        "testing": {
          "stepDurations": [
            259
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 259
        }, 
        "cloning": {
          "stepDurations": [
            11
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 11
        }
      }, 
      "reproductionDateBeginning": "Dec 10, 2018 3:22:26 AM", 
      "totalDuration": 649
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1101, 
        "numberRunning": 1102, 
        "numberFailing": 1, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/240675027", 
      "failingClasses": [
        {
          "numberPassing": 1, 
          "numberRunning": 2, 
          "testClass": "spoon.reflect.declaration.CtTypeInformationTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "java.lang.AssertionError", 
          "isError": false, 
          "testClass": "spoon.reflect.declaration.CtTypeInformationTest", 
          "testMethod": "testClassTypingContextContinueScanning"
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/240677764", 
        "date": "Jun 8, 2017 9:14:10 AM", 
        "id": 240677764
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/240675027", 
        "date": "Jun 8, 2017 9:03:40 AM", 
        "id": 240675027
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/40326ca33374cd8ae60603fa48b95e7224792e10", 
        "sha": "40326ca33374cd8ae60603fa48b95e7224792e10", 
        "branchName": "master", 
        "date": "Jun 8, 2017 9:04:51 AM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/3ae28a102133049d0e85b9da19954f0b96b5bf97", 
        "sha": "3ae28a102133049d0e85b9da19954f0b96b5bf97", 
        "branchName": "master", 
        "date": "Jun 8, 2017 8:55:13 AM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-240675027-240677764", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 486, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 531, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 28, 
        "numberDeleted": 22
      }
    }, 
    "bugId": "Bears_64", 
    "diff": "diff --git a/src/main/java/spoon/support/visitor/ClassTypingContext.java b/src/main/java/spoon/support/visitor/ClassTypingContext.java\nindex 36e5c58..4cec550 100644\n--- a/src/main/java/spoon/support/visitor/ClassTypingContext.java\n+++ b/src/main/java/spoon/support/visitor/ClassTypingContext.java\n@@ -42,6 +42,7 @@ import spoon.reflect.reference.CtWildcardReference;\n import spoon.reflect.visitor.chain.CtConsumer;\n import spoon.reflect.visitor.chain.ScanningMode;\n import spoon.reflect.visitor.filter.SuperInheritanceHierarchyFunction;\n+import spoon.support.SpoonClassNotFoundException;\n \n /**\n  * Helper class created from type X or reference to X.\n@@ -188,6 +189,11 @@ public class ClassTypingContext extends AbstractTypingContext {\n \t\t\treturn null;\n \t\t}\n \t\tfinal HierarchyListener listener = new HierarchyListener(getVisitedSet());\n+\t\t/*\n+\t\t * remove last resolved class from the list of visited,\n+\t\t * because it would avoid visiting it's super hierarchy\n+\t\t */\n+\t\tgetVisitedSet().remove(lastResolvedSuperclass.getQualifiedName());\n \t\t/*\n \t\t * visit super inheritance class hierarchy of lastResolve type of level of `type` to found it's actual type arguments.\n \t\t */\n@@ -204,7 +210,29 @@ public class ClassTypingContext extends AbstractTypingContext {\n \t\t\t\t * which are going to be substituted as arguments to formal type parameters of super type\n \t\t\t\t */\n \t\t\t\tString superTypeQualifiedName = typeRef.getQualifiedName();\n-\t\t\t\tList<CtTypeReference<?>> superTypeActualTypeArgumentsResolvedFromSubType = resolveTypeParameters(typeRef.getActualTypeArguments());\n+\t\t\t\tList<CtTypeReference<?>> actualTypeArguments = typeRef.getActualTypeArguments();\n+\t\t\t\tif (actualTypeArguments.isEmpty()) {\n+\t\t\t\t\t//may be they are not set - check whether type declares some generic parameters\n+\t\t\t\t\tList<CtTypeParameter> typeParams;\n+\t\t\t\t\ttry {\n+\t\t\t\t\t\tCtType<?> type = typeRef.getTypeDeclaration();\n+\t\t\t\t\t\ttypeParams = type.getFormalCtTypeParameters();\n+\t\t\t\t\t} catch (final SpoonClassNotFoundException e) {\n+\t\t\t\t\t\tif (typeRef.getFactory().getEnvironment().getNoClasspath()) {\n+\t\t\t\t\t\t\ttypeParams = Collections.emptyList();\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\tthrow e;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t\tif (typeParams.size() > 0) {\n+\t\t\t\t\t\t//yes, there are generic type parameters. Reference should use actualTypeArguments computed from their bounds\n+\t\t\t\t\t\tactualTypeArguments = new ArrayList<>(typeParams.size());\n+\t\t\t\t\t\tfor (CtTypeParameter typeParam : typeParams) {\n+\t\t\t\t\t\t\tactualTypeArguments.add(typeParam.getTypeErasure());\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t\tList<CtTypeReference<?>> superTypeActualTypeArgumentsResolvedFromSubType = resolveTypeParameters(actualTypeArguments);\n \t\t\t\t//Remember actual type arguments of `type`\n \t\t\t\ttypeToArguments.put(superTypeQualifiedName, superTypeActualTypeArgumentsResolvedFromSubType);\n \t\t\t\tif (typeQualifiedName.equals(superTypeQualifiedName)) {\n@@ -216,6 +244,12 @@ public class ClassTypingContext extends AbstractTypingContext {\n \t\t\t\t}\n \t\t\t}\n \t\t});\n+\t\tif (listener.foundArguments == null) {\n+\t\t\t/*\n+\t\t\t * superclass was not found. We have scanned whole hierarchy\n+\t\t\t */\n+\t\t\tlastResolvedSuperclass = null;\n+\t\t}\n \t\treturn listener.foundArguments;\n \t}\n \n@@ -427,12 +461,11 @@ public class ClassTypingContext extends AbstractTypingContext {\n \t\t}\n \t\t@Override\n \t\tpublic ScanningMode enter(CtTypeReference<?> typeRef, boolean isClass) {\n-\t\t\tScanningMode mode = super.enter(typeRef);\n-\t\t\tif (mode == ScanningMode.SKIP_ALL) {\n-\t\t\t\t//this interface was already visited. Do not visit it again\n-\t\t\t\treturn mode;\n-\t\t\t}\n \t\t\tif (isClass) {\n+\t\t\t\t/*\n+\t\t\t\t * test foundArguments and skip all before call of super.enter,\n+\t\t\t\t * which would add that not visited type into visitedSet\n+\t\t\t\t */\n \t\t\t\tif (foundArguments != null) {\n \t\t\t\t\t//we have found result then we can finish before entering super class. All interfaces of found type should be still visited\n \t\t\t\t\t//skip before super class (and it's interfaces) of found type is visited\n@@ -445,6 +478,11 @@ public class ClassTypingContext extends AbstractTypingContext {\n \t\t\t\t */\n \t\t\t\tlastResolvedSuperclass = typeRef;\n \t\t\t}\n+\t\t\tScanningMode mode = super.enter(typeRef);\n+\t\t\tif (mode == ScanningMode.SKIP_ALL) {\n+\t\t\t\t//this interface was already visited. Do not visit it again\n+\t\t\t\treturn mode;\n+\t\t\t}\n \t\t\t//this type was not visited yet. Visit it normally\n \t\t\treturn ScanningMode.NORMAL;\n \t\t}\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 350738800, 
        "hostName": "spirals-bears", 
        "totalMemory": 519045120, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 10, 2018 3:29:23 AM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/240675027/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            1, 
            0, 
            0, 
            0, 
            66
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 67
        }, 
        "testing": {
          "stepDurations": [
            260
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 260
        }, 
        "cloning": {
          "stepDurations": [
            10
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 10
        }
      }, 
      "reproductionDateBeginning": "Dec 10, 2018 3:18:22 AM", 
      "totalDuration": 655
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1103, 
        "numberRunning": 1104, 
        "numberFailing": 1, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/241091669", 
      "failureDetails": [
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "The annotation must have a value expected:<1> but was:<0>", 
          "isError": false, 
          "testMethod": "testAnnotationValueReflection", 
          "testClass": "spoon.test.annotation.AnnotationTest"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 39, 
          "numberRunning": 40, 
          "testClass": "spoon.test.annotation.AnnotationTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/241205460", 
        "date": "Jun 9, 2017 4:11:35 PM", 
        "id": 241205460
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/241091669", 
        "date": "Jun 9, 2017 9:56:27 AM", 
        "id": 241091669
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/bf03cb208312146c33547bbdcf868f2fe0d54670", 
        "sha": "bf03cb208312146c33547bbdcf868f2fe0d54670", 
        "branchName": "master", 
        "date": "Jun 9, 2017 4:03:18 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/841edfc2a1163065084741c56abe4f556f9678b1", 
        "sha": "841edfc2a1163065084741c56abe4f556f9678b1", 
        "branchName": "master", 
        "date": "Jun 9, 2017 9:47:36 AM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-241091669-241205460", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 2, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 12, 
        "numberDeleted": 5
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_65", 
    "diff": "diff --git a/src/main/java/spoon/support/visitor/java/JavaReflectionTreeBuilder.java b/src/main/java/spoon/support/visitor/java/JavaReflectionTreeBuilder.java\nindex 91093fe..e380bbb 100644\n--- a/src/main/java/spoon/support/visitor/java/JavaReflectionTreeBuilder.java\n+++ b/src/main/java/spoon/support/visitor/java/JavaReflectionTreeBuilder.java\n@@ -217,10 +217,20 @@ public class JavaReflectionTreeBuilder extends JavaReflectionVisitorImpl {\n \t}\n \n \t@Override\n-\tpublic void visitAnnotation(Annotation annotation) {\n+\tpublic void visitAnnotation(final Annotation annotation) {\n \t\tfinal CtAnnotation<Annotation> ctAnnotation = factory.Core().createAnnotation();\n \n-\t\tenter(new AnnotationRuntimeBuilderContext(ctAnnotation));\n+\t\tenter(new AnnotationRuntimeBuilderContext(ctAnnotation) {\n+\t\t\t@Override\n+\t\t\tpublic void addMethod(CtMethod ctMethod) {\n+\t\t\t\ttry {\n+\t\t\t\t\tObject value = annotation.getClass().getMethod(ctMethod.getSimpleName()).invoke(annotation);\n+\t\t\t\t\tctAnnotation.addValue(ctMethod.getSimpleName(), value);\n+\t\t\t\t} catch (Exception ignore) {\n+\t\t\t\t\tctAnnotation.addValue(ctMethod.getSimpleName(), \"\");\n+\t\t\t\t}\n+\t\t\t}\n+\t\t});\n \t\tsuper.visitAnnotation(annotation);\n \t\texit();\n \ndiff --git a/src/main/java/spoon/support/visitor/java/JavaReflectionVisitorImpl.java b/src/main/java/spoon/support/visitor/java/JavaReflectionVisitorImpl.java\nindex 0711615..d4a7837 100644\n--- a/src/main/java/spoon/support/visitor/java/JavaReflectionVisitorImpl.java\n+++ b/src/main/java/spoon/support/visitor/java/JavaReflectionVisitorImpl.java\n@@ -154,6 +154,9 @@ class JavaReflectionVisitorImpl implements JavaReflectionVisitor {\n \tpublic void visitAnnotation(Annotation annotation) {\n \t\tif (annotation.annotationType() != null) {\n \t\t\tvisitClassReference(annotation.annotationType());\n+\t\t\tfor (RtMethod method : getDeclaredMethods(annotation.annotationType())) {\n+\t\t\t\tvisitMethod(method);\n+\t\t\t}\n \t\t}\n \t}\n \n", 
    "projectMetrics": {
      "numberSourceFiles": 488, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 532, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 322824504, 
        "hostName": "spirals-bears", 
        "totalMemory": 506986496, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 10, 2018 3:26:57 AM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/241091669/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            1, 
            0, 
            0, 
            70
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 71
        }, 
        "testing": {
          "stepDurations": [
            261
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 261
        }, 
        "cloning": {
          "stepDurations": [
            11
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 11
        }
      }, 
      "reproductionDateBeginning": "Dec 10, 2018 3:15:49 AM", 
      "totalDuration": 661
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1119, 
        "numberRunning": 1120, 
        "numberFailing": 1, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/244508852", 
      "failingClasses": [
        {
          "numberPassing": 21, 
          "numberRunning": 22, 
          "testClass": "spoon.test.lambda.LambdaTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "java.lang.AssertionError", 
          "testMethod": "testGetDeclarationOnTypeParameterFromLambda", 
          "isError": false, 
          "testClass": "spoon.test.lambda.LambdaTest"
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/244943489", 
        "date": "Jun 20, 2017 3:46:14 PM", 
        "id": 244943489
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/244508852", 
        "date": "Jun 19, 2017 3:00:31 PM", 
        "id": 244508852
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/953d7b8cdbc187c580b1096fe009459aade9923a", 
        "sha": "953d7b8cdbc187c580b1096fe009459aade9923a", 
        "branchName": "master", 
        "date": "Jun 20, 2017 3:36:49 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/293d8e872a7f0fb1bdaf8d151ab27a2f48548acc", 
        "sha": "293d8e872a7f0fb1bdaf8d151ab27a2f48548acc", 
        "branchName": "master", 
        "date": "Jun 19, 2017 2:51:37 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-244508852-244943489", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 3, 
        "numberDeleted": 8
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_66", 
    "diff": "diff --git a/src/main/java/spoon/support/reflect/reference/CtTypeParameterReferenceImpl.java b/src/main/java/spoon/support/reflect/reference/CtTypeParameterReferenceImpl.java\nindex 9b57cb7..943b762 100644\n--- a/src/main/java/spoon/support/reflect/reference/CtTypeParameterReferenceImpl.java\n+++ b/src/main/java/spoon/support/reflect/reference/CtTypeParameterReferenceImpl.java\n@@ -177,13 +177,18 @@ public class CtTypeParameterReferenceImpl extends CtTypeReferenceImpl<Object> im\n \n \t\tCtElement e = this;\n \t\tCtElement parent = getParent();\n+\t\tif (parent instanceof CtTypeReference) {\n+\t\t\tif (parent.isParentInitialized() == false) {\n+\t\t\t\treturn null;\n+\t\t\t}\n+\t\t\tparent = parent.getParent();\n+\t\t}\n \t\tif (parent instanceof CtExecutableReference) {\n-\n-\t\t\tCtElement parent2 = ((CtExecutableReference) parent).getDeclaration();\n+\t\t\tCtElement parent2 = ((CtExecutableReference) parent).getExecutableDeclaration();\n \t\t\tif (parent2 instanceof CtMethod) {\n \t\t\t\te = parent2;\n \t\t\t} else {\n-\t\t\t\te = ((CtExecutableReference<?>) parent).getDeclaringType().getTypeDeclaration();\n+\t\t\t\te = e.getParent(CtFormalTypeDeclarer.class);\n \t\t\t}\n \t\t} else {\n \t\t\te = e.getParent(CtFormalTypeDeclarer.class);\n", 
    "projectMetrics": {
      "numberSourceFiles": 490, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 551, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 292011736, 
        "hostName": "spirals-bears", 
        "totalMemory": 399507456, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 10, 2018 3:24:50 AM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/244508852/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            1, 
            0, 
            0, 
            0, 
            71
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 72
        }, 
        "testing": {
          "stepDurations": [
            286
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 286
        }, 
        "cloning": {
          "stepDurations": [
            11
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 11
        }
      }, 
      "reproductionDateBeginning": "Dec 10, 2018 3:13:09 AM", 
      "totalDuration": 695
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1123, 
        "numberRunning": 1125, 
        "numberFailing": 2, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 2
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/245681314", 
      "failureDetails": [
        {
          "failureName": "java.lang.AssertionError", 
          "isError": false, 
          "testClass": "spoon.reflect.declaration.CtTypeInformationTest", 
          "testMethod": "testGetAllMethodsWontReturnOverriddenMethod"
        }, 
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "expected:<62> but was:<61>", 
          "isError": false, 
          "testMethod": "testGetSuperclass", 
          "testClass": "spoon.reflect.declaration.CtTypeInformationTest"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 1, 
          "numberRunning": 3, 
          "testClass": "spoon.reflect.declaration.CtTypeInformationTest", 
          "numberFailing": 2, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/245682273", 
        "date": "Jun 22, 2017 10:17:07 AM", 
        "id": 245682273
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/245681314", 
        "date": "Jun 22, 2017 10:13:16 AM", 
        "id": 245681314
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/521f2307d4a639dcf7541f65a961609ce39d743f", 
        "sha": "521f2307d4a639dcf7541f65a961609ce39d743f", 
        "branchName": "master", 
        "date": "Jun 22, 2017 10:08:24 AM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/e6e2087f18f52f24c783652670b26fbac19150e0", 
        "sha": "e6e2087f18f52f24c783652670b26fbac19150e0", 
        "branchName": "master", 
        "date": "Jun 22, 2017 10:04:43 AM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-245681314-245682273", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 3, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 8, 
        "numberDeleted": 16
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_67", 
    "diff": "diff --git a/src/main/java/spoon/reflect/factory/ExecutableFactory.java b/src/main/java/spoon/reflect/factory/ExecutableFactory.java\nindex 662c89f..0499eca 100644\n--- a/src/main/java/spoon/reflect/factory/ExecutableFactory.java\n+++ b/src/main/java/spoon/reflect/factory/ExecutableFactory.java\n@@ -118,7 +118,7 @@ public class ExecutableFactory extends SubFactory {\n \t\t\treturn createReference(((CtMethod<T>) e).getDeclaringType().getReference(), isStatic, ((CtMethod<T>) e).getType().clone(), executableName, refs);\n \t\t} else if (e instanceof CtLambda) {\n \t\t\tCtMethod<T> lambdaMethod = ((CtLambda) e).getOverriddenMethod();\n-\t\t\treturn createReference(e.getParent(CtType.class).getReference(), lambdaMethod == null ? null : lambdaMethod.getType(), executableName, refs);\n+\t\t\treturn createReference(e.getParent(CtType.class).getReference(), lambdaMethod == null ? null : lambdaMethod.getType().clone(), executableName, refs);\n \t\t} else if (e instanceof CtAnonymousExecutable) {\n \t\t\treturn createReference(((CtAnonymousExecutable) e).getDeclaringType().getReference(), e.getType().clone(), executableName);\n \t\t}\ndiff --git a/src/main/java/spoon/support/reflect/declaration/CtTypeImpl.java b/src/main/java/spoon/support/reflect/declaration/CtTypeImpl.java\nindex 01af41f..b93915f 100644\n--- a/src/main/java/spoon/support/reflect/declaration/CtTypeImpl.java\n+++ b/src/main/java/spoon/support/reflect/declaration/CtTypeImpl.java\n@@ -52,6 +52,7 @@ import spoon.support.UnsettableProperty;\n import spoon.support.compiler.SnippetCompilationHelper;\n import spoon.support.util.QualifiedNameBasedSortedSet;\n import spoon.support.util.SignatureBasedSortedSet;\n+import spoon.support.visitor.ClassTypingContext;\n \n import java.lang.annotation.Annotation;\n import java.util.ArrayList;\n@@ -895,14 +896,18 @@ public abstract class CtTypeImpl<T> extends CtNamedElementImpl implements CtType\n \n \t@Override\n \tpublic Set<CtMethod<?>> getAllMethods() {\n-\t\tfinal Set<String> distinctSignatures = new HashSet<>();\n-\t\tfinal Set<CtMethod<?>> l = new SignatureBasedSortedSet<>();\n+\t\tfinal Set<CtMethod<?>> l = new HashSet<>();\n+\t\tfinal ClassTypingContext ctc = new ClassTypingContext(this);\n \t\tmap(new AllTypeMembersFunction(CtMethod.class)).forEach(new CtConsumer<CtMethod<?>>() {\n \t\t\t@Override\n-\t\t\tpublic void accept(CtMethod<?> method) {\n-\t\t\t\tif (distinctSignatures.add(method.getSignature())) {\n-\t\t\t\t\tl.add(method);\n+\t\t\tpublic void accept(CtMethod<?> currentMethod) {\n+\t\t\t\tfor (CtMethod<?> alreadyVisitedMethod : l) {\n+\t\t\t\t\tif (ctc.isSameSignature(currentMethod, alreadyVisitedMethod)) {\n+\t\t\t\t\t\treturn;\n+\t\t\t\t\t}\n \t\t\t\t}\n+\n+\t\t\t\tl.add(currentMethod);\n \t\t\t}\n \t\t});\n \t\treturn Collections.unmodifiableSet(l);\ndiff --git a/src/main/java/spoon/support/visitor/ClassTypingContext.java b/src/main/java/spoon/support/visitor/ClassTypingContext.java\nindex 4cec550..f148151 100644\n--- a/src/main/java/spoon/support/visitor/ClassTypingContext.java\n+++ b/src/main/java/spoon/support/visitor/ClassTypingContext.java\n@@ -423,6 +423,9 @@ public class ClassTypingContext extends AbstractTypingContext {\n \t */\n \t@Override\n \tprotected CtTypeReference<?> adaptTypeParameter(CtTypeParameter typeParam) {\n+\t\tif (typeParam == null) {\n+\t\t\tthrow new SpoonException(\"You cannot adapt a null type parameter.\");\n+\t\t}\n \t\tCtFormalTypeDeclarer declarer = typeParam.getTypeParameterDeclarer();\n \t\tif ((declarer instanceof CtType<?>) == false) {\n \t\t\treturn null;\n@@ -643,6 +646,10 @@ public class ClassTypingContext extends AbstractTypingContext {\n \t\tif (typeRef instanceof CtTypeParameterReference) {\n \t\t\tCtTypeParameterReference typeParamRef = (CtTypeParameterReference) typeRef;\n \t\t\tCtTypeParameter typeParam = typeParamRef.getDeclaration();\n+\t\t\tif (typeParam == null) {\n+\t\t\t\tthrow new SpoonException(\"Declaration of the CtTypeParameter should not be null.\");\n+\t\t\t}\n+\n \t\t\tif (typeParam.getTypeParameterDeclarer() instanceof CtExecutable) {\n \t\t\t\t//the parameter is declared in scope of Method or Constructor\n \t\t\t\treturn typeRef.clone();\n", 
    "projectMetrics": {
      "numberSourceFiles": 492, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 554, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 239423752, 
        "hostName": "spirals-bears", 
        "totalMemory": 477102080, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 10, 2018 3:12:25 AM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/245681314/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            1, 
            0, 
            0, 
            0, 
            76
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 77
        }, 
        "testing": {
          "stepDurations": [
            273
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 273
        }, 
        "cloning": {
          "stepDurations": [
            10
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 10
        }
      }, 
      "reproductionDateBeginning": "Dec 10, 2018 3:00:35 AM", 
      "totalDuration": 701
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1125, 
        "numberRunning": 1129, 
        "numberFailing": 4, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 4
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/245682273", 
      "failingClasses": [
        {
          "numberPassing": 8, 
          "numberRunning": 9, 
          "testClass": "spoon.test.variable.AccessFullyQualifiedFieldTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }, 
        {
          "numberPassing": 34, 
          "numberRunning": 37, 
          "testClass": "spoon.test.imports.ImportTest", 
          "numberFailing": 3, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "java.lang.AssertionError", 
          "testMethod": "testStaticMethodWithDifferentClassSameNameCollision", 
          "testClass": "spoon.test.imports.ImportTest", 
          "detail": "The file should not contain a static import ", 
          "isError": false
        }, 
        {
          "failureName": "java.lang.AssertionError", 
          "testMethod": "testNoFQNWhenUsedInInnerClassAndShadowedByLocalVariable", 
          "testClass": "spoon.test.variable.AccessFullyQualifiedFieldTest", 
          "detail": "The inner class should contain call using import", 
          "isError": false
        }, 
        {
          "failureName": "java.lang.AssertionError", 
          "testMethod": "testStaticMethodWithDifferentClassSameNameJava7NoCollision", 
          "testClass": "spoon.test.imports.ImportTest", 
          "detail": "The call to the last EnumTestSuite should be in FQN", 
          "isError": false
        }, 
        {
          "failureName": "java.lang.AssertionError", 
          "testMethod": "testStaticMethodWithDifferentClassSameNameJava3NoCollision", 
          "testClass": "spoon.test.imports.ImportTest", 
          "detail": "The file should not contain a static import ", 
          "isError": false
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/245809519", 
        "date": "Jun 22, 2017 4:32:20 PM", 
        "id": 245809519
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/245682273", 
        "date": "Jun 22, 2017 10:17:07 AM", 
        "id": 245682273
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/7badbe6c1b3db13cb8d92866a359ddad079f4ac6", 
        "sha": "7badbe6c1b3db13cb8d92866a359ddad079f4ac6", 
        "branchName": "master", 
        "date": "Jun 22, 2017 4:22:24 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/521f2307d4a639dcf7541f65a961609ce39d743f", 
        "sha": "521f2307d4a639dcf7541f65a961609ce39d743f", 
        "branchName": "master", 
        "date": "Jun 22, 2017 10:08:24 AM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-245682273-245809519", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 492, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 560, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 2, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 21, 
        "numberDeleted": 39
      }
    }, 
    "bugId": "Bears_68", 
    "diff": "diff --git a/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java b/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java\nindex fd7b96d..ff5d432 100644\n--- a/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java\n+++ b/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java\n@@ -1099,14 +1099,16 @@ public class DefaultJavaPrettyPrinter implements CtVisitor, PrettyPrinter {\n \t\t} else {\n \t\t\t// It's a method invocation\n \t\t\tprinter.snapshotLength();\n-\t\t\ttry (Writable _context = context.modify()) {\n-\t\t\t\tif (invocation.getTarget() instanceof CtTypeAccess) {\n-\t\t\t\t\t_context.ignoreGenerics(true);\n+\t\t\tif (!this.importsContext.isImported(invocation.getExecutable())) {\n+\t\t\t\ttry (Writable _context = context.modify()) {\n+\t\t\t\t\tif (invocation.getTarget() instanceof CtTypeAccess) {\n+\t\t\t\t\t\t_context.ignoreGenerics(true);\n+\t\t\t\t\t}\n+\t\t\t\t\tscan(invocation.getTarget());\n+\t\t\t\t}\n+\t\t\t\tif (printer.hasNewContent()) {\n+\t\t\t\t\tprinter.write(\".\");\n \t\t\t\t}\n-\t\t\t\tscan(invocation.getTarget());\n-\t\t\t}\n-\t\t\tif (printer.hasNewContent()) {\n-\t\t\t\tprinter.write(\".\");\n \t\t\t}\n \n \t\t\telementPrinterHelper.writeActualTypeArguments(invocation);\ndiff --git a/src/main/java/spoon/reflect/visitor/ImportScannerImpl.java b/src/main/java/spoon/reflect/visitor/ImportScannerImpl.java\nindex 49d65ff..d6ed362 100644\n--- a/src/main/java/spoon/reflect/visitor/ImportScannerImpl.java\n+++ b/src/main/java/spoon/reflect/visitor/ImportScannerImpl.java\n@@ -367,11 +367,19 @@ public class ImportScannerImpl extends CtScanner implements ImportScanner {\n \t */\n \tprivate boolean declaringTypeIsLocalOrImported(CtTypeReference declaringType) {\n \t\tif (declaringType != null) {\n-\t\t\tif (!isTypeInCollision(declaringType, false) && addClassImport(declaringType)) {\n-\t\t\t\treturn true;\n+\n+\t\t\tboolean isInCollision = isTypeInCollision(declaringType, false);\n+\t\t\tif (!isInCollision) {\n+\t\t\t\tboolean importSuccess = addClassImport(declaringType);\n+\t\t\t\tif (importSuccess) {\n+\t\t\t\t\treturn true;\n+\t\t\t\t}\n \t\t\t}\n \n-\t\t\tif (isImportedInClassImports(declaringType) || classNamePresentInJavaLang(declaringType)) {\n+\t\t\tboolean importedInClassImports = isImportedInClassImports(declaringType);\n+\t\t\tboolean inJavaLang = classNamePresentInJavaLang(declaringType);\n+\n+\t\t\tif (importedInClassImports || inJavaLang) {\n \t\t\t\treturn true;\n \t\t\t}\n \n@@ -386,7 +394,29 @@ public class ImportScannerImpl extends CtScanner implements ImportScanner {\n \t\treturn false;\n \t}\n \n+\t/**\n+\t * Test if the given executable reference is targeted a method name which is in collision with a method name of the current class\n+\t * @param ref\n+\t * @return\n+\t */\n+\tprivate boolean isInCollisionWithLocalMethod(CtExecutableReference ref) {\n+\t\tCtType<?> typeDecl = ref.getParent(CtType.class);\n+\n+\t\tString methodName = ref.getSimpleName();\n+\n+\t\tfor (CtMethod<?> method : typeDecl.getAllMethods()) {\n+\t\t\tif (method.getSimpleName().equals(methodName)) {\n+\t\t\t\treturn true;\n+\t\t\t}\n+\t\t}\n+\t\treturn false;\n+\t}\n+\n \tprotected boolean addMethodImport(CtExecutableReference ref) {\n+\t\t// static import is not supported below java 1.5\n+\t\tif (ref.getFactory().getEnvironment().getComplianceLevel() < 5) {\n+\t\t\treturn false;\n+\t\t}\n \t\tif (this.methodImports.containsKey(ref.getSimpleName())) {\n \t\t\treturn isImportedInMethodImports(ref);\n \t\t}\n@@ -396,6 +426,10 @@ public class ImportScannerImpl extends CtScanner implements ImportScanner {\n \t\t\treturn false;\n \t\t}\n \n+\t\tif (this.isInCollisionWithLocalMethod(ref)) {\n+\t\t\treturn false;\n+\t\t}\n+\n \t\tmethodImports.put(ref.getSimpleName(), ref);\n \n \t\t// if we are in the same package than target type, we also import class to avoid FQN in FQN mode.\n@@ -420,6 +454,10 @@ public class ImportScannerImpl extends CtScanner implements ImportScanner {\n \t}\n \n \tprotected boolean addFieldImport(CtFieldReference ref) {\n+\t\t// static import is not supported below java 1.5\n+\t\tif (ref.getFactory().getEnvironment().getComplianceLevel() < 5) {\n+\t\t\treturn false;\n+\t\t}\n \t\tif (this.fieldImports.containsKey(ref.getSimpleName())) {\n \t\t\treturn isImportedInFieldImports(ref);\n \t\t}\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 297912200, 
        "hostName": "spirals-bears", 
        "totalMemory": 403177472, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 10, 2018 3:12:20 AM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/245682273/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            1, 
            1, 
            0, 
            0, 
            75
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 77
        }, 
        "testing": {
          "stepDurations": [
            271
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 271
        }, 
        "cloning": {
          "stepDurations": [
            11
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 11
        }
      }, 
      "reproductionDateBeginning": "Dec 10, 2018 3:00:35 AM", 
      "totalDuration": 698
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1128, 
        "numberRunning": 1129, 
        "numberFailing": 1, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/246175274", 
      "failureDetails": [
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "expected:<[]> but was:<[@spoon.reflect.annotations.PropertyGetter(role = spoon.reflect.path.CtRole.EXPRESSION)\n<C extends spoon.reflect.declaration.CtCodeSnippet> C setValue(java.lang.String value);]>", 
          "isError": false, 
          "testMethod": "testGetterSetterFroRole", 
          "testClass": "spoon.test.api.MetamodelTest"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 2, 
          "numberRunning": 3, 
          "testClass": "spoon.test.api.MetamodelTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/246195936", 
        "date": "Jun 23, 2017 3:19:11 PM", 
        "id": 246195936
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/246175274", 
        "date": "Jun 23, 2017 2:18:32 PM", 
        "id": 246175274
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/99a84a7499413a45c6f1cbf6df7b37a12b1acb6b", 
        "sha": "99a84a7499413a45c6f1cbf6df7b37a12b1acb6b", 
        "branchName": "master", 
        "date": "Jun 23, 2017 3:10:34 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/d5fd5f3691accbbc23d794064bc4f7833c04231a", 
        "sha": "d5fd5f3691accbbc23d794064bc4f7833c04231a", 
        "branchName": "master", 
        "date": "Jun 23, 2017 2:10:02 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-246175274-246195936", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 492, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 560, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 10, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 18, 
        "numberDeleted": 18
      }
    }, 
    "bugId": "Bears_69", 
    "diff": "diff --git a/src/main/java/spoon/reflect/annotations/MetamodelPropertyField.java b/src/main/java/spoon/reflect/annotations/MetamodelPropertyField.java\nindex 3f9d999..b563912 100644\n--- a/src/main/java/spoon/reflect/annotations/MetamodelPropertyField.java\n+++ b/src/main/java/spoon/reflect/annotations/MetamodelPropertyField.java\n@@ -33,5 +33,5 @@ import java.lang.annotation.Target;\n @Retention(RetentionPolicy.RUNTIME)\n @Target({ ElementType.FIELD })\n public @interface MetamodelPropertyField {\n-\tCtRole role();\n+\tCtRole[] role();\n }\ndiff --git a/src/main/java/spoon/reflect/code/CtCase.java b/src/main/java/spoon/reflect/code/CtCase.java\nindex 5a92571..c0de369 100644\n--- a/src/main/java/spoon/reflect/code/CtCase.java\n+++ b/src/main/java/spoon/reflect/code/CtCase.java\n@@ -19,8 +19,7 @@ package spoon.reflect.code;\n import spoon.reflect.annotations.PropertyGetter;\n import spoon.reflect.annotations.PropertySetter;\n \n-import static spoon.reflect.path.CtRole.CASE;\n-\n+import static spoon.reflect.path.CtRole.EXPRESSION;\n \n /**\n  * This code element defines a case within a switch-case.\n@@ -40,13 +39,13 @@ public interface CtCase<S> extends CtStatement, CtStatementList {\n \t/**\n \t * Gets the case expression.\n \t */\n-\t@PropertyGetter(role = CASE)\n+\t@PropertyGetter(role = EXPRESSION)\n \tCtExpression<S> getCaseExpression();\n \n \t/**\n \t * Sets the case expression.\n \t */\n-\t@PropertySetter(role = CASE)\n+\t@PropertySetter(role = EXPRESSION)\n \t<T extends CtCase<S>> T setCaseExpression(CtExpression<S> caseExpression);\n \n \t@Override\ndiff --git a/src/main/java/spoon/reflect/code/CtCatch.java b/src/main/java/spoon/reflect/code/CtCatch.java\nindex c7dd808..6436d28 100644\n--- a/src/main/java/spoon/reflect/code/CtCatch.java\n+++ b/src/main/java/spoon/reflect/code/CtCatch.java\n@@ -46,7 +46,7 @@ public interface CtCatch extends CtCodeElement, CtBodyHolder {\n \t * Gets the catch's body.\n \t */\n \t@Override\n-\t@PropertySetter(role = BODY)\n+\t@PropertyGetter(role = BODY)\n \tCtBlock<?> getBody();\n \n \t@Override\ndiff --git a/src/main/java/spoon/reflect/code/CtConstructorCall.java b/src/main/java/spoon/reflect/code/CtConstructorCall.java\nindex 4771ef3..f375817 100644\n--- a/src/main/java/spoon/reflect/code/CtConstructorCall.java\n+++ b/src/main/java/spoon/reflect/code/CtConstructorCall.java\n@@ -75,6 +75,6 @@ public interface CtConstructorCall<T> extends CtTargetedExpression<T, CtExpressi\n \n \t@Override\n \t@DerivedProperty\n-\t@PropertySetter(role = TYPE)\n+\t@PropertyGetter(role = TYPE)\n \tCtTypeReference<T> getType();\n }\ndiff --git a/src/main/java/spoon/reflect/code/CtNewClass.java b/src/main/java/spoon/reflect/code/CtNewClass.java\nindex fb53fd0..2b5141c 100644\n--- a/src/main/java/spoon/reflect/code/CtNewClass.java\n+++ b/src/main/java/spoon/reflect/code/CtNewClass.java\n@@ -16,17 +16,17 @@\n  */\n package spoon.reflect.code;\n \n+import spoon.reflect.annotations.PropertyGetter;\n+import spoon.reflect.annotations.PropertySetter;\n import spoon.reflect.declaration.CtClass;\n import spoon.reflect.reference.CtActualTypeContainer;\n import spoon.reflect.reference.CtExecutableReference;\n import spoon.reflect.reference.CtTypeReference;\n import spoon.support.DerivedProperty;\n-import spoon.reflect.annotations.PropertyGetter;\n-import spoon.reflect.annotations.PropertySetter;\n \n import java.util.List;\n \n-import static spoon.reflect.path.CtRole.EXPRESSION;\n+import static spoon.reflect.path.CtRole.NESTED_TYPE;\n import static spoon.reflect.path.CtRole.TYPE_PARAMETER;\n \n /**\n@@ -77,13 +77,13 @@ public interface CtNewClass<T> extends CtConstructorCall<T> {\n \t/**\n \t * Gets the created class.\n \t */\n-\t@PropertyGetter(role = EXPRESSION)\n+\t@PropertyGetter(role = NESTED_TYPE)\n \tCtClass<?> getAnonymousClass();\n \n \t/**\n \t * Sets the created class.\n \t */\n-\t@PropertySetter(role = EXPRESSION)\n+\t@PropertySetter(role = NESTED_TYPE)\n \t<N extends CtNewClass> N setAnonymousClass(CtClass<?> anonymousClass);\n \n \t@Override\ndiff --git a/src/main/java/spoon/reflect/declaration/CtCodeSnippet.java b/src/main/java/spoon/reflect/declaration/CtCodeSnippet.java\nindex bada4f2..5745164 100644\n--- a/src/main/java/spoon/reflect/declaration/CtCodeSnippet.java\n+++ b/src/main/java/spoon/reflect/declaration/CtCodeSnippet.java\n@@ -36,13 +36,13 @@ public interface CtCodeSnippet {\n \t/**\n \t * Sets the textual value of the code.\n \t */\n-\t@PropertyGetter(role = EXPRESSION)\n+\t@PropertySetter(role = EXPRESSION)\n \t<C extends CtCodeSnippet> C setValue(String value);\n \n \t/**\n \t * Gets the textual value of the code.\n \t */\n-\t@PropertySetter(role = EXPRESSION)\n+\t@PropertyGetter(role = EXPRESSION)\n \tString getValue();\n \n }\ndiff --git a/src/main/java/spoon/reflect/declaration/CtModifiable.java b/src/main/java/spoon/reflect/declaration/CtModifiable.java\nindex 9053509..f7bb505 100644\n--- a/src/main/java/spoon/reflect/declaration/CtModifiable.java\n+++ b/src/main/java/spoon/reflect/declaration/CtModifiable.java\n@@ -18,6 +18,7 @@ package spoon.reflect.declaration;\n \n import spoon.reflect.annotations.PropertyGetter;\n import spoon.reflect.annotations.PropertySetter;\n+import spoon.support.DerivedProperty;\n \n import java.util.Set;\n \n@@ -80,6 +81,6 @@ public interface CtModifiable extends CtElement {\n \t/**\n \t * Gets the visibility of this modifiable element.\n \t */\n-\t@PropertyGetter(role = MODIFIER)\n+\t@DerivedProperty\n \tModifierKind getVisibility();\n }\ndiff --git a/src/main/java/spoon/support/reflect/code/CtCaseImpl.java b/src/main/java/spoon/support/reflect/code/CtCaseImpl.java\nindex a903880..534d6c8 100644\n--- a/src/main/java/spoon/support/reflect/code/CtCaseImpl.java\n+++ b/src/main/java/spoon/support/reflect/code/CtCaseImpl.java\n@@ -34,7 +34,7 @@ import static spoon.reflect.ModelElementContainerDefaultCapacities.CASE_STATEMEN\n public class CtCaseImpl<E> extends CtStatementImpl implements CtCase<E> {\n \tprivate static final long serialVersionUID = 1L;\n \n-\t@MetamodelPropertyField(role = CtRole.CASE)\n+\t@MetamodelPropertyField(role = CtRole.EXPRESSION)\n \tCtExpression<E> caseExpression;\n \n \t@MetamodelPropertyField(role = CtRole.STATEMENT)\ndiff --git a/src/main/java/spoon/support/reflect/code/CtNewClassImpl.java b/src/main/java/spoon/support/reflect/code/CtNewClassImpl.java\nindex c514639..d2fd191 100644\n--- a/src/main/java/spoon/support/reflect/code/CtNewClassImpl.java\n+++ b/src/main/java/spoon/support/reflect/code/CtNewClassImpl.java\n@@ -25,7 +25,7 @@ import spoon.reflect.annotations.MetamodelPropertyField;\n public class CtNewClassImpl<T> extends CtConstructorCallImpl<T> implements CtNewClass<T> {\n \tprivate static final long serialVersionUID = 1L;\n \n-\t@MetamodelPropertyField(role = CtRole.EXPRESSION)\n+\t@MetamodelPropertyField(role = CtRole.NESTED_TYPE)\n \tCtClass<?> anonymousClass;\n \n \t@Override\ndiff --git a/src/main/java/spoon/support/reflect/declaration/CtTypeImpl.java b/src/main/java/spoon/support/reflect/declaration/CtTypeImpl.java\nindex b93915f..7001146 100644\n--- a/src/main/java/spoon/support/reflect/declaration/CtTypeImpl.java\n+++ b/src/main/java/spoon/support/reflect/declaration/CtTypeImpl.java\n@@ -82,7 +82,7 @@ public abstract class CtTypeImpl<T> extends CtNamedElementImpl implements CtType\n \t@MetamodelPropertyField(role = CtRole.MODIFIER)\n \tSet<ModifierKind> modifiers = emptySet();\n \n-\t@MetamodelPropertyField(role = CtRole.FIELD)\n+\t@MetamodelPropertyField(role = {CtRole.FIELD, CtRole.EXECUTABLE, CtRole.NESTED_TYPE})\n \tList<CtTypeMember> typeMembers = emptyList();\n \n \tpublic CtTypeImpl() {\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 373699120, 
        "hostName": "spirals-bears", 
        "totalMemory": 521142272, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 10, 2018 3:12:04 AM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/246175274/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            1, 
            1, 
            0, 
            0, 
            73
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 75
        }, 
        "testing": {
          "stepDurations": [
            274
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 274
        }, 
        "cloning": {
          "stepDurations": [
            12
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 12
        }
      }, 
      "reproductionDateBeginning": "Dec 10, 2018 3:00:25 AM", 
      "totalDuration": 693
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1129, 
        "numberRunning": 1130, 
        "numberFailing": 0, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "java.lang.NullPointerException", 
            "isError": true, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/246216583", 
      "failingClasses": [
        {
          "numberPassing": 5, 
          "numberRunning": 6, 
          "testClass": "spoon.test.exceptions.ExceptionTest", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "java.lang.NullPointerException", 
          "isError": true, 
          "testClass": "spoon.test.exceptions.ExceptionTest", 
          "testMethod": "testUnionCatchExceptionInsideLambdaInNoClasspath"
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/246226768", 
        "date": "Jun 23, 2017 4:40:23 PM", 
        "id": 246226768
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/246216583", 
        "date": "Jun 23, 2017 4:15:16 PM", 
        "id": 246216583
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/c02968f6abc8672824766979627e503b987d8027", 
        "sha": "c02968f6abc8672824766979627e503b987d8027", 
        "branchName": "master", 
        "date": "Jun 23, 2017 4:32:08 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/1a344bf95e075c966e781d16228cff7f9921973e", 
        "sha": "1a344bf95e075c966e781d16228cff7f9921973e", 
        "branchName": "master", 
        "date": "Jun 23, 2017 4:06:31 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-246216583-246226768", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 492, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 560, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 9, 
        "numberDeleted": 2
      }
    }, 
    "bugId": "Bears_70", 
    "diff": "diff --git a/src/main/java/spoon/support/compiler/jdt/JDTTreeBuilder.java b/src/main/java/spoon/support/compiler/jdt/JDTTreeBuilder.java\nindex eef2458..cb0d187 100644\n--- a/src/main/java/spoon/support/compiler/jdt/JDTTreeBuilder.java\n+++ b/src/main/java/spoon/support/compiler/jdt/JDTTreeBuilder.java\n@@ -153,6 +153,7 @@ import spoon.reflect.declaration.CtTypeParameter;\n import spoon.reflect.declaration.ModifierKind;\n import spoon.reflect.factory.Factory;\n import spoon.reflect.reference.CtArrayTypeReference;\n+import spoon.reflect.reference.CtReference;\n import spoon.reflect.reference.CtTypeReference;\n import spoon.reflect.reference.CtUnboundVariableReference;\n import spoon.support.comparator.CtLineElementComparator;\n@@ -1415,7 +1416,15 @@ public class JDTTreeBuilder extends ASTVisitor {\n \t\t\treturn true;\n \t\t}\n \t\tif (context.stack.peekFirst().node instanceof UnionTypeReference) {\n-\t\t\tcontext.enter(references.<Throwable>getTypeReference(singleTypeReference.resolvedType), singleTypeReference);\n+\t\t\tif (singleTypeReference.resolvedType == null) {\n+\t\t\t\tCtTypeReference typeReference = factory.Type().createReference(singleTypeReference.toString());\n+\t\t\t\tCtReference ref = references.getDeclaringReferenceFromImports(singleTypeReference.getLastToken());\n+\t\t\t\treferences.setPackageOrDeclaringType(typeReference, ref);\n+\t\t\t\tcontext.enter(typeReference, singleTypeReference);\n+\t\t\t} else {\n+\t\t\t\tcontext.enter(references.<Throwable>getTypeReference(singleTypeReference.resolvedType), singleTypeReference);\n+\t\t\t}\n+\n \t\t\treturn true;\n \t\t} else if (context.stack.peekFirst().element instanceof CtCatch) {\n \t\t\tcontext.enter(helper.createCatchVariable(singleTypeReference), singleTypeReference);\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 318617824, 
        "hostName": "spirals-bears", 
        "totalMemory": 405274624, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 10, 2018 3:00:10 AM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/246216583/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            1, 
            0, 
            0, 
            0, 
            70
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 71
        }, 
        "testing": {
          "stepDurations": [
            269
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 269
        }, 
        "cloning": {
          "stepDurations": [
            12
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 12
        }
      }, 
      "reproductionDateBeginning": "Dec 10, 2018 2:48:41 AM", 
      "totalDuration": 682
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1133, 
        "numberRunning": 1135, 
        "numberFailing": 2, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 2
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/247837075", 
      "failureDetails": [
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "expected:<61> but was:<62>", 
          "isError": false, 
          "testMethod": "testGetSuperclass", 
          "testClass": "spoon.reflect.declaration.CtTypeInformationTest"
        }, 
        {
          "failureName": "java.lang.AssertionError", 
          "testClass": "spoon.test.generics.GenericsTest", 
          "testMethod": "testIsSameSignatureWithGenerics", 
          "isError": false
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 39, 
          "numberRunning": 40, 
          "testClass": "spoon.test.generics.GenericsTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }, 
        {
          "numberPassing": 2, 
          "numberRunning": 3, 
          "testClass": "spoon.reflect.declaration.CtTypeInformationTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/247951830", 
        "date": "Jun 28, 2017 4:18:22 PM", 
        "id": 247951830
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/247837075", 
        "date": "Jun 28, 2017 10:17:19 AM", 
        "id": 247837075
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/05df3b8c995cb3bbf1303d1a98dbe6224edee45c", 
        "sha": "05df3b8c995cb3bbf1303d1a98dbe6224edee45c", 
        "branchName": "master", 
        "date": "Jun 28, 2017 4:08:55 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/f984d8855a7017b11c55a578f0cd05e25743f9da", 
        "sha": "f984d8855a7017b11c55a578f0cd05e25743f9da", 
        "branchName": "master", 
        "date": "Jun 28, 2017 10:07:36 AM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-247837075-247951830", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 4, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 20, 
        "numberDeleted": 4
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_71", 
    "diff": "diff --git a/src/main/java/spoon/support/compiler/jdt/ReferenceBuilder.java b/src/main/java/spoon/support/compiler/jdt/ReferenceBuilder.java\nindex 3e81dbc..d7797f1 100644\n--- a/src/main/java/spoon/support/compiler/jdt/ReferenceBuilder.java\n+++ b/src/main/java/spoon/support/compiler/jdt/ReferenceBuilder.java\n@@ -632,6 +632,7 @@ public class ReferenceBuilder {\n \t\t\t\tref = getTypeReference(binding.actualType());\n \t\t\t} else {\n \t\t\t\tref = this.jdtTreeBuilder.getFactory().Core().createTypeReference();\n+\t\t\t\tthis.exploringParameterizedBindings.put(binding, ref);\n \t\t\t\tif (binding.isAnonymousType()) {\n \t\t\t\t\tref.setSimpleName(\"\");\n \t\t\t\t} else {\n@@ -702,7 +703,13 @@ public class ReferenceBuilder {\n \t\t\t\t// if the type parameter has a super class other than java.lang.Object, we get it\n \t\t\t\t// superClass.superclass() is null if it's java.lang.Object\n \t\t\t\tif (superClass != null && !(superClass.superclass() == null)) {\n-\t\t\t\t\trefSuperClass = this.getTypeReference(superClass);\n+\n+\t\t\t\t\t// this case could happen with Enum<E extends Enum<E>> for example:\n+\t\t\t\t\t// in that case we only want to have E -> Enum -> E\n+\t\t\t\t\t// to conserve the same behavior as JavaReflectionTreeBuilder\n+\t\t\t\t\tif (!(superClass instanceof ParameterizedTypeBinding) || !this.exploringParameterizedBindings.containsKey(superClass)) {\n+\t\t\t\t\t\trefSuperClass = this.getTypeReference(superClass);\n+\t\t\t\t\t}\n \n \t\t\t\t// if the type parameter has a super interface, then we'll get it too, as a superclass\n \t\t\t\t// type parameter can only extends an interface or a class, so we don't make the distinction\ndiff --git a/src/main/java/spoon/support/reflect/reference/CtExecutableReferenceImpl.java b/src/main/java/spoon/support/reflect/reference/CtExecutableReferenceImpl.java\nindex 8dddb38..12ad83e 100644\n--- a/src/main/java/spoon/support/reflect/reference/CtExecutableReferenceImpl.java\n+++ b/src/main/java/spoon/support/reflect/reference/CtExecutableReferenceImpl.java\n@@ -150,7 +150,10 @@ public class CtExecutableReferenceImpl<T> extends CtReferenceImpl implements CtE\n \t@SuppressWarnings(\"unchecked\")\n \tpublic CtExecutable<T> getDeclaration() {\n \t\tfinal CtTypeReference<?> typeRef = getDeclaringType();\n-\t\treturn typeRef == null ? null : getCtExecutable(typeRef.getDeclaration());\n+\t\tif (typeRef == null || typeRef.getDeclaration() == null) {\n+\t\t\treturn null;\n+\t\t}\n+\t\treturn getCtExecutable(typeRef.getDeclaration());\n \t}\n \n \t@Override\ndiff --git a/src/main/java/spoon/support/visitor/AbstractTypingContext.java b/src/main/java/spoon/support/visitor/AbstractTypingContext.java\nindex 46d9982..1cbb2ea 100644\n--- a/src/main/java/spoon/support/visitor/AbstractTypingContext.java\n+++ b/src/main/java/spoon/support/visitor/AbstractTypingContext.java\n@@ -71,9 +71,6 @@ abstract class AbstractTypingContext implements GenericTypeAdapter {\n \t\t\treturn adaptTypeParameterReferenceBoundingType(typeParamRef, typeParamRef.getBoundingType());\n \t\t}\n \t\tCtTypeReference<?> typeRefAdapted = adaptTypeParameter(typeParamRef.getDeclaration());\n-\t\tif (typeRefAdapted instanceof CtTypeParameterReference) {\n-\t\t\treturn adaptTypeParameterReferenceBoundingType((CtTypeParameterReference) typeRefAdapted, typeParamRef.getBoundingType());\n-\t\t}\n \t\treturn typeRefAdapted;\n \t}\n \ndiff --git a/src/main/java/spoon/support/visitor/java/JavaReflectionTreeBuilder.java b/src/main/java/spoon/support/visitor/java/JavaReflectionTreeBuilder.java\nindex e380bbb..3f410c1 100644\n--- a/src/main/java/spoon/support/visitor/java/JavaReflectionTreeBuilder.java\n+++ b/src/main/java/spoon/support/visitor/java/JavaReflectionTreeBuilder.java\n@@ -329,7 +329,12 @@ public class JavaReflectionTreeBuilder extends JavaReflectionVisitorImpl {\n \n \t@Override\n \tpublic void visitType(Type type) {\n-\t\tfinal CtTypeReference<?> ctTypeReference = factory.Core().createTypeReference();\n+\t\tCtTypeReference<?> ctTypeReference;\n+\t\tif (type instanceof TypeVariable) {\n+\t\t\tctTypeReference = factory.Core().createTypeParameterReference();\n+\t\t} else {\n+\t\t\tctTypeReference = factory.Core().createTypeReference();\n+\t\t}\n \t\tenter(new TypeReferenceRuntimeBuilderContext(ctTypeReference));\n \t\tctTypeReference.setSimpleName(getTypeName(type));\n \n", 
    "projectMetrics": {
      "numberSourceFiles": 509, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 563, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 374404216, 
        "hostName": "spirals-bears", 
        "totalMemory": 499122176, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 10, 2018 2:46:54 AM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/247837075/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            1, 
            0, 
            0, 
            0, 
            70
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 71
        }, 
        "testing": {
          "stepDurations": [
            283
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 283
        }, 
        "cloning": {
          "stepDurations": [
            11
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 11
        }
      }, 
      "reproductionDateBeginning": "Dec 10, 2018 2:35:02 AM", 
      "totalDuration": 704
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1140, 
        "numberRunning": 1141, 
        "numberFailing": 0, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "java.lang.NullPointerException", 
            "isError": true, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/248403517", 
      "failingClasses": [
        {
          "numberPassing": 6, 
          "numberRunning": 7, 
          "testClass": "spoon.test.prettyprinter.PrinterTest", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "java.lang.NullPointerException", 
          "testMethod": "testPrintingOfOrphanFieldReference", 
          "isError": true, 
          "testClass": "spoon.test.prettyprinter.PrinterTest"
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/248678183", 
        "date": "Jun 30, 2017 9:44:42 AM", 
        "id": 248678183
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/248403517", 
        "date": "Jun 29, 2017 5:11:50 PM", 
        "id": 248403517
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/bc9286a0d1f630052967cd373654ce5ccc63b8b1", 
        "sha": "bc9286a0d1f630052967cd373654ce5ccc63b8b1", 
        "branchName": "master", 
        "date": "Jun 30, 2017 9:35:45 AM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/096c8000575ef969165ddcea2dbc842de9cb416c", 
        "sha": "096c8000575ef969165ddcea2dbc842de9cb416c", 
        "branchName": "master", 
        "date": "Jun 29, 2017 4:56:30 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-248403517-248678183", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 12, 
        "numberDeleted": 26
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_72", 
    "diff": "diff --git a/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java b/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java\nindex 29a5a84..d2e069a 100644\n--- a/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java\n+++ b/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java\n@@ -16,6 +16,7 @@\n  */\n package spoon.reflect.visitor;\n \n+import spoon.SpoonException;\n import spoon.compiler.Environment;\n import spoon.reflect.code.CtAnnotationFieldAccess;\n import spoon.reflect.code.CtArrayAccess;\n@@ -67,6 +68,7 @@ import spoon.reflect.code.CtTry;\n import spoon.reflect.code.CtTryWithResource;\n import spoon.reflect.code.CtTypeAccess;\n import spoon.reflect.code.CtUnaryOperator;\n+import spoon.reflect.code.CtVariableAccess;\n import spoon.reflect.code.CtVariableRead;\n import spoon.reflect.code.CtVariableWrite;\n import spoon.reflect.code.CtWhile;\n@@ -292,12 +294,46 @@ public class DefaultJavaPrettyPrinter implements CtVisitor, PrettyPrinter {\n \t\t\t\t\tprinter.adjustStartPosition(e);\n \t\t\t\t}\n \t\t\t}\n-\t\t\te.accept(this);\n+\t\t\ttry {\n+\t\t\t\te.accept(this);\n+\t\t\t} catch (SpoonException ex) {\n+\t\t\t\tthrow ex;\n+\t\t\t} catch (Exception ex) {\n+\t\t\t\tString elementInfo = e.getClass().getName();\n+\t\t\t\telementInfo += \" on path \" + getPath(e) + \"\\n\";\n+\t\t\t\tif (e.getPosition() != null) {\n+\t\t\t\t\telementInfo += \"at position \" + e.getPosition().toString() + \" \";\n+\t\t\t\t}\n+\t\t\t\tthrow new SpoonException(\"Printing of \" + elementInfo + \"failed\", ex);\n+\t\t\t}\n \t\t\tcontext.elementStack.pop();\n \t\t}\n \t\treturn this;\n \t}\n \n+\tprivate static String getPath(CtElement ele) {\n+\t\tStringBuilder sb = new StringBuilder();\n+\t\taddParentPath(sb, ele);\n+\t\tif (ele instanceof CtVariableAccess) {\n+\t\t\tsb.append(':').append(((CtVariableAccess) ele).getVariable().getSimpleName());\n+\t\t}\n+\t\treturn sb.toString();\n+\t}\n+\tprivate static void addParentPath(StringBuilder sb, CtElement ele) {\n+\t\tif (ele == null || (ele instanceof CtPackage && ((CtPackage) ele).isUnnamedPackage())) {\n+\t\t\treturn;\n+\t\t}\n+\t\tif (ele.isParentInitialized()) {\n+\t\t\taddParentPath(sb, ele.getParent());\n+\t\t}\n+\t\tsb.append(\"\\n\\t\").append(ele.getClass().getSimpleName());\n+\t\tif (ele instanceof CtNamedElement) {\n+\t\t\tsb.append(\":\").append(((CtNamedElement) ele).getSimpleName());\n+\t\t} else if (ele instanceof CtReference) {\n+\t\t\tsb.append(\":\").append(((CtReference) ele).getSimpleName());\n+\t\t}\n+\t}\n+\n \t/**\n \t * The generic scan method for a reference.\n \t */\n", 
    "projectMetrics": {
      "numberSourceFiles": 509, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 567, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 254867376, 
        "hostName": "spirals-bears", 
        "totalMemory": 484442112, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 10, 2018 2:44:33 AM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/248403517/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            72
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 72
        }, 
        "testing": {
          "stepDurations": [
            288
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 288
        }, 
        "cloning": {
          "stepDurations": [
            12
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 12
        }
      }, 
      "reproductionDateBeginning": "Dec 10, 2018 2:32:43 AM", 
      "totalDuration": 703
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1140, 
        "numberRunning": 1141, 
        "numberFailing": 1, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/249529059", 
      "failureDetails": [
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "It must fail, because body of forEach should be called and thrown CCE", 
          "isError": false, 
          "testMethod": "testClassCastExceptionOnForEach", 
          "testClass": "spoon.test.filters.FilterTest"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 39, 
          "numberRunning": 40, 
          "testClass": "spoon.test.filters.FilterTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/249603843", 
        "date": "Jul 3, 2017 2:11:12 PM", 
        "id": 249603843
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/249529059", 
        "date": "Jul 3, 2017 9:57:32 AM", 
        "id": 249529059
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/3041002595d0497cca31f9c5fd65a706abec9117", 
        "sha": "3041002595d0497cca31f9c5fd65a706abec9117", 
        "branchName": "master", 
        "date": "Jul 3, 2017 2:01:45 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/41d7cd3360af9799d9c5cef98fd6bb3db3965bf1", 
        "sha": "41d7cd3360af9799d9c5cef98fd6bb3db3965bf1", 
        "branchName": "master", 
        "date": "Jul 3, 2017 9:48:26 AM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-249529059-249603843", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 509, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 567, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 9, 
        "numberDeleted": 3
      }
    }, 
    "bugId": "Bears_73", 
    "diff": "diff --git a/src/main/java/spoon/reflect/visitor/chain/CtQueryImpl.java b/src/main/java/spoon/reflect/visitor/chain/CtQueryImpl.java\nindex 651e21d..868e391 100644\n--- a/src/main/java/spoon/reflect/visitor/chain/CtQueryImpl.java\n+++ b/src/main/java/spoon/reflect/visitor/chain/CtQueryImpl.java\n@@ -339,9 +339,15 @@ public class CtQueryImpl implements CtQuery {\n \t\t\ttry {\n \t\t\t\tnextStep.accept(element);\n \t\t\t} catch (ClassCastException e) {\n-\t\t\t\tif (Launcher.LOGGER.isTraceEnabled()) {\n-\t\t\t\t\t//log expected CCE ... there might be some unexpected too!\n-\t\t\t\t\tLauncher.LOGGER.trace(e);\n+\t\t\t\tStackTraceElement[] stackEles = e.getStackTrace();\n+\t\t\t\tif (stackEles.length > 1 && stackEles[0].getClassName().equals(getClass().getName()) && stackEles[0].getMethodName().equals(\"accept\")) {\n+\t\t\t\t\tif (Launcher.LOGGER.isTraceEnabled()) {\n+\t\t\t\t\t\t//log expected CCE ... there might be some unexpected too!\n+\t\t\t\t\t\tLauncher.LOGGER.trace(e);\n+\t\t\t\t\t}\n+\t\t\t\t} else {\n+\t\t\t\t\t//Do not ignore this exception it is not expected!\n+\t\t\t\t\tthrow new SpoonException(\"Execution of query callback failed\", e);\n \t\t\t\t}\n \t\t\t}\n \t\t}\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 371006760, 
        "hostName": "spirals-bears", 
        "totalMemory": 493879296, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 10, 2018 3:39:57 PM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/249529059/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            1, 
            0, 
            0, 
            0, 
            69
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 70
        }, 
        "testing": {
          "stepDurations": [
            282
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 282
        }, 
        "cloning": {
          "stepDurations": [
            11
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 11
        }
      }, 
      "reproductionDateBeginning": "Dec 10, 2018 3:28:02 PM", 
      "totalDuration": 708
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1142, 
        "numberRunning": 1143, 
        "numberFailing": 1, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/254745624", 
      "failingClasses": [
        {
          "numberPassing": 26, 
          "numberRunning": 27, 
          "testClass": "spoon.test.reference.TypeReferenceTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "java.lang.AssertionError", 
          "testMethod": "testUnknownSuperClassWithSameNameInNoClasspath", 
          "testClass": "spoon.test.reference.TypeReferenceTest", 
          "detail": "Values should be different. Actual: it.feio.android.omninotes.models.Attachment", 
          "isError": false
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/256471804", 
        "date": "Jul 23, 2017 12:57:11 AM", 
        "id": 256471804
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/254745624", 
        "date": "Jul 18, 2017 9:38:30 AM", 
        "id": 254745624
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/d46c02d67c8eb04a198040de13e8ba9d63dba1c9", 
        "sha": "d46c02d67c8eb04a198040de13e8ba9d63dba1c9", 
        "branchName": "master", 
        "date": "Jul 23, 2017 12:47:48 AM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/e74f8dff1824eadf9ffb3ea86745215a52cca943", 
        "sha": "e74f8dff1824eadf9ffb3ea86745215a52cca943", 
        "branchName": "master", 
        "date": "Jul 18, 2017 9:29:04 AM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-254745624-256471804", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 509, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 568, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 0, 
        "numberDeleted": 4
      }
    }, 
    "bugId": "Bears_74", 
    "diff": "diff --git a/src/main/java/spoon/support/compiler/jdt/ReferenceBuilder.java b/src/main/java/spoon/support/compiler/jdt/ReferenceBuilder.java\nindex d7797f1..c53cd18 100644\n--- a/src/main/java/spoon/support/compiler/jdt/ReferenceBuilder.java\n+++ b/src/main/java/spoon/support/compiler/jdt/ReferenceBuilder.java\n@@ -540,6 +540,10 @@ public class ReferenceBuilder {\n \t\t\tCtPackageReference packageReference = index >= 0 ? packageFactory.getOrCreate(concatSubArray(namesParameterized, index)).getReference() : packageFactory.topLevel();\n \t\t\tinner.setPackage(packageReference);\n \t\t}\n+\t\tif (!res.toString().replace(\", ?\", \",?\").endsWith(CharOperation.toString(ref.getParameterizedTypeName()))) {\n+\t\t\t// verify that we did not match a class that have the same name in a different package\n+\t\t\treturn this.jdtTreeBuilder.getFactory().Type().createReference(CharOperation.toString(ref.getParameterizedTypeName()));\n+\t\t}\n \t\treturn res;\n \t}\n \n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 398275256, 
        "hostName": "spirals-bears", 
        "totalMemory": 472383488, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 10, 2018 3:38:10 PM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/254745624/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            1, 
            0, 
            0, 
            0, 
            72
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 73
        }, 
        "testing": {
          "stepDurations": [
            283
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 283
        }, 
        "cloning": {
          "stepDurations": [
            11
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 11
        }
      }, 
      "reproductionDateBeginning": "Dec 10, 2018 3:26:12 PM", 
      "totalDuration": 711
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1143, 
        "numberRunning": 1146, 
        "numberFailing": 3, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "org.junit.ComparisonFailure", 
            "isError": false, 
            "occurrences": 3
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/259378726", 
      "failureDetails": [
        {
          "failureName": "org.junit.ComparisonFailure", 
          "detail": "expected:<[]> but was:<[);]>", 
          "isError": false, 
          "testMethod": "testPositionAbstractMethod", 
          "testClass": "spoon.test.position.PositionTest"
        }, 
        {
          "failureName": "org.junit.ComparisonFailure", 
          "detail": "expected:<[public]> but was:<[description=\"fake\")\npublic int]>", 
          "isError": false, 
          "testMethod": "testPositionInterface", 
          "testClass": "spoon.test.position.PositionTest"
        }, 
        {
          "failureName": "org.junit.ComparisonFailure", 
          "detail": "expected:<[public abstrac]t> but was:<[RetentionPolicy.RUNTIME)  \npublic abstract @in]t>", 
          "isError": false, 
          "testMethod": "testPositionAnnotation", 
          "testClass": "spoon.test.position.PositionTest"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 7, 
          "numberRunning": 10, 
          "testClass": "spoon.test.position.PositionTest", 
          "numberFailing": 3, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/259664281", 
        "date": "Aug 1, 2017 9:41:36 AM", 
        "id": 259664281
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/259378726", 
        "date": "Jul 31, 2017 4:09:17 PM", 
        "id": 259378726
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/33acd0631ab0847c3beface62c10970a1664d809", 
        "sha": "33acd0631ab0847c3beface62c10970a1664d809", 
        "branchName": "master", 
        "date": "Aug 1, 2017 9:31:58 AM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/87faf50c4a3a7f81d6de9c88949209b6e0c39e72", 
        "sha": "87faf50c4a3a7f81d6de9c88949209b6e0c39e72", 
        "branchName": "master", 
        "date": "Jul 31, 2017 3:59:29 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-259378726-259664281", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 33, 
        "numberDeleted": 85
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_75", 
    "diff": "diff --git a/src/main/java/spoon/support/compiler/jdt/PositionBuilder.java b/src/main/java/spoon/support/compiler/jdt/PositionBuilder.java\nindex 573a8c2..94735e8 100644\n--- a/src/main/java/spoon/support/compiler/jdt/PositionBuilder.java\n+++ b/src/main/java/spoon/support/compiler/jdt/PositionBuilder.java\n@@ -16,16 +16,20 @@\n  */\n package spoon.support.compiler.jdt;\n \n+import org.eclipse.jdt.internal.compiler.CompilationResult;\n import org.eclipse.jdt.internal.compiler.ast.ASTNode;\n import org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration;\n import org.eclipse.jdt.internal.compiler.ast.AbstractVariableDeclaration;\n import org.eclipse.jdt.internal.compiler.ast.Annotation;\n+import org.eclipse.jdt.internal.compiler.ast.AnnotationMethodDeclaration;\n import org.eclipse.jdt.internal.compiler.ast.Expression;\n import org.eclipse.jdt.internal.compiler.ast.Javadoc;\n import org.eclipse.jdt.internal.compiler.ast.MethodDeclaration;\n import org.eclipse.jdt.internal.compiler.ast.TypeDeclaration;\n \n import org.eclipse.jdt.internal.compiler.ast.TypeParameter;\n+\n+import spoon.SpoonException;\n import spoon.reflect.code.CtStatementList;\n import spoon.reflect.cu.CompilationUnit;\n import spoon.reflect.cu.SourcePosition;\n@@ -54,13 +58,26 @@ public class PositionBuilder {\n \tSourcePosition buildPositionCtElement(CtElement e, ASTNode node) {\n \t\tCoreFactory cf = this.jdtTreeBuilder.getFactory().Core();\n \t\tCompilationUnit cu = this.jdtTreeBuilder.getFactory().CompilationUnit().create(new String(this.jdtTreeBuilder.getContextBuilder().compilationunitdeclaration.getFileName()));\n-\t\tint[] lineSeparatorPositions = this.jdtTreeBuilder.getContextBuilder().compilationunitdeclaration.compilationResult.lineSeparatorPositions;\n+\t\tCompilationResult cr = this.jdtTreeBuilder.getContextBuilder().compilationunitdeclaration.compilationResult;\n+\t\tint[] lineSeparatorPositions = cr.lineSeparatorPositions;\n+\t\tchar[] contents = cr.compilationUnit.getContents();\n+\n \n \t\tint sourceStart = node.sourceStart;\n \t\tint sourceEnd = node.sourceEnd;\n-\t\tif ((node instanceof Expression)) {\n-\t\t\tif (((Expression) node).statementEnd > 0) {\n-\t\t\t\tsourceEnd = ((Expression) node).statementEnd;\n+\t\tif ((node instanceof Annotation)) {\n+\t\t\tAnnotation ann = (Annotation) node;\n+\t\t\tint declEnd = ann.declarationSourceEnd;\n+\n+\t\t\tif (declEnd > 0) {\n+\t\t\t\tsourceEnd = declEnd;\n+\t\t\t}\n+\t\t} else if ((node instanceof Expression)) {\n+\t\t\tExpression expression = (Expression) node;\n+\t\t\tint statementEnd = expression.statementEnd;\n+\n+\t\t\tif (statementEnd > 0) {\n+\t\t\t\tsourceEnd = statementEnd;\n \t\t\t}\n \t\t}\n \n@@ -110,14 +127,18 @@ public class PositionBuilder {\n \t\t\tAnnotation[] annotations = typeDeclaration.annotations;\n \t\t\tif (annotations != null && annotations.length > 0) {\n \t\t\t\tif (annotations[0].sourceStart() == declarationSourceStart) {\n-\t\t\t\t\tmodifiersSourceStart = annotations[annotations.length - 1].sourceEnd() + 2;\n+\t\t\t\t\tmodifiersSourceStart = findNextNonWhitespace(contents, annotations[annotations.length - 1].declarationSourceEnd + 1);\n \t\t\t\t}\n \t\t\t}\n \t\t\tif (modifiersSourceStart == 0) {\n \t\t\t\tmodifiersSourceStart = declarationSourceStart;\n \t\t\t}\n-\t\t\t// the position the name minus the size of \"class\" minus at least 2 spaces\n-\t\t\tint modifiersSourceEnd = sourceStart - 8;\n+\t\t\t//look for start of first keyword before the type keyword e.g. \"class\". `sourceStart` points at first char of type name\n+\t\t\tint modifiersSourceEnd = findPrevNonWhitespace(contents, findPrevWhitespace(contents, findPrevNonWhitespace(contents, sourceStart - 1)));\n+\t\t\tif (modifiersSourceEnd < modifiersSourceStart) {\n+\t\t\t\t//there is no modifier\n+\t\t\t\tmodifiersSourceEnd = modifiersSourceStart - 1;\n+\t\t\t}\n \n \t\t\treturn cf.createBodyHolderSourcePosition(cu, sourceStart, sourceEnd,\n \t\t\t\t\tmodifiersSourceStart, modifiersSourceEnd,\n@@ -135,6 +156,13 @@ public class PositionBuilder {\n \t\t\tif (modifiersSourceStart == 0) {\n \t\t\t\tmodifiersSourceStart = declarationSourceStart;\n \t\t\t}\n+\n+\t\t\tif (node instanceof AnnotationMethodDeclaration && bodyStart == bodyEnd) {\n+\t\t\t\t//The \";\" at the end of annotation method declaration is not part of body\n+\t\t\t\t//let it behave same like in abstract MethodDeclaration\n+\t\t\t\tbodyEnd--;\n+\t\t\t}\n+\n \t\t\tJavadoc javadoc = methodDeclaration.javadoc;\n \t\t\tif (javadoc != null && javadoc.sourceEnd() > declarationSourceStart) {\n \t\t\t\tmodifiersSourceStart = javadoc.sourceEnd() + 1;\n@@ -170,24 +198,82 @@ public class PositionBuilder {\n \t\t\t\tif (bodyStart == 0) {\n \t\t\t\t\treturn SourcePosition.NOPOSITION;\n \t\t\t\t} else {\n+\t\t\t\t\tif (bodyStart < bodyEnd) {\n+\t\t\t\t\t\t//include brackets if they are there\n+\t\t\t\t\t\tif (contents[bodyStart - 1] == '{') {\n+\t\t\t\t\t\t\tbodyStart--;\n+\t\t\t\t\t\t\tif (contents[bodyEnd + 1] == '}') {\n+\t\t\t\t\t\t\t\tbodyEnd++;\n+\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\tthrow new SpoonException(\"Missing body end in\\n\" + new String(contents, sourceStart, sourceEnd - sourceStart));\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t}\n+\t\t\t\t\t}\n \t\t\t\t\treturn cf.createBodyHolderSourcePosition(cu,\n \t\t\t\t\t\t\tsourceStart, sourceEnd,\n \t\t\t\t\t\t\tmodifiersSourceStart, modifiersSourceEnd,\n \t\t\t\t\t\t\tdeclarationSourceStart, declarationSourceEnd,\n-\t\t\t\t\t\t\tbodyStart - 1, bodyEnd + 1,\n+\t\t\t\t\t\t\tbodyStart, bodyEnd,\n \t\t\t\t\t\t\tlineSeparatorPositions);\n \t\t\t\t}\n \t\t\t}\n \t\t}\n-\t\tif ((node instanceof Expression)) {\n-\t\t\tExpression expression = (Expression) node;\n-\t\t\tint statementEnd = expression.statementEnd;\n \n-\t\t\tif (statementEnd > 0) {\n-\t\t\t\tsourceEnd = statementEnd;\n+\t\treturn cf.createSourcePosition(cu, sourceStart, sourceEnd, lineSeparatorPositions);\n+\t}\n+\n+\t/**\n+\t * @return index of first non whitespace char, searching forward. Can return off if it is non whitespace.\n+\t */\n+\tprivate int findNextNonWhitespace(char[] content, int off) {\n+\t\twhile (off >= 0) {\n+\t\t\tchar c = content[off];\n+\t\t\tif (Character.isWhitespace(c) == false) {\n+\t\t\t\treturn off;\n \t\t\t}\n+\t\t\toff++;\n \t\t}\n+\t\treturn -1;\n+\t}\n \n-\t\treturn cf.createSourcePosition(cu, sourceStart, sourceEnd, lineSeparatorPositions);\n+\t/**\n+\t * @return index of first whitespace char, searching forward. Can return off if it is whitespace.\n+\t */\n+\tprivate int findNextWhitespace(char[] content, int off) {\n+\t\twhile (off >= 0) {\n+\t\t\tchar c = content[off];\n+\t\t\tif (Character.isWhitespace(c)) {\n+\t\t\t\treturn off;\n+\t\t\t}\n+\t\t\toff++;\n+\t\t}\n+\t\treturn -1;\n+\t}\n+\t/**\n+\t * @return index of first non whitespace char, searching backward. Can return off if it is non whitespace.\n+\t */\n+\tprivate int findPrevNonWhitespace(char[] content, int off) {\n+\t\twhile (off >= 0) {\n+\t\t\tchar c = content[off];\n+\t\t\tif (Character.isWhitespace(c) == false) {\n+\t\t\t\treturn off;\n+\t\t\t}\n+\t\t\toff--;\n+\t\t}\n+\t\treturn -1;\n+\t}\n+\n+\t/**\n+\t * @return index of first whitespace char, searching backward. Can return off if it is whitespace.\n+\t */\n+\tprivate int findPrevWhitespace(char[] content, int off) {\n+\t\twhile (off >= 0) {\n+\t\t\tchar c = content[off];\n+\t\t\tif (Character.isWhitespace(c)) {\n+\t\t\t\treturn off;\n+\t\t\t}\n+\t\t\toff--;\n+\t\t}\n+\t\treturn -1;\n \t}\n }\n", 
    "projectMetrics": {
      "numberSourceFiles": 509, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 571, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 389818024, 
        "hostName": "spirals-bears", 
        "totalMemory": 507510784, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 10, 2018 3:36:19 PM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/259378726/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            0, 
            0, 
            0, 
            74
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 74
        }, 
        "testing": {
          "stepDurations": [
            305
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 305
        }, 
        "cloning": {
          "stepDurations": [
            11
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 11
        }
      }, 
      "reproductionDateBeginning": "Dec 10, 2018 3:23:54 PM", 
      "totalDuration": 738
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1146, 
        "numberRunning": 1147, 
        "numberFailing": 1, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/259664281", 
      "failingClasses": [
        {
          "numberPassing": 18, 
          "numberRunning": 19, 
          "testClass": "spoon.test.template.TemplateTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "java.lang.AssertionError", 
          "testMethod": "testObjectIsNotParamTemplate", 
          "testClass": "spoon.test.template.TemplateTest", 
          "detail": "expected:<0> but was:<1>", 
          "isError": false
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/259695141", 
        "date": "Aug 1, 2017 11:39:46 AM", 
        "id": 259695141
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/259664281", 
        "date": "Aug 1, 2017 9:41:36 AM", 
        "id": 259664281
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/0da20b507607e5317e1acb33f44dfee1a54590aa", 
        "sha": "0da20b507607e5317e1acb33f44dfee1a54590aa", 
        "branchName": "master", 
        "date": "Aug 1, 2017 11:30:53 AM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/33acd0631ab0847c3beface62c10970a1664d809", 
        "sha": "33acd0631ab0847c3beface62c10970a1664d809", 
        "branchName": "master", 
        "date": "Aug 1, 2017 9:31:58 AM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-259664281-259695141", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 509, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 572, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 2, 
        "numberDeleted": 2
      }
    }, 
    "bugId": "Bears_76", 
    "diff": "diff --git a/src/main/java/spoon/support/template/Parameters.java b/src/main/java/spoon/support/template/Parameters.java\nindex ed93b9e..48ced1d 100644\n--- a/src/main/java/spoon/support/template/Parameters.java\n+++ b/src/main/java/spoon/support/template/Parameters.java\n@@ -268,8 +268,8 @@ public abstract class Parameters {\n \t\t\t//the reference to this is not template parameter\n \t\t\treturn false;\n \t\t}\n-\t\tif (getTemplateParameterType(ref.getFactory()).isSubtypeOf(ref.getType())) {\n-\t\t\t//the type of template field is or extends from class TemplateParameter.\n+\t\tif (TemplateParameter.class.getName().equals(ref.getType().getQualifiedName())) {\n+\t\t\t//the type of template field is TemplateParameter.\n \t\t\treturn true;\n \t\t}\n \t\treturn false;\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 283742472, 
        "hostName": "spirals-bears", 
        "totalMemory": 476053504, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 10, 2018 3:25:49 PM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/259664281/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            1, 
            0, 
            0, 
            0, 
            72
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 73
        }, 
        "testing": {
          "stepDurations": [
            294
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 294
        }, 
        "cloning": {
          "stepDurations": [
            12
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 12
        }
      }, 
      "reproductionDateBeginning": "Dec 10, 2018 3:13:33 PM", 
      "totalDuration": 729
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1148, 
        "numberRunning": 1149, 
        "numberFailing": 1, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "org.junit.ComparisonFailure", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/260087947", 
      "failureDetails": [
        {
          "failureName": "org.junit.ComparisonFailure", 
          "detail": "(/root/workspace/INRIA/spoon/260087947/src/test/java/spoon/test/comment/testclasses/WildComments.java:10) expected:<[/* test single line comments with nested * and */ and **/]> but was:<[test single line comments with nested * and */ and]>", 
          "isError": false, 
          "testMethod": "testWildComments", 
          "testClass": "spoon.test.comment.CommentTest"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 14, 
          "numberRunning": 15, 
          "testClass": "spoon.test.comment.CommentTest", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/260197957", 
        "date": "Aug 2, 2017 3:35:34 PM", 
        "id": 260197957
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/260087947", 
        "date": "Aug 2, 2017 9:55:33 AM", 
        "id": 260087947
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/dadbcf54d44fe493b2c299999ec4cad83d467e92", 
        "sha": "dadbcf54d44fe493b2c299999ec4cad83d467e92", 
        "branchName": "master", 
        "date": "Aug 2, 2017 3:26:00 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/e576dcd47b6fdcf74568b1f08482310cf326c7c0", 
        "sha": "e576dcd47b6fdcf74568b1f08482310cf326c7c0", 
        "branchName": "master", 
        "date": "Aug 2, 2017 9:46:43 AM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-260087947-260197957", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 3, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 82, 
        "numberDeleted": 23
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_77", 
    "diff": "diff --git a/src/main/java/spoon/reflect/code/CtComment.java b/src/main/java/spoon/reflect/code/CtComment.java\nindex 7bf0ac7..aff4a8c 100644\n--- a/src/main/java/spoon/reflect/code/CtComment.java\n+++ b/src/main/java/spoon/reflect/code/CtComment.java\n@@ -51,6 +51,13 @@ public interface CtComment extends CtStatement {\n \t\tBLOCK\n \t}\n \n+\t/**\n+\t * This line separator is used in comments returned by {@link #getContent()}.\n+\t * It is OS independent.\n+\t * It has no influence to pretty printed comments, which uses by default OS dependent line separator\n+\t */\n+\tString LINE_SEPARATOR = \"\\n\";\n+\n \t/**\n \t * Get the content of the comment\n \t * @return the content of the comment\ndiff --git a/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java b/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java\nindex b810ccc..3b5c8df 100644\n--- a/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java\n+++ b/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java\n@@ -168,11 +168,6 @@ public class DefaultJavaPrettyPrinter implements CtVisitor, PrettyPrinter {\n \t */\n \tpublic static final String BLOCK_COMMENT_START = \"/* \";\n \n-\t/**\n-\t * RegExp which matches all possible line separators\n-\t */\n-\tprivate static final String LINE_SEPARATORS_RE = \"\\\\n\\\\r|\\\\n|\\\\r\";\n-\n \t/**\n \t * The printing context.\n \t */\n@@ -904,7 +899,7 @@ public class DefaultJavaPrettyPrinter implements CtVisitor, PrettyPrinter {\n \t\t\tprinter.write(docTag.getParam()).writeln().writeTabs();\n \t\t}\n \n-\t\tString[] tagLines = docTag.getContent().split(LINE_SEPARATORS_RE);\n+\t\tString[] tagLines = docTag.getContent().split(CtComment.LINE_SEPARATOR);\n \t\tfor (int i = 0; i < tagLines.length; i++) {\n \t\t\tString com = tagLines[i];\n \t\t\tif (i > 0 || docTag.getType().hasParam()) {\n@@ -942,7 +937,7 @@ public class DefaultJavaPrettyPrinter implements CtVisitor, PrettyPrinter {\n \t\t\t\tprinter.write(content);\n \t\t\t\tbreak;\n \t\t\tdefault:\n-\t\t\t\tString[] lines = content.split(LINE_SEPARATORS_RE);\n+\t\t\t\tString[] lines = content.split(CtComment.LINE_SEPARATOR);\n \t\t\t\tfor (int i = 0; i < lines.length; i++) {\n \t\t\t\t\tString com = lines[i];\n \t\t\t\t\tif (comment.getCommentType() == CtComment.CommentType.BLOCK) {\ndiff --git a/src/main/java/spoon/support/compiler/jdt/JDTCommentBuilder.java b/src/main/java/spoon/support/compiler/jdt/JDTCommentBuilder.java\nindex f4b45c8..842eac9 100644\n--- a/src/main/java/spoon/support/compiler/jdt/JDTCommentBuilder.java\n+++ b/src/main/java/spoon/support/compiler/jdt/JDTCommentBuilder.java\n@@ -20,6 +20,8 @@ import org.apache.log4j.Logger;\n import org.eclipse.jdt.core.compiler.CharOperation;\n import org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration;\n import org.eclipse.jdt.internal.compiler.env.ICompilationUnit;\n+\n+import spoon.SpoonException;\n import spoon.reflect.code.CtBinaryOperator;\n import spoon.reflect.code.CtBlock;\n import spoon.reflect.code.CtBodyHolder;\n@@ -51,15 +53,20 @@ import spoon.reflect.visitor.CtInheritanceScanner;\n import spoon.reflect.visitor.CtScanner;\n import spoon.reflect.visitor.DefaultJavaPrettyPrinter;\n \n+import java.io.BufferedReader;\n+import java.io.CharArrayReader;\n import java.io.File;\n+import java.io.IOException;\n+import java.io.Reader;\n+import java.io.StringReader;\n import java.util.ArrayList;\n import java.util.Collection;\n import java.util.List;\n+import java.util.regex.Pattern;\n \n /**\n  * The comment builder that will insert all element of a CompilationUnitDeclaration into the Spoon AST\n  */\n-@SuppressWarnings(\"unchecked\")\n class JDTCommentBuilder {\n \n \tprivate static final Logger LOGGER = Logger.getLogger(JDTCommentBuilder.class);\n@@ -526,38 +533,60 @@ class JDTCommentBuilder {\n \t * @return the content of the comment\n \t */\n \tprivate String getCommentContent(int start, int end) {\n-\t\t//skip comment prefix\n-\t\tstart += 2;\n-\t\treturn cleanComment(new String(contents, start, end - start));\n+\t\treturn cleanComment(new CharArrayReader(contents, start, end - start));\n \t}\n \n \tpublic static String cleanComment(String comment) {\n-\t\tStringBuffer ret = new StringBuffer();\n-\t\tString[] lines = comment.split(\"\\n\");\n-\t\t// limit case\n-\t\tif (lines.length == 1) {\n-\t\t\treturn lines[0].replaceAll(\"^/\\\\*+ ?\", \"\").replaceAll(\"\\\\*+/$\", \"\").trim();\n-\t\t}\n+\t\treturn cleanComment(new StringReader(comment));\n+\t}\n \n-\t\tfor (String s : lines) {\n-\t\t\tString cleanUpLine = s.trim();\n-\t\t\tif (cleanUpLine.startsWith(\"/**\")) {\n-\t\t\t\tcleanUpLine = cleanUpLine.replaceAll(\"/\\\\*+ ?\", \"\");\n-\t\t\t} else if (cleanUpLine.endsWith(\"*/\")) {\n-\t\t\t\tcleanUpLine = cleanUpLine.replaceAll(\"\\\\*+/$\", \"\").replaceAll(\"^[ \\t]*\\\\*+ ?\", \"\");\n+\tprivate static final Pattern startCommentRE = Pattern.compile(\"^/\\\\*{1,2} ?\");\n+\tprivate static final Pattern middleCommentRE = Pattern.compile(\"^[ \\t]*\\\\*? ?\");\n+\tprivate static final Pattern endCommentRE = Pattern.compile(\"\\\\*/$\");\n+\n+\tprivate static String cleanComment(Reader comment) {\n+\t\tStringBuilder ret = new StringBuilder();\n+\t\ttry (BufferedReader br = new BufferedReader(comment)) {\n+\t\t\tString line = br.readLine();\n+\t\t\tif (line.length() < 2 || line.charAt(0) != '/') {\n+\t\t\t\tthrow new SpoonException(\"Unexpected beginning of comment\");\n+\t\t\t}\n+\t\t\tboolean isLastLine = false;\n+\t\t\tif (line.charAt(1) == '/') {\n+\t\t\t\t//it is single line comment, which starts with \"//\"\n+\t\t\t\tisLastLine = true;\n+\t\t\t\tline = line.substring(2);\n \t\t\t} else {\n-\t\t\t\tcleanUpLine = cleanUpLine.replaceAll(\"^[ \\t]*\\\\*+ ?\", \"\");\n+\t\t\t\t//it is potentially multiline comment, which starts with \"/*\" or \"/**\"\n+\t\t\t\t//check end first\n+\t\t\t\tif (line.endsWith(\"*/\")) {\n+\t\t\t\t\t//it is last line\n+\t\t\t\t\tline = endCommentRE.matcher(line).replaceFirst(\"\");\n+\t\t\t\t\tisLastLine = true;\n+\t\t\t\t}\n+\t\t\t\t//skip beginning\n+\t\t\t\tline = startCommentRE.matcher(line).replaceFirst(\"\");\n \t\t\t}\n-\t\t\tret.append(cleanUpLine);\n-\t\t\tret.append(\"\\n\");\n-\t\t}\n-\t\t// clean '\\r'\n-\t\tStringBuffer ret2 = new StringBuffer();\n-\t\tfor (int i = 0; i < ret.length(); i++) {\n-\t\t\tif (ret.charAt(i) != '\\r') {\n-\t\t\t\tret2.append(ret.charAt(i));\n+\t\t\t//append first line\n+\t\t\tret.append(line);\n+\t\t\twhile ((line = br.readLine()) != null) {\n+\t\t\t\tif (isLastLine) {\n+\t\t\t\t\tthrow new SpoonException(\"Unexpected next line after last line\");\n+\t\t\t\t}\n+\t\t\t\tif (line.endsWith(\"*/\")) {\n+\t\t\t\t\t//it is last line\n+\t\t\t\t\tline = endCommentRE.matcher(line).replaceFirst(\"\");\n+\t\t\t\t\tisLastLine = true;\n+\t\t\t\t}\n+\t\t\t\t//always clean middle comment, but after end comment is detected\n+\t\t\t\tline = middleCommentRE.matcher(line).replaceFirst(\"\");\n+\t\t\t\t//write next line - Note that Spoon model comment's lines are always separated by \"\\n\"\n+\t\t\t\tret.append(CtComment.LINE_SEPARATOR);\n+\t\t\t\tret.append(line);\n \t\t\t}\n+\t\t\treturn ret.toString().trim();\n+\t\t} catch (IOException e) {\n+\t\t\tthrow new SpoonException(e);\n \t\t}\n-\t\treturn ret2.toString().trim();\n \t}\n }\n", 
    "projectMetrics": {
      "numberSourceFiles": 509, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 574, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 276888848, 
        "hostName": "spirals-bears", 
        "totalMemory": 397410304, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 10, 2018 3:23:40 PM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/260087947/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            1, 
            1, 
            0, 
            0, 
            83
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 85
        }, 
        "testing": {
          "stepDurations": [
            302
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 302
        }, 
        "cloning": {
          "stepDurations": [
            12
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 12
        }
      }, 
      "reproductionDateBeginning": "Dec 10, 2018 3:10:55 PM", 
      "totalDuration": 758
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1149, 
        "numberRunning": 1150, 
        "numberFailing": 0, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "spoon.SpoonException", 
            "isError": true, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/260612138", 
      "failingClasses": [
        {
          "numberPassing": 10, 
          "numberRunning": 11, 
          "testClass": "spoon.test.prettyprinter.DefaultPrettyPrinterTest", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "spoon.SpoonException", 
          "testMethod": "testIssue1501", 
          "testClass": "spoon.test.prettyprinter.DefaultPrettyPrinterTest", 
          "detail": "spoon.SpoonException: Printing of spoon.support.reflect.code.CtFieldReadImpl on path \n CtPackageImpl:org\n CtPackageImpl:ethack\n CtPackageImpl:orwall\n CtClassImpl:PreferencesActivity\n CtClassImpl:NetworkPrefs\n CtFieldImpl:listener\n CtNewClassImpl\n CtClassImpl:1\n CtMethodImpl:onSharedPreferenceChanged\n CtBlockImpl\n CtIfImpl\n CtBlockImpl\n CtInvocationImpl\n CtFieldReadImpl:PARAM_ACTIVATE\nat position (/root/workspace/INRIA/spoon/260612138/src/test/resources/noclasspath/orwall/PreferencesActivity.java:126) failed", 
          "isError": true
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/265581135", 
        "date": "Aug 17, 2017 3:53:00 PM", 
        "id": 265581135
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/260612138", 
        "date": "Aug 3, 2017 3:49:11 PM", 
        "id": 260612138
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/27e3d3f895346849555bcd09e47968351dc04b31", 
        "sha": "27e3d3f895346849555bcd09e47968351dc04b31", 
        "branchName": "master", 
        "date": "Aug 17, 2017 3:43:09 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/fbf56d6f6628980965c3b2f8eab9ee9db1e3649c", 
        "sha": "fbf56d6f6628980965c3b2f8eab9ee9db1e3649c", 
        "branchName": "master", 
        "date": "Aug 3, 2017 3:39:32 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-260612138-265581135", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 1, 
        "numberDeleted": 1
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_78", 
    "diff": "diff --git a/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java b/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java\nindex b7bb8ad..672c64c 100644\n--- a/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java\n+++ b/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java\n@@ -780,7 +780,7 @@ public class DefaultJavaPrettyPrinter implements CtVisitor, PrettyPrinter {\n \t\t\t\tboolean isImportedField = importsContext.isImported(f.getVariable());\n \n \t\t\t\tif (!isInitializeStaticFinalField && !(isStaticField && isImportedField)) {\n-\t\t\t\t\tif (target.isImplicit()) {\n+\t\t\t\t\tif (target.isImplicit() && !(f.getVariable().getFieldDeclaration() == null && this.env.getNoClasspath())) {\n \t\t\t\t\t\t/*\n \t\t\t\t\t\t * target is implicit, check whether there is no conflict with an local variable, catch variable or parameter\n \t\t\t\t\t\t * in case of conflict make it explicit, otherwise the field access is shadowed by that variable.\n", 
    "projectMetrics": {
      "numberSourceFiles": 509, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 574, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 268591760, 
        "hostName": "spirals-bears", 
        "totalMemory": 403701760, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 10, 2018 3:23:29 PM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/260612138/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            1, 
            0, 
            0, 
            0, 
            80
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 81
        }, 
        "testing": {
          "stepDurations": [
            299
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 299
        }, 
        "cloning": {
          "stepDurations": [
            11
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 11
        }
      }, 
      "reproductionDateBeginning": "Dec 10, 2018 3:10:53 PM", 
      "totalDuration": 749
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1158, 
        "numberRunning": 1160, 
        "numberFailing": 2, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 2
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/270437105", 
      "failureDetails": [
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "Type NestedInterface is not a class", 
          "isError": false, 
          "testMethod": "testCallProcessorWithMultipleTypes", 
          "testClass": "spoon.test.processing.ProcessingTest"
        }, 
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "Type NestedInterface is not a class", 
          "isError": false, 
          "testMethod": "testProcessorWithGenericType", 
          "testClass": "spoon.test.processing.ProcessingTest"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 5, 
          "numberRunning": 7, 
          "testClass": "spoon.test.processing.ProcessingTest", 
          "numberFailing": 2, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/270439051", 
        "date": "Aug 31, 2017 4:35:21 PM", 
        "id": 270439051
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/270437105", 
        "date": "Aug 31, 2017 4:30:31 PM", 
        "id": 270437105
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/1d1ed44e13912f8131880119da287c317605e6e3", 
        "sha": "1d1ed44e13912f8131880119da287c317605e6e3", 
        "branchName": "master", 
        "date": "Aug 31, 2017 4:25:29 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/0e10a4eeb6426b1acd96e20a102a9d2f69f83334", 
        "sha": "0e10a4eeb6426b1acd96e20a102a9d2f69f83334", 
        "branchName": "master", 
        "date": "Aug 31, 2017 4:20:37 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-270437105-270439051", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 2, 
        "numberDeleted": 3
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_79", 
    "diff": "diff --git a/src/main/java/spoon/support/visitor/ProcessingVisitor.java b/src/main/java/spoon/support/visitor/ProcessingVisitor.java\nindex 268b27f..07212e5 100644\n--- a/src/main/java/spoon/support/visitor/ProcessingVisitor.java\n+++ b/src/main/java/spoon/support/visitor/ProcessingVisitor.java\n@@ -45,10 +45,11 @@ public class ProcessingVisitor extends CtScanner {\n \t\tif (!factory.getEnvironment().isProcessingStopped()\n \t\t\t\t&& processor.getProcessedElementTypes() != null) {\n \t\t\tfor (Object o : processor.getProcessedElementTypes()) {\n-\t\t\t\tif (((Class<?>) o).isAssignableFrom(e.getClass())) {\n-\t\t\t\t\treturn true;\n+\t\t\t\tif (!((Class<?>) o).isAssignableFrom(e.getClass())) {\n+\t\t\t\t\treturn false;\n \t\t\t\t}\n \t\t\t}\n+\t\t\treturn true;\n \t\t}\n \t\treturn false;\n \t}\n", 
    "projectMetrics": {
      "numberSourceFiles": 511, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 586, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 317172976, 
        "hostName": "spirals-bears", 
        "totalMemory": 481296384, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 10, 2018 3:12:21 PM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/270437105/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            1, 
            0, 
            0, 
            0, 
            76
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 77
        }, 
        "testing": {
          "stepDurations": [
            357
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 357
        }, 
        "cloning": {
          "stepDurations": [
            10
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 10
        }
      }, 
      "reproductionDateBeginning": "Dec 10, 2018 2:57:08 PM", 
      "totalDuration": 904
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1160, 
        "numberRunning": 1162, 
        "numberFailing": 1, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "spoon.compiler.InvalidClassPathException", 
            "isError": true, 
            "occurrences": 1
          }, 
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/270439051", 
      "failingClasses": [
        {
          "numberPassing": 11, 
          "numberRunning": 13, 
          "testClass": "spoon.test.compilation.CompilationTest", 
          "numberFailing": 1, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "spoon.compiler.InvalidClassPathException", 
          "testMethod": "testURLClassLoader", 
          "testClass": "spoon.test.compilation.CompilationTest", 
          "detail": "file:/root/workspace/INRIA/spoon/270439051/target/classes/ does not exist, it is not a valid folder", 
          "isError": true
        }, 
        {
          "failureName": "java.lang.AssertionError", 
          "testClass": "spoon.test.compilation.CompilationTest", 
          "testMethod": "testURLClassLoaderWithOtherResourcesThanOnlyFiles", 
          "isError": false
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/271649592", 
        "date": "Sep 4, 2017 1:43:38 PM", 
        "id": 271649592
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/270439051", 
        "date": "Aug 31, 2017 4:35:21 PM", 
        "id": 270439051
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/0e4787187d8d6192c43144de0fc91e5047fa867b", 
        "sha": "0e4787187d8d6192c43144de0fc91e5047fa867b", 
        "branchName": "master", 
        "date": "Sep 4, 2017 1:33:40 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/1d1ed44e13912f8131880119da287c317605e6e3", 
        "sha": "1d1ed44e13912f8131880119da287c317605e6e3", 
        "branchName": "master", 
        "date": "Aug 31, 2017 4:25:29 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-270439051-271649592", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 511, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 586, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 14, 
        "numberDeleted": 3
      }
    }, 
    "bugId": "Bears_80", 
    "diff": "diff --git a/src/main/java/spoon/support/StandardEnvironment.java b/src/main/java/spoon/support/StandardEnvironment.java\nindex 2d52b1f..0698044 100644\n--- a/src/main/java/spoon/support/StandardEnvironment.java\n+++ b/src/main/java/spoon/support/StandardEnvironment.java\n@@ -353,11 +353,22 @@ public class StandardEnvironment implements Serializable, Environment {\n \t\tif (aClassLoader instanceof URLClassLoader) {\n \t\t\tfinal URL[] urls = ((URLClassLoader) aClassLoader).getURLs();\n \t\t\tif (urls != null && urls.length > 0) {\n-\t\t\t\tList<String> classpath = new ArrayList<>();\n+\t\t\t\t// Check that the URLs are only file URLs\n+\t\t\t\tboolean onlyFileURLs = true;\n \t\t\t\tfor (URL url : urls) {\n-\t\t\t\t\tclasspath.add(url.toString());\n+\t\t\t\t\tif (!url.getProtocol().equals(\"file\")) {\n+\t\t\t\t\t\tonlyFileURLs = false;\n+\t\t\t\t\t}\n+\t\t\t\t}\n+\t\t\t\tif (onlyFileURLs) {\n+\t\t\t\t\tList<String> classpath = new ArrayList<>();\n+\t\t\t\t\tfor (URL url : urls) {\n+\t\t\t\t\t\tclasspath.add(url.getPath());\n+\t\t\t\t\t}\n+\t\t\t\t\tsetSourceClasspath(classpath.toArray(new String[0]));\n+\t\t\t\t} else {\n+\t\t\t\t\tthrow new SpoonException(\"Spoon does not support a URLClassLoader containing other resources than local file.\");\n \t\t\t\t}\n-\t\t\t\tsetSourceClasspath(classpath.toArray(new String[0]));\n \t\t\t}\n \t\t\treturn;\n \t\t}\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 349771488, 
        "hostName": "spirals-bears", 
        "totalMemory": 421527552, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 10, 2018 3:08:55 PM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/270439051/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            1, 
            0, 
            0, 
            0, 
            78
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 79
        }, 
        "testing": {
          "stepDurations": [
            305
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 305
        }, 
        "cloning": {
          "stepDurations": [
            11
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 11
        }
      }, 
      "reproductionDateBeginning": "Dec 10, 2018 2:53:48 PM", 
      "totalDuration": 898
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1162, 
        "numberRunning": 1163, 
        "numberFailing": 0, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "java.lang.StackOverflowError", 
            "isError": true, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/271649592", 
      "failureDetails": [
        {
          "failureName": "java.lang.StackOverflowError", 
          "testMethod": "testStackOverflow", 
          "isError": true, 
          "testClass": "spoon.test.reference.ElasticsearchStackoverflowTest"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 0, 
          "numberRunning": 1, 
          "testClass": "spoon.test.reference.ElasticsearchStackoverflowTest", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/272084174", 
        "date": "Sep 5, 2017 4:45:50 PM", 
        "id": 272084174
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/271649592", 
        "date": "Sep 4, 2017 1:43:38 PM", 
        "id": 271649592
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/82eb44bdc63e882696001b3a25f5e32ef2ec8526", 
        "sha": "82eb44bdc63e882696001b3a25f5e32ef2ec8526", 
        "branchName": "master", 
        "date": "Sep 5, 2017 4:35:43 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/0e4787187d8d6192c43144de0fc91e5047fa867b", 
        "sha": "0e4787187d8d6192c43144de0fc91e5047fa867b", 
        "branchName": "master", 
        "date": "Sep 4, 2017 1:33:40 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-271649592-272084174", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 8, 
        "numberDeleted": 4
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_81", 
    "diff": "diff --git a/src/main/java/spoon/support/reflect/reference/CtTypeParameterReferenceImpl.java b/src/main/java/spoon/support/reflect/reference/CtTypeParameterReferenceImpl.java\nindex f2bc30b..67611e8 100644\n--- a/src/main/java/spoon/support/reflect/reference/CtTypeParameterReferenceImpl.java\n+++ b/src/main/java/spoon/support/reflect/reference/CtTypeParameterReferenceImpl.java\n@@ -190,12 +190,18 @@ public class CtTypeParameterReferenceImpl extends CtTypeReferenceImpl<Object> im\n \t\t\tparent = parent.getParent();\n \t\t}\n \t\tif (parent instanceof CtExecutableReference) {\n-\t\t\tCtElement parent2 = ((CtExecutableReference) parent).getExecutableDeclaration();\n-\t\t\tif (parent2 instanceof CtMethod) {\n-\t\t\t\te = parent2;\n+\t\t\tCtExecutableReference parentExec = (CtExecutableReference) parent;\n+\t\t\tif (!parentExec.getDeclaringType().equals(e)) {\n+\t\t\t\tCtElement parent2 = parentExec.getExecutableDeclaration();\n+\t\t\t\tif (parent2 instanceof CtMethod) {\n+\t\t\t\t\te = parent2;\n+\t\t\t\t} else {\n+\t\t\t\t\te = e.getParent(CtFormalTypeDeclarer.class);\n+\t\t\t\t}\n \t\t\t} else {\n \t\t\t\te = e.getParent(CtFormalTypeDeclarer.class);\n \t\t\t}\n+\n \t\t} else {\n \t\t\te = e.getParent(CtFormalTypeDeclarer.class);\n \t\t}\n", 
    "projectMetrics": {
      "numberSourceFiles": 511, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 587, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 422054464, 
        "hostName": "spirals-bears", 
        "totalMemory": 491257856, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 10, 2018 3:08:46 PM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/271649592/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            1, 
            0, 
            0, 
            1, 
            82
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 84
        }, 
        "testing": {
          "stepDurations": [
            300
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 300
        }, 
        "cloning": {
          "stepDurations": [
            13
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 13
        }
      }, 
      "reproductionDateBeginning": "Dec 10, 2018 2:53:38 PM", 
      "totalDuration": 901
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1162, 
        "numberRunning": 1167, 
        "numberFailing": 5, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "org.junit.ComparisonFailure", 
            "isError": false, 
            "occurrences": 5
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/272467827", 
      "failingClasses": [
        {
          "numberPassing": 18, 
          "numberRunning": 23, 
          "testClass": "spoon.test.template.TemplateTest", 
          "numberFailing": 5, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "org.junit.ComparisonFailure", 
          "testMethod": "testExtensionDecoupledSubstitutionVisitor", 
          "testClass": "spoon.test.template.TemplateTest", 
          "detail": "expected:<....logger.Logger.exit([\"enter\"])> but was:<....logger.Logger.exit([this._methodName_])>", 
          "isError": false
        }, 
        {
          "failureName": "org.junit.ComparisonFailure", 
          "testMethod": "testFieldAccessNameSubstitutionInInnerClass", 
          "testClass": "spoon.test.template.TemplateTest", 
          "detail": "expected:<[value] = 7> but was:<[\"value\"] = 7>", 
          "isError": false
        }, 
        {
          "failureName": "org.junit.ComparisonFailure", 
          "testMethod": "testAnotherFieldAccessNameSubstitution", 
          "testClass": "spoon.test.template.TemplateTest", 
          "detail": "expected:<...System.out.println(([(x)] + (m_x)))> but was:<...System.out.println(([\"x\"] + (m_x)))>", 
          "isError": false
        }, 
        {
          "failureName": "org.junit.ComparisonFailure", 
          "testMethod": "testFieldAccessNameSubstitution", 
          "testClass": "spoon.test.template.TemplateTest", 
          "detail": "expected:<[value] = 7> but was:<[\"value\"] = 7>", 
          "isError": false
        }, 
        {
          "failureName": "org.junit.ComparisonFailure", 
          "testMethod": "testTemplateInheritance", 
          "testClass": "spoon.test.template.TemplateTest", 
          "detail": "expected:<[newVarName] = o> but was:<[\"newVarName\"] = o>", 
          "isError": false
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/272468614", 
        "date": "Sep 6, 2017 2:59:34 PM", 
        "id": 272468614
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/272467827", 
        "date": "Sep 6, 2017 2:57:28 PM", 
        "id": 272467827
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/25286d92e4c3f3c59865b904779d630f6d927ec9", 
        "sha": "25286d92e4c3f3c59865b904779d630f6d927ec9", 
        "branchName": "master", 
        "date": "Sep 6, 2017 2:49:41 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/3ccd1790a203b2ebe63cd0af796da9dac6760a14", 
        "sha": "3ccd1790a203b2ebe63cd0af796da9dac6760a14", 
        "branchName": "master", 
        "date": "Sep 6, 2017 2:47:46 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-272467827-272468614", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 511, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 591, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 3, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 22, 
        "numberDeleted": 56
      }
    }, 
    "bugId": "Bears_82", 
    "diff": "diff --git a/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java b/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java\nindex 033dc1b..5eff88b 100644\n--- a/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java\n+++ b/src/main/java/spoon/reflect/visitor/DefaultJavaPrettyPrinter.java\n@@ -787,6 +787,9 @@ public class DefaultJavaPrettyPrinter implements CtVisitor, PrettyPrinter {\n \t\t\t\t\t\t * Search for potential variable declaration until we found a class which declares or inherits this field\n \t\t\t\t\t\t */\n \t\t\t\t\t\tfinal CtField<?> field = f.getVariable().getFieldDeclaration();\n+\t\t\t\t\t\tif (field == null) {\n+\t\t\t\t\t\t\tthrow new SpoonException(\"The reference to field named \\\"\" + f.getVariable().getSimpleName() + \"\\\" is invalid, because there is no field with such name on path:\" + getPath(f));\n+\t\t\t\t\t\t}\n \t\t\t\t\t\tfinal String fieldName = field.getSimpleName();\n \t\t\t\t\t\tCtVariable<?> var = f.getVariable().map(new PotentialVariableDeclarationFunction(fieldName)).first();\n \t\t\t\t\t\tif (var != field) {\ndiff --git a/src/main/java/spoon/support/template/SubstitutionVisitor.java b/src/main/java/spoon/support/template/SubstitutionVisitor.java\nindex b0c1ecc..1ff0559 100644\n--- a/src/main/java/spoon/support/template/SubstitutionVisitor.java\n+++ b/src/main/java/spoon/support/template/SubstitutionVisitor.java\n@@ -243,11 +243,46 @@ public class SubstitutionVisitor extends CtScanner {\n \t\t\t\t\t\tthrow context.replace(toReplace, enumValueAccess);\n \t\t\t\t\t} else if ((value != null) && value.getClass().isArray()) {\n \t\t\t\t\t\tthrow context.replace(toReplace, factory.Code().createLiteralArray((Object[]) value));\n+\t\t\t\t\t} else if (fieldAccess == toReplace && value instanceof String) {\n+\t\t\t\t\t\t/*\n+\t\t\t\t\t\t * If the value is type String, then it is ambiguous request, because:\n+\t\t\t\t\t\t * A) sometime client wants to replace parameter field access by String literal\n+\t\t\t\t\t\t *\n+\t\t\t\t\t\t * @Parameter\n+\t\t\t\t\t\t * String field = \"x\"\n+\t\t\t\t\t\t *\n+\t\t\t\t\t\t * System.printLn(field) //is substitutes as: System.printLn(\"x\")\n+\t\t\t\t\t\t *\n+\t\t\t\t\t\t * but in the case of local variables it already behaves like this\n+\t\t\t\t\t\t * {\n+\t\t\t\t\t\t * \t\tint field;\n+\t\t\t\t\t\t * \t\tSystem.printLn(field) //is substitutes as: System.printLn(x)\n+\t\t\t\t\t\t * }\n+\t\t\t\t\t\t *\n+\t\t\t\t\t\t * B) sometime client wants to keep field access and just substitute field name\n+\t\t\t\t\t\t *\n+\t\t\t\t\t\t * @Parameter(\"field\")\n+\t\t\t\t\t\t * String fieldName = \"x\"\n+\t\t\t\t\t\t *\n+\t\t\t\t\t\t * System.printLn(field) //is substitutes as: System.printLn(x)\n+\t\t\t\t\t\t *\n+\t\t\t\t\t\t * ----------------------\n+\t\t\t\t\t\t *\n+\t\t\t\t\t\t * The case B is more clear and is compatible with substitution of name of local variable, method name, etc.\n+\t\t\t\t\t\t * And case A can be easily modeled using this clear code\n+\t\t\t\t\t\t *\n+\t\t\t\t\t\t * @Parameter\n+\t\t\t\t\t\t * String field = \"x\"\n+\t\t\t\t\t\t * System.printLn(\"field\") //is substitutes as: System.printLn(\"x\")\n+\t\t\t\t\t\t * System.printLn(field) //is substitutes as: System.printLn(\"x\") because the parameter `field` is constructed with literal value\n+\t\t\t\t\t\t */\n+\t\t\t\t\t\t//New implementation always replaces the name of the accessed field\n+\t\t\t\t\t\t//so do nothing here. The string substitution is handled by #scanCtReference\n \t\t\t\t\t} else {\n \t\t\t\t\t\tthrow context.replace(toReplace, factory.Code().createLiteral(value));\n \t\t\t\t\t}\n \t\t\t\t} else {\n-\t\t\t\t\tthrow context.replace(toReplace, toReplace.clone());\n+\t\t\t\t\tthrow context.replace(toReplace, (CtElement) value);\n \t\t\t\t}\n \t\t\t}\n \t\t}\n@@ -501,14 +536,14 @@ public class SubstitutionVisitor extends CtScanner {\n \t * @return list where each item is assured to be of type itemClass\n \t */\n \t@SuppressWarnings(\"unchecked\")\n-\tprivate static <T> List<T> getParameterValueAsListOfClones(Class<T> itemClass, Object parameterValue) {\n+\tprivate <T> List<T> getParameterValueAsListOfClones(Class<T> itemClass, Object parameterValue) {\n \t\tList<Object> list = getParameterValueAsNewList(parameterValue);\n \t\tfor (int i = 0; i < list.size(); i++) {\n \t\t\tlist.set(i, getParameterValueAsClass(itemClass, list.get(i)));\n \t\t}\n \t\treturn (List<T>) list;\n \t}\n-\tprivate static List<Object> getParameterValueAsNewList(Object parameterValue) {\n+\tprivate List<Object> getParameterValueAsNewList(Object parameterValue) {\n \t\tList<Object> list = new ArrayList<>();\n \t\tif (parameterValue != null) {\n \t\t\tif (parameterValue instanceof Object[]) {\n@@ -536,7 +571,7 @@ public class SubstitutionVisitor extends CtScanner {\n \t * @return parameterValue cast (in future potentially converted) to itemClass\n \t */\n \t@SuppressWarnings(\"unchecked\")\n-\tprivate static <T> T getParameterValueAsClass(Class<T> itemClass, Object parameterValue) {\n+\tprivate <T> T getParameterValueAsClass(Class<T> itemClass, Object parameterValue) {\n \t\tif (parameterValue == null || parameterValue == NULL_VALUE) {\n \t\t\treturn null;\n \t\t}\n@@ -556,7 +591,11 @@ public class SubstitutionVisitor extends CtScanner {\n \t\t\tif (parameterValue instanceof CtTypeReference) {\n \t\t\t\t//convert type reference into code element as class access\n \t\t\t\tCtTypeReference<?> tr = (CtTypeReference<?>) parameterValue;\n-\t\t\t\treturn (T) tr.getFactory().Code().createClassAccess(tr);\n+\t\t\t\treturn (T) factory.Code().createClassAccess(tr);\n+\t\t\t}\n+\t\t\tif (parameterValue instanceof String) {\n+\t\t\t\t//convert String to code element as Literal\n+\t\t\t\treturn (T) factory.Code().createLiteral((String) parameterValue);\n \t\t\t}\n \t\t}\n \t\tthrow new SpoonException(\"Parameter value has unexpected class: \" + parameterValue.getClass().getName() + \". Expected class is: \" + itemClass.getName());\n@@ -565,7 +604,7 @@ public class SubstitutionVisitor extends CtScanner {\n \t * @param parameterValue a value of an template parameter\n \t * @return parameter value converted to String\n \t */\n-\tprivate static String getParameterValueAsString(Object parameterValue) {\n+\tprivate String getParameterValueAsString(Object parameterValue) {\n \t\tif (parameterValue == null) {\n \t\t\treturn null;\n \t\t}\n@@ -634,7 +673,7 @@ public class SubstitutionVisitor extends CtScanner {\n \t * @param index index of item from the list, or null if item is not expected to be a list\n \t * @return parameterValue (optionally item from the list) cast (in future potentially converted) to itemClass\n \t */\n-\tprivate static <T> T getParameterValueAtIndex(Class<T> itemClass, Object parameterValue, Integer index) {\n+\tprivate <T> T getParameterValueAtIndex(Class<T> itemClass, Object parameterValue, Integer index) {\n \t\tif (index != null) {\n \t\t\t//convert to list, but do not clone\n \t\t\tList<Object> list = getParameterValueAsNewList(parameterValue);\ndiff --git a/src/main/java/spoon/template/Template.java b/src/main/java/spoon/template/Template.java\nindex ea3f036..14aecdb 100644\n--- a/src/main/java/spoon/template/Template.java\n+++ b/src/main/java/spoon/template/Template.java\n@@ -26,9 +26,10 @@ import spoon.reflect.declaration.CtType;\n  * {@link TemplateParameter#S()} method.\n  *\n  * <p>\n- * When the template parameter is a String or a primitive type (or a boxing\n+ * When the template parameter is a String it is used to rename element of the code such as fields or methods.\n+ * When it is another primitive type (or a boxing\n  * type) representing a literal, or a Class, the template parameter can be\n- * directly accessed.\n+ * directly accessed. To use a standard parameter containing a String type, use a CtLiteral&lt;String&gt;\n  *\n  * <pre>\n  *       import spoon.template.Template;\n@@ -38,15 +39,19 @@ import spoon.reflect.declaration.CtType;\n  *           // template parameter fields\n  *            \\@Parameter String _parameter_;\n  *\n+ *            \\@Parameter CtLiteral&lt;String&gt; _anotherParameter;\n+ *\n+ *\n  *           // parameters binding\n  *            \\@Local\n- *           public SimpleTemplate(String parameter) {\n+ *           public SimpleTemplate(String parameter, CtLiteral&lt;String&gt; anotherParameter) {\n  *               _parameter_ = parameter;\n+ *               _anotherParameter = anotherParameter;\n  *           }\n  *\n  *           // template method\n- *           public void simpleTemplateMethod() {\n- *               System.out.println(_parameter_);\n+ *           public void methodwith_parameter_() {\n+ *               System.out.println(_anotherParameter);\n  *           }\n  *       }\n  * </pre>\n@@ -60,7 +65,10 @@ import spoon.reflect.declaration.CtType;\n  *\n  * <pre>\n  *       spoon.reflect.CtClass target=...;\n- *       Template template=new SimpleTemplate(&quot;hello templated world&quot;);\n+ *       CtLiteral&lt;String&gt; anotherParameter = factory.createLiteral();\n+ *       anotherParameter.setValue(&quot;hello templated world&quot;);\n+ *\n+ *       Template template=new SimpleTemplate(&quot;ParameterizedName&quot;, anotherParameter);\n  *       Substitution.insertAll(target,template);\n  * </pre>\n  *\n@@ -70,7 +78,7 @@ import spoon.reflect.declaration.CtType;\n  *\n  * <pre>\n  * public class A {\n- * \tpublic void insertedMethod() {\n+ * \tpublic void methodwithParameterizedName() {\n  * \t\tSystem.out.println(&quot;hello templated world&quot;);\n  *    }\n  * }\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 350354016, 
        "hostName": "spirals-bears", 
        "totalMemory": 470286336, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 10, 2018 3:08:20 PM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/272467827/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            1, 
            0, 
            0, 
            0, 
            80
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 81
        }, 
        "testing": {
          "stepDurations": [
            301
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 301
        }, 
        "cloning": {
          "stepDurations": [
            11
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 11
        }
      }, 
      "reproductionDateBeginning": "Dec 10, 2018 2:53:04 PM", 
      "totalDuration": 908
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1167, 
        "numberRunning": 1168, 
        "numberFailing": 0, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "spoon.template.TemplateException", 
            "isError": true, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/INRIA/spoon/277315604", 
      "failureDetails": [
        {
          "failureName": "spoon.template.TemplateException", 
          "detail": "proxy template parameter must be typed as String spoon.reflect.reference.CtTypeReference", 
          "isError": true, 
          "testMethod": "substituteTypeAccessReference", 
          "testClass": "spoon.test.template.TemplateTest"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 23, 
          "numberRunning": 24, 
          "testClass": "spoon.test.template.TemplateTest", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/277340707", 
        "date": "Sep 19, 2017 4:49:14 PM", 
        "id": 277340707
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/INRIA/spoon/builds/277315604", 
        "date": "Sep 19, 2017 3:53:56 PM", 
        "id": 277315604
      }
    }, 
    "repository": {
      "name": "INRIA-spoon", 
      "url": "https://github.com/INRIA/spoon", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 14176513
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/INRIA/spoon/commit/770e4845b911a176cb092e574a93a46fb4327328", 
        "sha": "770e4845b911a176cb092e574a93a46fb4327328", 
        "branchName": "master", 
        "date": "Sep 19, 2017 4:37:31 PM", 
        "repoName": "INRIA/spoon"
      }, 
      "buggyBuild": {
        "url": "http://github.com/INRIA/spoon/commit/494ba6f46237e818ca2a751da8673e3a707b1df1", 
        "sha": "494ba6f46237e818ca2a751da8673e3a707b1df1", 
        "branchName": "master", 
        "date": "Sep 19, 2017 3:43:28 PM", 
        "repoName": "INRIA/spoon"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/INRIA-spoon-277315604-277340707", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 514, 
      "numberLibrariesFailingModule": 10, 
      "numberTestFiles": 592, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 43, 
        "numberDeleted": 3
      }
    }, 
    "bugId": "Bears_83", 
    "diff": "diff --git a/src/main/java/spoon/template/Substitution.java b/src/main/java/spoon/template/Substitution.java\nindex d413e1b..b60f1ad 100644\n--- a/src/main/java/spoon/template/Substitution.java\n+++ b/src/main/java/spoon/template/Substitution.java\n@@ -671,29 +671,31 @@ public abstract class Substitution {\n \t\t\tParameter templateParamAnnotation = f.getAnnotation(Parameter.class);\n \t\t\tif (templateParamAnnotation != null && !templateParamAnnotation.value().equals(\"\")) {\n \t\t\t\tString proxyName = templateParamAnnotation.value();\n-\t\t\t\t// contract: if value, then the field type must be String\n-\t\t\t\tif (!f.getType().equals(c.getFactory().Type().STRING)) {\n-\t\t\t\t\tthrow new TemplateException(\"proxy template parameter must be typed as String \" +  f.getType().getQualifiedName());\n-\t\t\t\t}\n-\n-\t\t\t\t// contract: the name of the template parameter must correspond to the name of the field\n-\t\t\t\t// as found, by Pavel, this is not good contract because it prevents easy refactoring of templates\n-\t\t\t\t// we remove it but keep th commented code in case somebody would come up with this bad idae\n-//\t\t\t\tif (!f.getSimpleName().equals(\"_\" + f.getAnnotation(Parameter.class).value())) {\n-//\t\t\t\t\tthrow new TemplateException(\"the field name of a proxy template parameter must be called _\" + f.getSimpleName());\n-//\t\t\t\t}\n-\n-\t\t\t\t// contract: if a proxy parameter is declared and named \"x\" (@Parameter(\"x\")), then a type member named \"x\" must exist.\n-\t\t\t\tboolean found = false;\n-\t\t\t\tfor (CtTypeMember member: c.getTypeMembers()) {\n-\t\t\t\t\tif (member.getSimpleName().equals(proxyName)) {\n-\t\t\t\t\t\tfound = true;\n+\t\t\t\t// contract: if value, then the field type must be String or CtTypeReference\n+\t\t\t\tString fieldTypeQName = f.getType().getQualifiedName();\n+\t\t\t\tif (fieldTypeQName.equals(String.class.getName())) {\n+\t\t\t\t\t// contract: the name of the template parameter must correspond to the name of the field\n+\t\t\t\t\t// as found, by Pavel, this is not good contract because it prevents easy refactoring of templates\n+\t\t\t\t\t// we remove it but keep th commented code in case somebody would come up with this bad idae\n+//\t\t\t\t\tif (!f.getSimpleName().equals(\"_\" + f.getAnnotation(Parameter.class).value())) {\n+//\t\t\t\t\t\tthrow new TemplateException(\"the field name of a proxy template parameter must be called _\" + f.getSimpleName());\n+//\t\t\t\t\t}\n+\n+\t\t\t\t\t// contract: if a proxy parameter is declared and named \"x\" (@Parameter(\"x\")), then a type member named \"x\" must exist.\n+\t\t\t\t\tboolean found = false;\n+\t\t\t\t\tfor (CtTypeMember member: c.getTypeMembers()) {\n+\t\t\t\t\t\tif (member.getSimpleName().equals(proxyName)) {\n+\t\t\t\t\t\t\tfound = true;\n+\t\t\t\t\t\t}\n \t\t\t\t\t}\n+\t\t\t\t\tif (!found) {\n+\t\t\t\t\t\tthrow new TemplateException(\"if a proxy parameter is declared and named \\\"\" + proxyName + \"\\\", then a type member named \\\"\\\" + proxyName + \\\"\\\" must exist.\");\n+\t\t\t\t\t}\n+\t\t\t\t} else if (fieldTypeQName.equals(CtTypeReference.class.getName())) {\n+\t\t\t\t\t//OK it is CtTypeReference\n+\t\t\t\t} else {\n+\t\t\t\t\tthrow new TemplateException(\"proxy template parameter must be typed as String or CtTypeReference, but it is \" + fieldTypeQName);\n \t\t\t\t}\n-\t\t\t\tif (!found) {\n-\t\t\t\t\tthrow new TemplateException(\"if a proxy parameter is declared and named \\\"\" + proxyName + \"\\\", then a type member named \\\"\\\" + proxyName + \\\"\\\" must exist.\");\n-\t\t\t\t}\n-\n \t\t\t}\n \t\t}\n \t}\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 248879168, 
        "hostName": "spirals-bears", 
        "totalMemory": 484442112, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 10, 2018 2:53:25 PM", 
      "projectRootPomPath": "./workspace/INRIA/spoon/277315604/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            1, 
            0, 
            0, 
            0, 
            80
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 81
        }, 
        "testing": {
          "stepDurations": [
            298
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 298
        }, 
        "cloning": {
          "stepDurations": [
            12
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 12
        }
      }, 
      "reproductionDateBeginning": "Dec 10, 2018 2:40:37 PM", 
      "totalDuration": 761
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1123, 
        "numberRunning": 1124, 
        "numberFailing": 0, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "java.lang.IllegalArgumentException", 
            "isError": true, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 7
      }, 
      "failingModule": "/root/workspace/spring-projects/spring-data-commons/185852074", 
      "failingClasses": [
        {
          "numberPassing": 11, 
          "numberRunning": 12, 
          "testClass": "org.springframework.data.auditing.IsNewAwareAuditingHandlerUnitTests", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "java.lang.IllegalArgumentException", 
          "testMethod": "skipsEntityWithoutIdentifier", 
          "testClass": "org.springframework.data.auditing.IsNewAwareAuditingHandlerUnitTests", 
          "detail": "Unsupported entity org.springframework.data.auditing.IsNewAwareAuditingHandlerUnitTests$EntityWithoutId! Could not determine IsNewStrategy.", 
          "isError": true
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/spring-projects/spring-data-commons/builds/193313389", 
        "date": "Jan 19, 2017 9:57:11 AM", 
        "id": 193313389
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/spring-projects/spring-data-commons/builds/185852074", 
        "date": "Dec 21, 2016 11:43:04 PM", 
        "id": 185852074
      }
    }, 
    "repository": {
      "name": "spring-projects-spring-data-commons", 
      "url": "https://github.com/spring-projects/spring-data-commons", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 1072614
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/spring-projects/spring-data-commons/commit/cdbd0720836779e332384e1bcec244c3f645af65", 
        "sha": "cdbd0720836779e332384e1bcec244c3f645af65", 
        "branchName": "1.11.x", 
        "date": "Jan 19, 2017 9:50:06 AM", 
        "repoName": "spring-projects/spring-data-commons"
      }, 
      "buggyBuild": {
        "url": "http://github.com/spring-projects/spring-data-commons/commit/d1d493150470b67dc3cfc54a746c9fa83eab16fd", 
        "sha": "d1d493150470b67dc3cfc54a746c9fa83eab16fd", 
        "branchName": "1.11.x", 
        "date": "Dec 21, 2016 7:35:19 PM", 
        "repoName": "spring-projects/spring-data-commons"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/spring-projects-spring-data-commons-185852074-193313389", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 347, 
      "numberLibrariesFailingModule": 62, 
      "numberTestFiles": 207, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 2, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 1, 
        "numberDeleted": 11
      }
    }, 
    "bugId": "Bears_84", 
    "diff": "diff --git a/src/main/java/org/springframework/data/auditing/AuditingHandler.java b/src/main/java/org/springframework/data/auditing/AuditingHandler.java\nindex f7433a5..5210104 100644\n--- a/src/main/java/org/springframework/data/auditing/AuditingHandler.java\n+++ b/src/main/java/org/springframework/data/auditing/AuditingHandler.java\n@@ -134,6 +134,16 @@ public class AuditingHandler implements InitializingBean {\n \t\ttouch(source, false);\n \t}\n \n+\t/**\n+\t * Returns whether the given source is considered to be auditable in the first place\n+\t * \n+\t * @param source can be {@literal null}.\n+\t * @return\n+\t */\n+\tprotected final boolean isAuditable(Object source) {\n+\t\treturn factory.getBeanWrapperFor(source) != null;\n+\t}\n+\n \tprivate void touch(Object target, boolean isNew) {\n \n \t\tAuditableBeanWrapper wrapper = factory.getBeanWrapperFor(target);\ndiff --git a/src/main/java/org/springframework/data/auditing/IsNewAwareAuditingHandler.java b/src/main/java/org/springframework/data/auditing/IsNewAwareAuditingHandler.java\nindex f9b1d4c..74922f8 100644\n--- a/src/main/java/org/springframework/data/auditing/IsNewAwareAuditingHandler.java\n+++ b/src/main/java/org/springframework/data/auditing/IsNewAwareAuditingHandler.java\n@@ -73,7 +73,7 @@ public class IsNewAwareAuditingHandler extends AuditingHandler {\n \t */\n \tpublic void markAudited(Object object) {\n \n-\t\tif (object == null) {\n+\t\tif (!isAuditable(object)) {\n \t\t\treturn;\n \t\t}\n \n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 235738112, 
        "hostName": "local", 
        "totalMemory": 282591232, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 6:59:23 PM", 
      "projectRootPomPath": "./workspace/spring-projects/spring-data-commons/185852074/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            4, 
            0, 
            0, 
            180
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 184
        }, 
        "testing": {
          "stepDurations": [
            22
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 22
        }, 
        "cloning": {
          "stepDurations": [
            9
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 9
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 6:54:25 PM", 
      "totalDuration": 293
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 2000, 
        "numberRunning": 2002, 
        "numberFailing": 0, 
        "numberErroring": 2, 
        "failures": [
          {
            "failureName": "java.lang.NullPointerException", 
            "isError": true, 
            "occurrences": 2
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/spring-projects/spring-data-commons/193313395", 
      "failureDetails": [
        {
          "failureName": "java.lang.NullPointerException", 
          "isError": true, 
          "testClass": "org.springframework.data.web.ProjectingJackson2HttpMessageConverterUnitTests", 
          "testMethod": "doesNotConsiderTypeVariableBoundTo"
        }, 
        {
          "failureName": "java.lang.NullPointerException", 
          "isError": true, 
          "testClass": "org.springframework.data.web.ProjectingJackson2HttpMessageConverterUnitTests", 
          "testMethod": "genericTypeOnConcreteOne"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 3, 
          "numberRunning": 5, 
          "testClass": "org.springframework.data.web.ProjectingJackson2HttpMessageConverterUnitTests", 
          "numberFailing": 0, 
          "numberErroring": 2, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/spring-projects/spring-data-commons/builds/193356189", 
        "date": "Jan 19, 2017 12:49:41 PM", 
        "id": 193356189
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/spring-projects/spring-data-commons/builds/193313395", 
        "date": "Jan 19, 2017 9:58:45 AM", 
        "id": 193313395
      }
    }, 
    "repository": {
      "name": "spring-projects-spring-data-commons", 
      "url": "https://github.com/spring-projects/spring-data-commons", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 1072614
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/spring-projects/spring-data-commons/commit/e68be19054603862acf5db25f66cb9a94784fe1e", 
        "sha": "e68be19054603862acf5db25f66cb9a94784fe1e", 
        "branchName": "master", 
        "date": "Jan 19, 2017 12:23:14 PM", 
        "repoName": "spring-projects/spring-data-commons"
      }, 
      "buggyBuild": {
        "url": "http://github.com/spring-projects/spring-data-commons/commit/60d40b51b3d1f8fd6135d4d9d3915d46df494d23", 
        "sha": "60d40b51b3d1f8fd6135d4d9d3915d46df494d23", 
        "branchName": "master", 
        "date": "Jan 19, 2017 9:49:35 AM", 
        "repoName": "spring-projects/spring-data-commons"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/spring-projects-spring-data-commons-193313395-193356189", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 2, 
        "numberDeleted": 1
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_85", 
    "diff": "diff --git a/src/main/java/org/springframework/data/web/ProjectingJackson2HttpMessageConverter.java b/src/main/java/org/springframework/data/web/ProjectingJackson2HttpMessageConverter.java\nindex bda6f47..efe34b1 100644\n--- a/src/main/java/org/springframework/data/web/ProjectingJackson2HttpMessageConverter.java\n+++ b/src/main/java/org/springframework/data/web/ProjectingJackson2HttpMessageConverter.java\n@@ -117,7 +117,8 @@ public class ProjectingJackson2HttpMessageConverter extends MappingJackson2HttpM\n \t\t\treturn false;\n \t\t}\n \n-\t\tClass<?> rawType = ResolvableType.forType(type).getRawClass();\n+\t\tResolvableType owner = contextClass == null ? null : ResolvableType.forClass(contextClass);\n+\t\tClass<?> rawType = ResolvableType.forType(type, owner).resolve(Object.class);\n \t\tBoolean result = supportedTypesCache.get(rawType);\n \n \t\tif (result != null) {\n", 
    "projectMetrics": {
      "numberSourceFiles": 378, 
      "numberLibrariesFailingModule": 71, 
      "numberTestFiles": 226, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 159380640, 
        "hostName": "local", 
        "totalMemory": 239075328, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 6:54:15 PM", 
      "projectRootPomPath": "./workspace/spring-projects/spring-data-commons/193313395/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            2, 
            0, 
            0, 
            199
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 201
        }, 
        "testing": {
          "stepDurations": [
            31
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 31
        }, 
        "cloning": {
          "stepDurations": [
            9
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 9
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 6:48:17 PM", 
      "totalDuration": 352
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 2004, 
        "numberRunning": 2006, 
        "numberFailing": 2, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 2
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/spring-projects/spring-data-commons/193356189", 
      "failingClasses": [
        {
          "numberPassing": 2, 
          "numberRunning": 4, 
          "testClass": "org.springframework.data.web.ProxyingHandlerMethodArgumentResolverUnitTests", 
          "numberFailing": 2, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "java.lang.AssertionError", 
          "testMethod": "doesNotSupportUnannotatedInterfaceFromSpringNamespace", 
          "testClass": "org.springframework.data.web.ProxyingHandlerMethodArgumentResolverUnitTests", 
          "detail": "\nExpected: is <false>\n     but: was <true>", 
          "isError": false
        }, 
        {
          "failureName": "java.lang.AssertionError", 
          "testMethod": "doesNotSupportCoreJavaType", 
          "testClass": "org.springframework.data.web.ProxyingHandlerMethodArgumentResolverUnitTests", 
          "detail": "\nExpected: is <false>\n     but: was <true>", 
          "isError": false
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/spring-projects/spring-data-commons/builds/194423789", 
        "date": "Jan 23, 2017 11:51:09 AM", 
        "id": 194423789
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/spring-projects/spring-data-commons/builds/193356189", 
        "date": "Jan 19, 2017 12:49:41 PM", 
        "id": 193356189
      }
    }, 
    "repository": {
      "name": "spring-projects-spring-data-commons", 
      "url": "https://github.com/spring-projects/spring-data-commons", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 1072614
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/spring-projects/spring-data-commons/commit/bf04e3232b959735a89ea2a06f77295773fce976", 
        "sha": "bf04e3232b959735a89ea2a06f77295773fce976", 
        "branchName": "master", 
        "date": "Jan 23, 2017 11:41:39 AM", 
        "repoName": "spring-projects/spring-data-commons"
      }, 
      "buggyBuild": {
        "url": "http://github.com/spring-projects/spring-data-commons/commit/e68be19054603862acf5db25f66cb9a94784fe1e", 
        "sha": "e68be19054603862acf5db25f66cb9a94784fe1e", 
        "branchName": "master", 
        "date": "Jan 19, 2017 12:23:14 PM", 
        "repoName": "spring-projects/spring-data-commons"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/spring-projects-spring-data-commons-193356189-194423789", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 378, 
      "numberLibrariesFailingModule": 71, 
      "numberTestFiles": 228, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 25, 
        "numberDeleted": 8
      }
    }, 
    "bugId": "Bears_86", 
    "diff": "diff --git a/src/main/java/org/springframework/data/web/ProxyingHandlerMethodArgumentResolver.java b/src/main/java/org/springframework/data/web/ProxyingHandlerMethodArgumentResolver.java\nindex b918f22..0ab0c94 100644\n--- a/src/main/java/org/springframework/data/web/ProxyingHandlerMethodArgumentResolver.java\n+++ b/src/main/java/org/springframework/data/web/ProxyingHandlerMethodArgumentResolver.java\n@@ -15,6 +15,9 @@\n  */\n package org.springframework.data.web;\n \n+import java.util.Arrays;\n+import java.util.List;\n+\n import org.springframework.beans.BeansException;\n import org.springframework.beans.MutablePropertyValues;\n import org.springframework.beans.factory.BeanClassLoaderAware;\n@@ -22,9 +25,11 @@ import org.springframework.beans.factory.BeanFactory;\n import org.springframework.beans.factory.BeanFactoryAware;\n import org.springframework.context.ResourceLoaderAware;\n import org.springframework.core.MethodParameter;\n+import org.springframework.core.annotation.AnnotatedElementUtils;\n import org.springframework.core.convert.ConversionService;\n import org.springframework.core.io.ResourceLoader;\n import org.springframework.data.projection.SpelAwareProxyProjectionFactory;\n+import org.springframework.util.ClassUtils;\n import org.springframework.web.bind.WebDataBinder;\n import org.springframework.web.bind.support.WebDataBinderFactory;\n import org.springframework.web.context.request.NativeWebRequest;\n@@ -40,6 +45,8 @@ import org.springframework.web.method.support.HandlerMethodArgumentResolver;\n public class ProxyingHandlerMethodArgumentResolver extends ModelAttributeMethodProcessor\n \t\timplements BeanFactoryAware, ResourceLoaderAware, BeanClassLoaderAware {\n \n+\tprivate static final List<String> IGNORED_PACKAGES = Arrays.asList(\"java\", \"org.springframework\");\n+\n \tprivate final SpelAwareProxyProjectionFactory proxyFactory;\n \tprivate final ConversionService conversionService;\n \n@@ -90,7 +97,31 @@ public class ProxyingHandlerMethodArgumentResolver extends ModelAttributeMethodP\n \t */\n \t@Override\n \tpublic boolean supportsParameter(MethodParameter parameter) {\n-\t\treturn parameter.getParameterType().isInterface();\n+\n+\t\tClass<?> type = parameter.getParameterType();\n+\n+\t\tif (!type.isInterface()) {\n+\t\t\treturn false;\n+\t\t}\n+\n+\t\t// Annotated parameter\n+\t\tif (parameter.getParameterAnnotation(ProjectedPayload.class) != null) {\n+\t\t\treturn true;\n+\t\t}\n+\n+\t\t// Annotated type\n+\t\tif (AnnotatedElementUtils.findMergedAnnotation(type, ProjectedPayload.class) != null) {\n+\t\t\treturn true;\n+\t\t}\n+\n+\t\t// Fallback for only user defined interfaces\n+\t\tfor (String prefix : IGNORED_PACKAGES) {\n+\t\t\tif (ClassUtils.getPackageName(type).startsWith(prefix)) {\n+\t\t\t\treturn false;\n+\t\t\t}\n+\t\t}\n+\n+\t\treturn true;\n \t}\n \n \t/* \n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 202264560, 
        "hostName": "local", 
        "totalMemory": 242221056, 
        "numberCPU": 4
      }, 
      "reproductionDateEnd": "Oct 10, 2018 6:50:46 PM", 
      "projectRootPomPath": "./workspace/spring-projects/spring-data-commons/193356189/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            3, 
            0, 
            0, 
            187
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 190
        }, 
        "testing": {
          "stepDurations": [
            36
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 36
        }, 
        "cloning": {
          "stepDurations": [
            8
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 8
        }
      }, 
      "reproductionDateBeginning": "Oct 10, 2018 6:44:56 PM", 
      "totalDuration": 344
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 2027, 
        "numberRunning": 2028, 
        "numberFailing": 0, 
        "numberErroring": 1, 
        "failures": [
          {
            "failureName": "org.springframework.core.convert.ConversionFailedException", 
            "isError": true, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/spring-projects/spring-data-commons/240714544", 
      "failureDetails": [
        {
          "failureName": "org.springframework.core.convert.ConversionFailedException", 
          "detail": "Failed to convert from type [org.springframework.data.repository.util.NullableWrapper] to type [io.vavr.control.Option<?>] for value 'org.springframework.data.repository.util.NullableWrapper@433ae0b0'; nested exception is java.lang.IllegalArgumentException: wrong number of arguments", 
          "isError": true, 
          "testMethod": "convertsValueToVavrOption", 
          "testClass": "org.springframework.data.repository.util.QueryExecutionConvertersUnitTests"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 28, 
          "numberRunning": 29, 
          "testClass": "org.springframework.data.repository.util.QueryExecutionConvertersUnitTests", 
          "numberFailing": 0, 
          "numberErroring": 1, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/spring-projects/spring-data-commons/builds/241322094", 
        "date": "Jun 9, 2017 9:30:15 PM", 
        "id": 241322094
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/spring-projects/spring-data-commons/builds/240714544", 
        "date": "Jun 8, 2017 11:46:59 AM", 
        "id": 240714544
      }
    }, 
    "repository": {
      "name": "spring-projects-spring-data-commons", 
      "url": "https://github.com/spring-projects/spring-data-commons", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 1072614
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/spring-projects/spring-data-commons/commit/e1761f6c8c1f1189144427785b590823134d1cf4", 
        "sha": "e1761f6c8c1f1189144427785b590823134d1cf4", 
        "branchName": "1.13.x", 
        "date": "Jun 9, 2017 9:24:08 PM", 
        "repoName": "spring-projects/spring-data-commons"
      }, 
      "buggyBuild": {
        "url": "http://github.com/spring-projects/spring-data-commons/commit/0398bdd22f56aebc8fc05aa498873fc0b2407435", 
        "sha": "0398bdd22f56aebc8fc05aa498873fc0b2407435", 
        "branchName": "1.13.x", 
        "date": "Jun 8, 2017 11:26:19 AM", 
        "repoName": "spring-projects/spring-data-commons"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/spring-projects-spring-data-commons-240714544-241322094", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 1, 
        "numberDeleted": 1
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_87", 
    "diff": "diff --git a/src/main/java/org/springframework/data/repository/util/QueryExecutionConverters.java b/src/main/java/org/springframework/data/repository/util/QueryExecutionConverters.java\nindex 4cb24fd..5dcb0f0 100644\n--- a/src/main/java/org/springframework/data/repository/util/QueryExecutionConverters.java\n+++ b/src/main/java/org/springframework/data/repository/util/QueryExecutionConverters.java\n@@ -525,7 +525,7 @@ public abstract class QueryExecutionConverters {\n \t\t */\n \t\t@Override\n \t\tprotected Object wrap(Object source) {\n-\t\t\treturn ReflectionUtils.invokeMethod(OF_METHOD, source);\n+\t\t\treturn ReflectionUtils.invokeMethod(OF_METHOD, null, source);\n \t\t}\n \n \t\tpublic static WrapperType getWrapperType() {\n", 
    "projectMetrics": {
      "numberSourceFiles": 379, 
      "numberLibrariesFailingModule": 73, 
      "numberTestFiles": 233, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 314685336, 
        "hostName": "spirals-bears", 
        "totalMemory": 427819008, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 10, 2018 2:34:19 AM", 
      "projectRootPomPath": "./workspace/spring-projects/spring-data-commons/240714544/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            1, 
            0, 
            0, 
            154
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 155
        }, 
        "testing": {
          "stepDurations": [
            53
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 53
        }, 
        "cloning": {
          "stepDurations": [
            7
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 7
        }
      }, 
      "reproductionDateBeginning": "Dec 10, 2018 2:28:30 AM", 
      "totalDuration": 342
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 2031, 
        "numberRunning": 2033, 
        "numberFailing": 0, 
        "numberErroring": 2, 
        "failures": [
          {
            "failureName": "java.lang.NullPointerException", 
            "isError": true, 
            "occurrences": 2
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/spring-projects/spring-data-commons/254354007", 
      "failingClasses": [
        {
          "numberPassing": 2, 
          "numberRunning": 4, 
          "testClass": "org.springframework.data.repository.config.RepositoryBeanNameGeneratorUnitTests", 
          "numberFailing": 0, 
          "numberErroring": 2, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "java.lang.NullPointerException", 
          "isError": true, 
          "testClass": "org.springframework.data.repository.config.RepositoryBeanNameGeneratorUnitTests", 
          "testMethod": "usesClassNameOfScannedBeanDefinition"
        }, 
        {
          "failureName": "java.lang.NullPointerException", 
          "isError": true, 
          "testClass": "org.springframework.data.repository.config.RepositoryBeanNameGeneratorUnitTests", 
          "testMethod": "usesClassNameOfAnnotatedBeanDefinition"
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/spring-projects/spring-data-commons/builds/255142407", 
        "date": "Jul 19, 2017 8:52:52 AM", 
        "id": 255142407
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/spring-projects/spring-data-commons/builds/254354007", 
        "date": "Jul 17, 2017 10:49:53 AM", 
        "id": 254354007
      }
    }, 
    "repository": {
      "name": "spring-projects-spring-data-commons", 
      "url": "https://github.com/spring-projects/spring-data-commons", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 1072614
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/spring-projects/spring-data-commons/commit/721888f05285f24716908902c6167c3a34e27397", 
        "sha": "721888f05285f24716908902c6167c3a34e27397", 
        "branchName": "1.13.x", 
        "date": "Jul 19, 2017 8:44:17 AM", 
        "repoName": "spring-projects/spring-data-commons"
      }, 
      "buggyBuild": {
        "url": "http://github.com/spring-projects/spring-data-commons/commit/143b497090d353e341c9f7016dc9cba47e5d4557", 
        "sha": "143b497090d353e341c9f7016dc9cba47e5d4557", 
        "branchName": "1.13.x", 
        "date": "Jul 6, 2017 11:27:45 AM", 
        "repoName": "spring-projects/spring-data-commons"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/spring-projects-spring-data-commons-254354007-255142407", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 379, 
      "numberLibrariesFailingModule": 73, 
      "numberTestFiles": 233, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 8, 
        "numberDeleted": 5
      }
    }, 
    "bugId": "Bears_88", 
    "diff": "diff --git a/src/main/java/org/springframework/data/repository/config/RepositoryBeanNameGenerator.java b/src/main/java/org/springframework/data/repository/config/RepositoryBeanNameGenerator.java\nindex 1020be8..0e6f4b8 100644\n--- a/src/main/java/org/springframework/data/repository/config/RepositoryBeanNameGenerator.java\n+++ b/src/main/java/org/springframework/data/repository/config/RepositoryBeanNameGenerator.java\n@@ -1,5 +1,5 @@\n /*\n- * Copyright 2012 the original author or authors.\n+ * Copyright 2012-2017 the original author or authors.\n  *\n  * Licensed under the Apache License, Version 2.0 (the \"License\");\n  * you may not use this file except in compliance with the License.\n@@ -51,14 +51,17 @@ public class RepositoryBeanNameGenerator implements BeanNameGenerator, BeanClass\n \t */\n \tpublic String generateBeanName(BeanDefinition definition, BeanDefinitionRegistry registry) {\n \n-\t\tAnnotatedBeanDefinition beanDefinition = new AnnotatedGenericBeanDefinition(getRepositoryInterfaceFrom(definition));\n+\t\tAnnotatedBeanDefinition beanDefinition = definition instanceof AnnotatedBeanDefinition //\n+\t\t\t\t? (AnnotatedBeanDefinition) definition //\n+\t\t\t\t: new AnnotatedGenericBeanDefinition(getRepositoryInterfaceFrom(definition));\n+\n \t\treturn DELEGATE.generateBeanName(beanDefinition, registry);\n \t}\n \n \t/**\n-\t * Returns the type configured for the {@code repositoryInterface} property of the given bean definition. Uses a\n-\t * potential {@link Class} being configured as is or tries to load a class with the given value's {@link #toString()}\n-\t * representation.\n+\t * Returns the type configured for the {@code repositoryInterface} constructor argument of the given bean definition.\n+\t * Uses a potential {@link Class} being configured as is or tries to load a class with the given value's\n+\t * {@link #toString()} representation.\n \t * \n \t * @param beanDefinition\n \t * @return\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 284138720, 
        "hostName": "spirals-bears", 
        "totalMemory": 418906112, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 10, 2018 2:23:11 PM", 
      "projectRootPomPath": "./workspace/spring-projects/spring-data-commons/254354007/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            3, 
            0, 
            0, 
            153
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 156
        }, 
        "testing": {
          "stepDurations": [
            52
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 52
        }, 
        "cloning": {
          "stepDurations": [
            8
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 8
        }
      }, 
      "reproductionDateBeginning": "Dec 10, 2018 2:17:17 PM", 
      "totalDuration": 348
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 1242, 
        "numberRunning": 1243, 
        "numberFailing": 1, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 1
      }, 
      "failingModule": "/root/workspace/spring-projects/spring-data-commons/263410130", 
      "failureDetails": [
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "\nExpected: is <org.springframework.data.util.ClassTypeInformationUnitTests$SomeConcrete>\n     but: was <org.springframework.data.util.ClassTypeInformationUnitTests$SomeConcrete<java.lang.Object>>", 
          "isError": false, 
          "testMethod": "usesTargetTypeForWildcardedBaseOnSpecialization", 
          "testClass": "org.springframework.data.util.ClassTypeInformationUnitTests"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 29, 
          "numberRunning": 30, 
          "testClass": "org.springframework.data.util.ClassTypeInformationUnitTests", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/spring-projects/spring-data-commons/builds/263513297", 
        "date": "Aug 11, 2017 4:25:35 PM", 
        "id": 263513297
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/spring-projects/spring-data-commons/builds/263410130", 
        "date": "Aug 11, 2017 11:00:15 AM", 
        "id": 263410130
      }
    }, 
    "repository": {
      "name": "spring-projects-spring-data-commons", 
      "url": "https://github.com/spring-projects/spring-data-commons", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 1072614
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/spring-projects/spring-data-commons/commit/1725cbaec18cb1a5c859f4d808a27840c4ffb1f6", 
        "sha": "1725cbaec18cb1a5c859f4d808a27840c4ffb1f6", 
        "branchName": "1.12.x", 
        "date": "Aug 11, 2017 3:54:45 PM", 
        "repoName": "spring-projects/spring-data-commons"
      }, 
      "buggyBuild": {
        "url": "http://github.com/spring-projects/spring-data-commons/commit/ddbedb7cd7e88e4e25432933e78e1d4bacb0d987", 
        "sha": "ddbedb7cd7e88e4e25432933e78e1d4bacb0d987", 
        "branchName": "1.12.x", 
        "date": "Aug 3, 2017 11:38:02 AM", 
        "repoName": "spring-projects/spring-data-commons"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/spring-projects-spring-data-commons-263410130-263513297", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 0, 
        "numberDeleted": 9
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_89", 
    "diff": "diff --git a/src/main/java/org/springframework/data/util/ParameterizedTypeInformation.java b/src/main/java/org/springframework/data/util/ParameterizedTypeInformation.java\nindex d707591..88a8a2f 100644\n--- a/src/main/java/org/springframework/data/util/ParameterizedTypeInformation.java\n+++ b/src/main/java/org/springframework/data/util/ParameterizedTypeInformation.java\n@@ -181,6 +181,15 @@ class ParameterizedTypeInformation<T> extends ParentTypeAwareTypeInformation<T>\n \t}\n \n \t/* \n+\t * (non-Javadoc)\n+\t * @see org.springframework.data.util.TypeDiscoverer#specialize(org.springframework.data.util.ClassTypeInformation)\n+\t */\n+\t@Override\n+\tpublic TypeInformation<?> specialize(ClassTypeInformation<?> type) {\n+\t\treturn isResolvedCompletely() ? type : super.specialize(type);\n+\t}\n+\n+\t/*\n \t * (non-Javadoc)\n \t * @see org.springframework.data.util.ParentTypeAwareTypeInformation#equals(java.lang.Object)\n \t */\n", 
    "projectMetrics": {
      "numberSourceFiles": 356, 
      "numberLibrariesFailingModule": 69, 
      "numberTestFiles": 225, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 372613752, 
        "hostName": "spirals-bears", 
        "totalMemory": 494927872, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 10, 2018 2:09:35 PM", 
      "projectRootPomPath": "./workspace/spring-projects/spring-data-commons/263410130/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            2, 
            0, 
            0, 
            154
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 156
        }, 
        "testing": {
          "stepDurations": [
            52
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 52
        }, 
        "cloning": {
          "stepDurations": [
            7
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 7
        }
      }, 
      "reproductionDateBeginning": "Dec 10, 2018 2:03:54 PM", 
      "totalDuration": 335
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 2036, 
        "numberRunning": 2037, 
        "numberFailing": 1, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/spring-projects/spring-data-commons/264284792", 
      "failingClasses": [
        {
          "numberPassing": 17, 
          "numberRunning": 18, 
          "testClass": "org.springframework.data.mapping.model.AbstractPersistentPropertyUnitTests", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "java.lang.AssertionError", 
          "testMethod": "resolvesGenericsForRawType", 
          "testClass": "org.springframework.data.mapping.model.AbstractPersistentPropertyUnitTests", 
          "detail": "\nExpected: is type < java.lang.String\n     but: \"java.lang.Object\"", 
          "isError": false
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/spring-projects/spring-data-commons/builds/264335430", 
        "date": "Aug 14, 2017 2:15:11 PM", 
        "id": 264335430
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/spring-projects/spring-data-commons/builds/264284792", 
        "date": "Aug 14, 2017 11:06:02 AM", 
        "id": 264284792
      }
    }, 
    "repository": {
      "name": "spring-projects-spring-data-commons", 
      "url": "https://github.com/spring-projects/spring-data-commons", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 1072614
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/spring-projects/spring-data-commons/commit/766c9078f23d9af9a8d6ebc3b991c07fadee3594", 
        "sha": "766c9078f23d9af9a8d6ebc3b991c07fadee3594", 
        "branchName": "1.13.x", 
        "date": "Aug 14, 2017 1:40:52 PM", 
        "repoName": "spring-projects/spring-data-commons"
      }, 
      "buggyBuild": {
        "url": "http://github.com/spring-projects/spring-data-commons/commit/8638d30a004aad5904105794385058cfc65c7c3f", 
        "sha": "8638d30a004aad5904105794385058cfc65c7c3f", 
        "branchName": "1.13.x", 
        "date": "Aug 11, 2017 3:54:33 PM", 
        "repoName": "spring-projects/spring-data-commons"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/spring-projects-spring-data-commons-264284792-264335430", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 1, 
        "numberDeleted": 2
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_90", 
    "diff": "diff --git a/src/main/java/org/springframework/data/mapping/model/AbstractPersistentProperty.java b/src/main/java/org/springframework/data/mapping/model/AbstractPersistentProperty.java\nindex c36e1ad..9e64ebf 100644\n--- a/src/main/java/org/springframework/data/mapping/model/AbstractPersistentProperty.java\n+++ b/src/main/java/org/springframework/data/mapping/model/AbstractPersistentProperty.java\n@@ -62,8 +62,9 @@ public abstract class AbstractPersistentProperty<P extends PersistentProperty<P>\n \t\tAssert.notNull(owner, \"Owner entity must not be null!\");\n \n \t\tthis.name = field == null ? propertyDescriptor.getName() : field.getName();\n-\t\tthis.rawType = field == null ? propertyDescriptor.getPropertyType() : field.getType();\n \t\tthis.information = owner.getTypeInformation().getProperty(this.name);\n+\t\tthis.rawType = this.information != null ? information.getType()\n+\t\t\t\t: field == null ? propertyDescriptor.getPropertyType() : field.getType();\n \t\tthis.propertyDescriptor = propertyDescriptor;\n \t\tthis.field = field;\n \t\tthis.association = isAssociation() ? createAssociation() : null;\n", 
    "projectMetrics": {
      "numberSourceFiles": 379, 
      "numberLibrariesFailingModule": 73, 
      "numberTestFiles": 233, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 283803136, 
        "hostName": "spirals-bears", 
        "totalMemory": 418906112, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 10, 2018 2:07:46 PM", 
      "projectRootPomPath": "./workspace/spring-projects/spring-data-commons/264284792/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            1, 
            2, 
            0, 
            0, 
            154
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 157
        }, 
        "testing": {
          "stepDurations": [
            50
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 50
        }, 
        "cloning": {
          "stepDurations": [
            11
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 11
        }
      }, 
      "reproductionDateBeginning": "Dec 10, 2018 2:01:49 PM", 
      "totalDuration": 351
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 2038, 
        "numberRunning": 2039, 
        "numberFailing": 1, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/spring-projects/spring-data-commons/271991482", 
      "failureDetails": [
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "\nExpected: is sameInstance(<com.fasterxml.jackson.databind.ObjectMapper@1b13467c>)\n     but: was <com.fasterxml.jackson.databind.ObjectMapper@7bd96822>", 
          "isError": false, 
          "testMethod": "usesCustomObjectMapper", 
          "testClass": "org.springframework.data.web.config.SpringDataWebConfigurationIntegrationTests"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 4, 
          "numberRunning": 5, 
          "testClass": "org.springframework.data.web.config.SpringDataWebConfigurationIntegrationTests", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/spring-projects/spring-data-commons/builds/272568125", 
        "date": "Sep 6, 2017 6:58:13 PM", 
        "id": 272568125
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/spring-projects/spring-data-commons/builds/271991482", 
        "date": "Sep 5, 2017 1:13:56 PM", 
        "id": 271991482
      }
    }, 
    "repository": {
      "name": "spring-projects-spring-data-commons", 
      "url": "https://github.com/spring-projects/spring-data-commons", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 1072614
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/spring-projects/spring-data-commons/commit/a2f8dc1676cb2ef1594b9e0620f52f8076c85617", 
        "sha": "a2f8dc1676cb2ef1594b9e0620f52f8076c85617", 
        "branchName": "1.13.x", 
        "date": "Sep 6, 2017 6:49:01 PM", 
        "repoName": "spring-projects/spring-data-commons"
      }, 
      "buggyBuild": {
        "url": "http://github.com/spring-projects/spring-data-commons/commit/e8fad19bc0f42b68a4ebad817bf6b7283ceed93f", 
        "sha": "e8fad19bc0f42b68a4ebad817bf6b7283ceed93f", 
        "branchName": "1.13.x", 
        "date": "Sep 5, 2017 12:01:21 PM", 
        "repoName": "spring-projects/spring-data-commons"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/spring-projects-spring-data-commons-271991482-272568125", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 4, 
        "numberDeleted": 11
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_91", 
    "diff": "diff --git a/src/main/java/org/springframework/data/web/config/SpringDataWebConfiguration.java b/src/main/java/org/springframework/data/web/config/SpringDataWebConfiguration.java\nindex e739c05..fcf249c 100644\n--- a/src/main/java/org/springframework/data/web/config/SpringDataWebConfiguration.java\n+++ b/src/main/java/org/springframework/data/web/config/SpringDataWebConfiguration.java\n@@ -17,6 +17,7 @@ package org.springframework.data.web.config;\n \n import java.util.List;\n \n+import org.springframework.beans.factory.NoSuchBeanDefinitionException;\n import org.springframework.beans.factory.ObjectFactory;\n import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.beans.factory.annotation.Qualifier;\n@@ -122,7 +123,10 @@ public class SpringDataWebConfiguration extends WebMvcConfigurerAdapter {\n \t\tif (ClassUtils.isPresent(\"com.jayway.jsonpath.DocumentContext\", context.getClassLoader())\n \t\t\t\t&& ClassUtils.isPresent(\"com.fasterxml.jackson.databind.ObjectMapper\", context.getClassLoader())) {\n \n-\t\t\tProjectingJackson2HttpMessageConverter converter = new ProjectingJackson2HttpMessageConverter(new ObjectMapper());\n+\t\t\tObjectMapper mapper = getUniqueBean(ObjectMapper.class, context);\n+\t\t\tmapper = mapper == null ? new ObjectMapper() : mapper;\n+\n+\t\t\tProjectingJackson2HttpMessageConverter converter = new ProjectingJackson2HttpMessageConverter(mapper);\n \t\t\tconverter.setBeanClassLoader(context.getClassLoader());\n \t\t\tconverter.setBeanFactory(context);\n \n@@ -133,4 +137,13 @@ public class SpringDataWebConfiguration extends WebMvcConfigurerAdapter {\n \t\t\tconverters.add(0, new XmlBeamHttpMessageConverter());\n \t\t}\n \t}\n+\n+\tprivate static <T> T getUniqueBean(Class<T> type, ApplicationContext context) {\n+\n+\t\ttry {\n+\t\t\treturn context.getBean(type);\n+\t\t} catch (NoSuchBeanDefinitionException o_O) {\n+\t\t\treturn null;\n+\t\t}\n+\t}\n }\n", 
    "projectMetrics": {
      "numberSourceFiles": 379, 
      "numberLibrariesFailingModule": 73, 
      "numberTestFiles": 233, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 288401728, 
        "hostName": "spirals-bears", 
        "totalMemory": 416808960, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 10, 2018 2:00:45 PM", 
      "projectRootPomPath": "./workspace/spring-projects/spring-data-commons/271991482/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            4, 
            0, 
            0, 
            157
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 161
        }, 
        "testing": {
          "stepDurations": [
            52
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 52
        }, 
        "cloning": {
          "stepDurations": [
            7
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 7
        }
      }, 
      "reproductionDateBeginning": "Dec 10, 2018 1:54:50 PM", 
      "totalDuration": 349
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 2221, 
        "numberRunning": 2224, 
        "numberFailing": 0, 
        "numberErroring": 3, 
        "failures": [
          {
            "failureName": "java.lang.IllegalStateException", 
            "isError": true, 
            "occurrences": 1
          }, 
          {
            "failureName": "java.lang.ClassCastException", 
            "isError": true, 
            "occurrences": 2
          }
        ], 
        "numberSkipping": 1
      }, 
      "failingModule": "/root/workspace/spring-projects/spring-data-commons/279152312", 
      "failingClasses": [
        {
          "numberPassing": 0, 
          "numberRunning": 3, 
          "testClass": "org.springframework.data.history.AnnotationRevisionMetadataUnitTests", 
          "numberFailing": 0, 
          "numberErroring": 3, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "java.lang.ClassCastException", 
          "testMethod": "exposesRevisionDate", 
          "testClass": "org.springframework.data.history.AnnotationRevisionMetadataUnitTests", 
          "detail": "java.time.LocalDateTime cannot be cast to java.util.Optional", 
          "isError": true
        }, 
        {
          "failureName": "java.lang.IllegalStateException", 
          "testMethod": "exposesNoInformationOnEmptyProbe", 
          "testClass": "org.springframework.data.history.AnnotationRevisionMetadataUnitTests", 
          "detail": "Expected lazy evaluation to yield a non-null value but got null!", 
          "isError": true
        }, 
        {
          "failureName": "java.lang.ClassCastException", 
          "testMethod": "exposesRevisionNumber", 
          "testClass": "org.springframework.data.history.AnnotationRevisionMetadataUnitTests", 
          "detail": "java.lang.Long cannot be cast to java.util.Optional", 
          "isError": true
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/spring-projects/spring-data-commons/builds/279418526", 
        "date": "Sep 25, 2017 10:06:44 AM", 
        "id": 279418526
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/spring-projects/spring-data-commons/builds/279152312", 
        "date": "Sep 24, 2017 11:24:31 AM", 
        "id": 279152312
      }
    }, 
    "repository": {
      "name": "spring-projects-spring-data-commons", 
      "url": "https://github.com/spring-projects/spring-data-commons", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 1072614
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/spring-projects/spring-data-commons/commit/65e21344ac1e411e3aa71466e62f30230b3b46cc", 
        "sha": "65e21344ac1e411e3aa71466e62f30230b3b46cc", 
        "branchName": "master", 
        "date": "Sep 25, 2017 9:56:31 AM", 
        "repoName": "spring-projects/spring-data-commons"
      }, 
      "buggyBuild": {
        "url": "http://github.com/spring-projects/spring-data-commons/commit/041c18bef9f8ec832e63e3aaa4adc81acfb88727", 
        "sha": "041c18bef9f8ec832e63e3aaa4adc81acfb88727", 
        "branchName": "master", 
        "date": "Sep 22, 2017 12:11:04 PM", 
        "repoName": "spring-projects/spring-data-commons"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/spring-projects-spring-data-commons-279152312-279418526", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 421, 
      "numberLibrariesFailingModule": 94, 
      "numberTestFiles": 259, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 2, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 7, 
        "numberDeleted": 7
      }
    }, 
    "bugId": "Bears_92", 
    "diff": "diff --git a/src/main/java/org/springframework/data/history/AnnotationRevisionMetadata.java b/src/main/java/org/springframework/data/history/AnnotationRevisionMetadata.java\nindex a787124..ae89a77 100644\n--- a/src/main/java/org/springframework/data/history/AnnotationRevisionMetadata.java\n+++ b/src/main/java/org/springframework/data/history/AnnotationRevisionMetadata.java\n@@ -85,9 +85,9 @@ public class AnnotationRevisionMetadata<N extends Number & Comparable<N>> implem\n \n \t\treturn Lazy.of(() -> {\n \n-\t\t\tAnnotationDetectionFieldCallback numberCallback = new AnnotationDetectionFieldCallback(annotationType);\n-\t\t\tReflectionUtils.doWithFields(entity.getClass(), numberCallback);\n-\t\t\treturn numberCallback.getValue(entity);\n+\t\t\tAnnotationDetectionFieldCallback callback = new AnnotationDetectionFieldCallback(annotationType);\n+\t\t\tReflectionUtils.doWithFields(entity.getClass(), callback);\n+\t\t\treturn Optional.ofNullable(callback.getValue(entity));\n \t\t});\n \t}\n }\ndiff --git a/src/main/java/org/springframework/data/history/RevisionMetadata.java b/src/main/java/org/springframework/data/history/RevisionMetadata.java\nindex 72cebaa..7cb712f 100644\n--- a/src/main/java/org/springframework/data/history/RevisionMetadata.java\n+++ b/src/main/java/org/springframework/data/history/RevisionMetadata.java\n@@ -40,8 +40,8 @@ public interface RevisionMetadata<N extends Number & Comparable<N>> {\n \t * @throws IllegalStateException if no revision number is available.\n \t */\n \tdefault N getRequiredRevisionNumber() {\n-\t\treturn getRevisionNumber()\n-\t\t\t\t.orElseThrow(() -> new IllegalStateException(String.format(\"No revision number found on %s!\", getDelegate())));\n+\t\treturn getRevisionNumber().orElseThrow(\n+\t\t\t\t() -> new IllegalStateException(String.format(\"No revision number found on %s!\", (Object) getDelegate())));\n \t}\n \n \t/**\n@@ -58,8 +58,8 @@ public interface RevisionMetadata<N extends Number & Comparable<N>> {\n \t * @throw IllegalStateException if no revision date is available.\n \t */\n \tdefault LocalDateTime getRequiredRevisionDate() {\n-\t\treturn getRevisionDate()\n-\t\t\t\t.orElseThrow(() -> new IllegalStateException(String.format(\"No revision date found on %s!\", getDelegate())));\n+\t\treturn getRevisionDate().orElseThrow(\n+\t\t\t\t() -> new IllegalStateException(String.format(\"No revision date found on %s!\", (Object) getDelegate())));\n \t}\n \n \t/**\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 257874368, 
        "hostName": "spirals-bears", 
        "totalMemory": 422576128, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 10, 2018 1:51:17 PM", 
      "projectRootPomPath": "./workspace/spring-projects/spring-data-commons/279152312/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            1, 
            0, 
            0, 
            201
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 202
        }, 
        "testing": {
          "stepDurations": [
            89
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 89
        }, 
        "cloning": {
          "stepDurations": [
            7
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 7
        }
      }, 
      "reproductionDateBeginning": "Dec 10, 2018 1:43:07 PM", 
      "totalDuration": 482
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 2229, 
        "numberRunning": 2230, 
        "numberFailing": 1, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 1
      }, 
      "failingModule": "/root/workspace/spring-projects/spring-data-commons/279460664", 
      "failureDetails": [
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "\nExpecting actual not to be null", 
          "isError": false, 
          "testMethod": "createsInstancesWithRecursionAndSameCtorArgCountCorrectly", 
          "testClass": "org.springframework.data.convert.ClassGeneratingEntityInstantiatorUnitTests"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 12, 
          "numberRunning": 13, 
          "testClass": "org.springframework.data.convert.ClassGeneratingEntityInstantiatorUnitTests", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/spring-projects/spring-data-commons/builds/280335206", 
        "date": "Sep 27, 2017 11:05:11 AM", 
        "id": 280335206
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/spring-projects/spring-data-commons/builds/279460664", 
        "date": "Sep 25, 2017 12:29:44 PM", 
        "id": 279460664
      }
    }, 
    "repository": {
      "name": "spring-projects-spring-data-commons", 
      "url": "https://github.com/spring-projects/spring-data-commons", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 1072614
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/spring-projects/spring-data-commons/commit/2b4ef1a55589466c87c2f30432f504e7b00a2438", 
        "sha": "2b4ef1a55589466c87c2f30432f504e7b00a2438", 
        "branchName": "master", 
        "date": "Sep 27, 2017 10:55:34 AM", 
        "repoName": "spring-projects/spring-data-commons"
      }, 
      "buggyBuild": {
        "url": "http://github.com/spring-projects/spring-data-commons/commit/cc0ab54c38e90ddfbcf4d2aa23993270cb8e56b9", 
        "sha": "cc0ab54c38e90ddfbcf4d2aa23993270cb8e56b9", 
        "branchName": "master", 
        "date": "Sep 25, 2017 12:23:35 PM", 
        "repoName": "spring-projects/spring-data-commons"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/spring-projects-spring-data-commons-279460664-280335206", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 421, 
      "numberLibrariesFailingModule": 94, 
      "numberTestFiles": 259, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 3, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 52, 
        "numberDeleted": 6
      }
    }, 
    "bugId": "Bears_93", 
    "diff": "diff --git a/src/main/java/org/springframework/data/convert/ClassGeneratingEntityInstantiator.java b/src/main/java/org/springframework/data/convert/ClassGeneratingEntityInstantiator.java\nindex 59073f2..144b3e0 100644\n--- a/src/main/java/org/springframework/data/convert/ClassGeneratingEntityInstantiator.java\n+++ b/src/main/java/org/springframework/data/convert/ClassGeneratingEntityInstantiator.java\n@@ -55,18 +55,7 @@ import org.springframework.util.ClassUtils;\n  */\n public class ClassGeneratingEntityInstantiator implements EntityInstantiator {\n \n-\tprivate static final int ARG_CACHE_SIZE = 100;\n-\n-\tprivate static final ThreadLocal<Object[][]> OBJECT_POOL = ThreadLocal.withInitial(() -> {\n-\n-\t\tObject[][] cached = new Object[ARG_CACHE_SIZE][];\n-\n-\t\tfor (int i = 0; i < ARG_CACHE_SIZE; i++) {\n-\t\t\tcached[i] = new Object[i];\n-\t\t}\n-\n-\t\treturn cached;\n-\t});\n+\tprivate static final Object[] EMPTY_ARGS = new Object[0];\n \n \tprivate final ObjectInstantiatorClassGenerator generator;\n \n@@ -170,30 +159,14 @@ public class ClassGeneratingEntityInstantiator implements EntityInstantiator {\n \t}\n \n \t/**\n-\t * Allocates an object array for instance creation. This method uses the argument array cache if possible.\n+\t * Allocates an object array for instance creation.\n \t *\n \t * @param argumentCount\n \t * @return\n \t * @since 2.0\n-\t * @see #ARG_CACHE_SIZE\n \t */\n \tstatic Object[] allocateArguments(int argumentCount) {\n-\t\treturn argumentCount < ARG_CACHE_SIZE ? OBJECT_POOL.get()[argumentCount] : new Object[argumentCount];\n-\t}\n-\n-\t/**\n-\t * Deallocates an object array used for instance creation. Parameters are cleared if the array was cached.\n-\t *\n-\t * @param argumentCount\n-\t * @return\n-\t * @since 2.0\n-\t * @see #ARG_CACHE_SIZE\n-\t */\n-\tstatic void deallocateArguments(Object[] params) {\n-\n-\t\tif (params.length != 0 && params.length < ARG_CACHE_SIZE) {\n-\t\t\tArrays.fill(params, null);\n-\t\t}\n+\t\treturn argumentCount == 0 ? EMPTY_ARGS : new Object[argumentCount];\n \t}\n \n \t/**\n@@ -250,8 +223,6 @@ public class ClassGeneratingEntityInstantiator implements EntityInstantiator {\n \t\t\t\treturn (T) instantiator.newInstance(params);\n \t\t\t} catch (Exception e) {\n \t\t\t\tthrow new MappingInstantiationException(entity, Arrays.asList(params), e);\n-\t\t\t} finally {\n-\t\t\t\tdeallocateArguments(params);\n \t\t\t}\n \t\t}\n \ndiff --git a/src/main/java/org/springframework/data/convert/KotlinClassGeneratingEntityInstantiator.java b/src/main/java/org/springframework/data/convert/KotlinClassGeneratingEntityInstantiator.java\nindex c4da91e..1bdb23a 100644\n--- a/src/main/java/org/springframework/data/convert/KotlinClassGeneratingEntityInstantiator.java\n+++ b/src/main/java/org/springframework/data/convert/KotlinClassGeneratingEntityInstantiator.java\n@@ -237,11 +237,7 @@ public class KotlinClassGeneratingEntityInstantiator extends ClassGeneratingEnti\n \t\t\t\tparams[userParameterCount + i] = defaulting[i];\n \t\t\t}\n \n-\t\t\ttry {\n-\t\t\t\treturn (T) instantiator.newInstance(params);\n-\t\t\t} finally {\n-\t\t\t\tdeallocateArguments(params);\n-\t\t\t}\n+\t\t\treturn (T) instantiator.newInstance(params);\n \t\t}\n \t}\n }\ndiff --git a/src/main/java/org/springframework/data/convert/ReflectionEntityInstantiator.java b/src/main/java/org/springframework/data/convert/ReflectionEntityInstantiator.java\nindex 6c53f0f..6fc71a6 100644\n--- a/src/main/java/org/springframework/data/convert/ReflectionEntityInstantiator.java\n+++ b/src/main/java/org/springframework/data/convert/ReflectionEntityInstantiator.java\n@@ -40,18 +40,7 @@ public enum ReflectionEntityInstantiator implements EntityInstantiator {\n \n \tINSTANCE;\n \n-\tprivate final int ARG_CACHE_SIZE = 100;\n-\n-\tprivate final ThreadLocal<Object[][]> objectPool = ThreadLocal.withInitial(() -> {\n-\n-\t\tObject[][] cached = new Object[ARG_CACHE_SIZE][];\n-\n-\t\tfor (int i = 0; i < ARG_CACHE_SIZE; i++) {\n-\t\t\tcached[i] = new Object[i];\n-\t\t}\n-\n-\t\treturn cached;\n-\t});\n+\tprivate static final Object[] EMPTY_ARGS = new Object[0];\n \n \t@SuppressWarnings(\"unchecked\")\n \tpublic <T, E extends PersistentEntity<? extends T, P>, P extends PersistentProperty<P>> T createInstance(E entity,\n@@ -80,7 +69,7 @@ public enum ReflectionEntityInstantiator implements EntityInstantiator {\n \t\t}\n \t\tint parameterCount = constructor.getConstructor().getParameterCount();\n \n-\t\tObject[] params = parameterCount < ARG_CACHE_SIZE ? objectPool.get()[parameterCount] : new Object[parameterCount];\n+\t\tObject[] params = parameterCount == 0 ? EMPTY_ARGS : new Object[parameterCount];\n \t\tint i = 0;\n \t\tfor (Parameter<?, P> parameter : constructor.getParameters()) {\n \t\t\tparams[i++] = provider.getParameterValue(parameter);\n@@ -90,8 +79,6 @@ public enum ReflectionEntityInstantiator implements EntityInstantiator {\n \t\t\treturn BeanUtils.instantiateClass(constructor.getConstructor(), params);\n \t\t} catch (BeanInstantiationException e) {\n \t\t\tthrow new MappingInstantiationException(entity, new ArrayList<>(Arrays.asList(params)), e);\n-\t\t} finally {\n-\t\t\tArrays.fill(params, null);\n \t\t}\n \t}\n }\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 275989640, 
        "hostName": "spirals-bears", 
        "totalMemory": 428867584, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 10, 2018 1:45:06 PM", 
      "projectRootPomPath": "./workspace/spring-projects/spring-data-commons/279460664/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            2, 
            0, 
            0, 
            204
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 206
        }, 
        "testing": {
          "stepDurations": [
            87
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 87
        }, 
        "cloning": {
          "stepDurations": [
            9
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 9
        }
      }, 
      "reproductionDateBeginning": "Dec 10, 2018 1:36:59 PM", 
      "totalDuration": 481
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 2045, 
        "numberRunning": 2046, 
        "numberFailing": 1, 
        "numberErroring": 0, 
        "failures": [
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/spring-projects/spring-data-commons/286617333", 
      "failingClasses": [
        {
          "numberPassing": 9, 
          "numberRunning": 10, 
          "testClass": "org.springframework.data.util.ParameterizedTypeInformationUnitTests", 
          "numberFailing": 1, 
          "numberErroring": 0, 
          "numberSkipping": 0
        }
      ], 
      "failureDetails": [
        {
          "failureName": "java.lang.AssertionError", 
          "testMethod": "detectsNestedGenerics", 
          "testClass": "org.springframework.data.util.ParameterizedTypeInformationUnitTests", 
          "detail": "\nExpected: is type < org.springframework.data.util.ParameterizedTypeInformationUnitTests$MyEnum\n     but: \"java.lang.Object\"", 
          "isError": false
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/spring-projects/spring-data-commons/builds/287128429", 
        "date": "Oct 12, 2017 6:24:57 PM", 
        "id": 287128429
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/spring-projects/spring-data-commons/builds/286617333", 
        "date": "Oct 11, 2017 7:08:01 PM", 
        "id": 286617333
      }
    }, 
    "repository": {
      "name": "spring-projects-spring-data-commons", 
      "url": "https://github.com/spring-projects/spring-data-commons", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 1072614
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/spring-projects/spring-data-commons/commit/d0d0d72c980fc5b5bde949ae051b433f8daf5c9f", 
        "sha": "d0d0d72c980fc5b5bde949ae051b433f8daf5c9f", 
        "branchName": "1.13.x", 
        "date": "Oct 12, 2017 6:19:15 PM", 
        "repoName": "spring-projects/spring-data-commons"
      }, 
      "buggyBuild": {
        "url": "http://github.com/spring-projects/spring-data-commons/commit/91fd1a4cafffc22530d11713044e8fdad64d8106", 
        "sha": "91fd1a4cafffc22530d11713044e8fdad64d8106", 
        "branchName": "1.13.x", 
        "date": "Oct 11, 2017 7:00:14 PM", 
        "repoName": "spring-projects/spring-data-commons"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/spring-projects-spring-data-commons-286617333-287128429", 
    "version": "latest", 
    "projectMetrics": {
      "numberSourceFiles": 379, 
      "numberLibrariesFailingModule": 73, 
      "numberTestFiles": 237, 
      "numberModules": 1
    }, 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 3, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 72, 
        "numberDeleted": 46
      }
    }, 
    "bugId": "Bears_94", 
    "diff": "diff --git a/src/main/java/org/springframework/data/util/ParameterizedTypeInformation.java b/src/main/java/org/springframework/data/util/ParameterizedTypeInformation.java\nindex 88a8a2f..798de32 100644\n--- a/src/main/java/org/springframework/data/util/ParameterizedTypeInformation.java\n+++ b/src/main/java/org/springframework/data/util/ParameterizedTypeInformation.java\n@@ -52,35 +52,6 @@ class ParameterizedTypeInformation<T> extends ParentTypeAwareTypeInformation<T>\n \t\tthis.type = type;\n \t}\n \n-\t/**\n-\t * Resolves the type variables to be used. Uses the parent's type variable map but overwrites variables locally\n-\t * declared.\n-\t * \n-\t * @param type must not be {@literal null}.\n-\t * @param resolvedType must not be {@literal null}.\n-\t * @param parent must not be {@literal null}.\n-\t * @return\n-\t */\n-\tprivate static Map<TypeVariable<?>, Type> calculateTypeVariables(ParameterizedType type, Class<?> resolvedType,\n-\t\t\tTypeDiscoverer<?> parent) {\n-\n-\t\tTypeVariable<?>[] typeParameters = resolvedType.getTypeParameters();\n-\t\tType[] arguments = type.getActualTypeArguments();\n-\n-\t\tMap<TypeVariable<?>, Type> localTypeVariables = new HashMap<TypeVariable<?>, Type>(parent.getTypeVariableMap());\n-\n-\t\tfor (int i = 0; i < typeParameters.length; i++) {\n-\n-\t\t\tType value = arguments[i];\n-\n-\t\t\tif (!(value instanceof TypeVariable)) {\n-\t\t\t\tlocalTypeVariables.put(typeParameters[i], value);\n-\t\t\t}\n-\t\t}\n-\n-\t\treturn localTypeVariables;\n-\t}\n-\n \t/*\n \t * (non-Javadoc)\n \t * @see org.springframework.data.util.TypeDiscoverer#doGetMapValueType()\n@@ -268,4 +239,47 @@ class ParameterizedTypeInformation<T> extends ParentTypeAwareTypeInformation<T>\n \t\tthis.resolved = resolved;\n \t\treturn resolved;\n \t}\n+\n+\t/**\n+\t * Resolves the type variables to be used. Uses the parent's type variable map but overwrites variables locally\n+\t * declared.\n+\t * \n+\t * @param type must not be {@literal null}.\n+\t * @param resolvedType must not be {@literal null}.\n+\t * @param parent must not be {@literal null}.\n+\t * @return will never be {@literal null}.\n+\t */\n+\tprivate static Map<TypeVariable<?>, Type> calculateTypeVariables(ParameterizedType type, Class<?> resolvedType,\n+\t\t\tTypeDiscoverer<?> parent) {\n+\n+\t\tTypeVariable<?>[] typeParameters = resolvedType.getTypeParameters();\n+\t\tType[] arguments = type.getActualTypeArguments();\n+\n+\t\tMap<TypeVariable<?>, Type> localTypeVariables = new HashMap<TypeVariable<?>, Type>(parent.getTypeVariableMap());\n+\n+\t\tfor (int i = 0; i < typeParameters.length; i++) {\n+\t\t\tlocalTypeVariables.put(typeParameters[i], flattenTypeVariable(arguments[i], localTypeVariables));\n+\t\t}\n+\n+\t\treturn localTypeVariables;\n+\t}\n+\n+\t/**\n+\t * Recursively resolves the type bound to the given {@link Type} in case it's a {@link TypeVariable} and there's an\n+\t * entry in the given type variables.\n+\t * \n+\t * @param source must not be {@literal null}.\n+\t * @param variables must not be {@literal null}.\n+\t * @return will never be {@literal null}.\n+\t */\n+\tprivate static Type flattenTypeVariable(Type source, Map<TypeVariable<?>, Type> variables) {\n+\n+\t\tif (!(source instanceof TypeVariable)) {\n+\t\t\treturn source;\n+\t\t}\n+\n+\t\tType value = variables.get(source);\n+\n+\t\treturn value == null ? source : flattenTypeVariable(value, variables);\n+\t}\n }\ndiff --git a/src/main/java/org/springframework/data/util/TypeDiscoverer.java b/src/main/java/org/springframework/data/util/TypeDiscoverer.java\nindex f131ce2..b096ff8 100644\n--- a/src/main/java/org/springframework/data/util/TypeDiscoverer.java\n+++ b/src/main/java/org/springframework/data/util/TypeDiscoverer.java\n@@ -134,7 +134,7 @@ class TypeDiscoverer<S> implements TypeInformation<S> {\n \n \t\tif (fieldType instanceof TypeVariable) {\n \t\t\tTypeVariable<?> variable = (TypeVariable<?>) fieldType;\n-\t\t\treturn new TypeVariableTypeInformation(variable, type, this);\n+\t\t\treturn new TypeVariableTypeInformation(variable, this);\n \t\t}\n \n \t\tif (fieldType instanceof GenericArrayType) {\ndiff --git a/src/main/java/org/springframework/data/util/TypeVariableTypeInformation.java b/src/main/java/org/springframework/data/util/TypeVariableTypeInformation.java\nindex 1314cc4..cc3db7a 100644\n--- a/src/main/java/org/springframework/data/util/TypeVariableTypeInformation.java\n+++ b/src/main/java/org/springframework/data/util/TypeVariableTypeInformation.java\n@@ -17,7 +17,6 @@ package org.springframework.data.util;\n \n import static org.springframework.util.ObjectUtils.*;\n \n-import java.lang.reflect.ParameterizedType;\n import java.lang.reflect.Type;\n import java.lang.reflect.TypeVariable;\n \n@@ -32,61 +31,22 @@ import org.springframework.util.Assert;\n class TypeVariableTypeInformation<T> extends ParentTypeAwareTypeInformation<T> {\n \n \tprivate final TypeVariable<?> variable;\n-\tprivate final Type owningType;\n \n \t/**\n-\t * Creates a bew {@link TypeVariableTypeInformation} for the given {@link TypeVariable} owning {@link Type} and parent\n+\t * Creates a new {@link TypeVariableTypeInformation} for the given {@link TypeVariable} owning {@link Type} and parent\n \t * {@link TypeDiscoverer}.\n \t * \n \t * @param variable must not be {@literal null}\n \t * @param owningType must not be {@literal null}\n \t * @param parent must not be {@literal null}.\n \t */\n-\tpublic TypeVariableTypeInformation(TypeVariable<?> variable, Type owningType, TypeDiscoverer<?> parent) {\n+\tpublic TypeVariableTypeInformation(TypeVariable<?> variable, TypeDiscoverer<?> parent) {\n \n \t\tsuper(variable, parent);\n \n \t\tAssert.notNull(variable, \"TypeVariable must not be null!\");\n \n \t\tthis.variable = variable;\n-\t\tthis.owningType = owningType;\n-\t}\n-\n-\t/*\n-\t * (non-Javadoc)\n-\t * @see org.springframework.data.util.TypeDiscoverer#getType()\n-\t */\n-\t@Override\n-\tpublic Class<T> getType() {\n-\n-\t\tint index = getIndex(variable);\n-\n-\t\tif (owningType instanceof ParameterizedType && index != -1) {\n-\t\t\tType fieldType = ((ParameterizedType) owningType).getActualTypeArguments()[index];\n-\t\t\treturn resolveType(fieldType);\n-\t\t}\n-\n-\t\treturn resolveType(variable);\n-\t}\n-\n-\t/**\n-\t * Returns the index of the type parameter binding the given {@link TypeVariable}.\n-\t * \n-\t * @param variable\n-\t * @return\n-\t */\n-\tprivate int getIndex(TypeVariable<?> variable) {\n-\n-\t\tClass<?> rawType = resolveType(owningType);\n-\t\tTypeVariable<?>[] typeParameters = rawType.getTypeParameters();\n-\n-\t\tfor (int i = 0; i < typeParameters.length; i++) {\n-\t\t\tif (variable.equals(typeParameters[i])) {\n-\t\t\t\treturn i;\n-\t\t\t}\n-\t\t}\n-\n-\t\treturn -1;\n \t}\n \n \t/*\n", 
    "type": "passing_passing", 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 303869256, 
        "hostName": "spirals-bears", 
        "totalMemory": 501219328, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 11, 2018 1:09:04 AM", 
      "projectRootPomPath": "./workspace/spring-projects/spring-data-commons/286617333/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            2, 
            0, 
            0, 
            156
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 158
        }, 
        "testing": {
          "stepDurations": [
            52
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 52
        }, 
        "cloning": {
          "stepDurations": [
            7
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 7
        }
      }, 
      "reproductionDateBeginning": "Dec 11, 2018 1:03:10 AM", 
      "totalDuration": 348
    }
  }, 
  {
    "tests": {
      "overallMetrics": {
        "numberPassing": 2310, 
        "numberRunning": 2316, 
        "numberFailing": 2, 
        "numberErroring": 4, 
        "failures": [
          {
            "failureName": "java.lang.NullPointerException", 
            "isError": true, 
            "occurrences": 3
          }, 
          {
            "failureName": "java.lang.AssertionError", 
            "isError": false, 
            "occurrences": 2
          }, 
          {
            "failureName": "java.lang.Exception", 
            "isError": true, 
            "occurrences": 1
          }
        ], 
        "numberSkipping": 2
      }, 
      "failingModule": "/root/workspace/spring-projects/spring-data-commons/289903133", 
      "failureDetails": [
        {
          "failureName": "java.lang.NullPointerException", 
          "testClass": "org.springframework.data.mapping.model.ClassGeneratingPropertyAccessorFactoryTests", 
          "testMethod": "shouldUseClassPropertyAccessorFactory[Class in default package]", 
          "isError": true
        }, 
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "\nExpecting:\n  <java.lang.NullPointerException>\nto be an instance of:\n  <java.lang.UnsupportedOperationException>\nbut was:\n  <\"java.lang.NullPointerException\n at org.springframework.data.mapping.model.ClassGeneratingPropertyAccessorFactory.isTypeInjectable(ClassGeneratingPropertyAccessorFactory.java:136)\n at org.springframework.data.mapping.model.ClassGeneratingPropertyAccessorFactory.isSupported(ClassGeneratingPropertyAccessorFactory.java:122)\n at org.springframework.data.mapping.context.AbstractMappingContext.addPersistentEntity(AbstractMappingContext.java:397)\n at org.springframework.data.mapping.context.AbstractMappingContext.getPersistentEntity(AbstractMappingContext.java:227)\n at org.springframework.data.mapping.context.AbstractMappingContext.getPersistentEntity(AbstractMappingContext.java:172)\n at org.springframework.data.mapping.context.AbstractMappingContext.getPersistentEntity(AbstractMappingContext.java:85)\n at org.springframework.data.mapping.context.MappingContext.getRequiredPersistentEntity(MappingContext.java:70)\n at org.springframework.data.mapping.model.ClassGeneratingPropertyAccessorFactoryTests.getPersistentPropertyAccessor(ClassGeneratingPropertyAccessorFactoryTests.java:167)\n at org.springframework.data.mapping.model.ClassGeneratingPropertyAccessorFactoryTests.lambda$null$3(ClassGeneratingPropertyAccessorFactoryTests.java:153)\n at org.assertj.core.api.ThrowableAssert.catchThrowable(ThrowableAssert.java:60)\n at org.assertj.core.api.ThrowableTypeAssert.isThrownBy(ThrowableTypeAssert.java:54)\n at org.springframework.data.mapping.model.ClassGeneratingPropertyAccessorFactoryTests.lambda$setPropertyShouldFailOnUnhandledProperty$4(ClassGeneratingPropertyAccessorFactoryTests.java:153)\n at org.assertj.core.api.AbstractAssert.satisfies(AbstractAssert.java:639)\n at org.springframework.data.mapping.model.ClassGeneratingPropertyAccessorFactoryTests.setPropertyShouldFailOnUnhandledProperty(ClassGeneratingPropertyAccessorFactoryTests.java:152)\n at sun.reflect.GeneratedMethodAccessor113.invoke(Unknown Source)\n at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n at java.lang.reflect.Method.invoke(Method.java:498)\n at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\n at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\n at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\n at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\n at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\n at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n at org.junit.runners.Suite.runChild(Suite.java:128)\n at org.junit.runners.Suite.runChild(Suite.java:27)\n at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:367)\n at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:274)\n at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)\n at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:161)\n at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:290)\n at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:242)\n at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)\n\">", 
          "isError": false, 
          "testMethod": "setPropertyShouldFailOnUnhandledProperty[Class in default package]", 
          "testClass": "org.springframework.data.mapping.model.ClassGeneratingPropertyAccessorFactoryTests"
        }, 
        {
          "failureName": "java.lang.Exception", 
          "detail": "Unexpected exception, expected<java.lang.IllegalArgumentException> but was<java.lang.NullPointerException>", 
          "isError": true, 
          "testMethod": "shouldFailOnNullBean[Class in default package]", 
          "testClass": "org.springframework.data.mapping.model.ClassGeneratingPropertyAccessorFactoryTests"
        }, 
        {
          "failureName": "java.lang.NullPointerException", 
          "testClass": "org.springframework.data.mapping.model.ClassGeneratingPropertyAccessorFactoryTests", 
          "testMethod": "accessorShouldDeclareConstructor[Class in default package]", 
          "isError": true
        }, 
        {
          "failureName": "java.lang.NullPointerException", 
          "testClass": "org.springframework.data.mapping.model.ClassGeneratingPropertyAccessorFactoryTests", 
          "testMethod": "shouldSupportGeneratedPropertyAccessors[Class in default package]", 
          "isError": true
        }, 
        {
          "failureName": "java.lang.AssertionError", 
          "detail": "\nExpecting:\n  <java.lang.NullPointerException>\nto be an instance of:\n  <java.lang.UnsupportedOperationException>\nbut was:\n  <\"java.lang.NullPointerException\n at org.springframework.data.mapping.model.ClassGeneratingPropertyAccessorFactory.isTypeInjectable(ClassGeneratingPropertyAccessorFactory.java:136)\n at org.springframework.data.mapping.model.ClassGeneratingPropertyAccessorFactory.isSupported(ClassGeneratingPropertyAccessorFactory.java:122)\n at org.springframework.data.mapping.context.AbstractMappingContext.addPersistentEntity(AbstractMappingContext.java:397)\n at org.springframework.data.mapping.context.AbstractMappingContext.getPersistentEntity(AbstractMappingContext.java:227)\n at org.springframework.data.mapping.context.AbstractMappingContext.getPersistentEntity(AbstractMappingContext.java:172)\n at org.springframework.data.mapping.context.AbstractMappingContext.getPersistentEntity(AbstractMappingContext.java:85)\n at org.springframework.data.mapping.context.MappingContext.getRequiredPersistentEntity(MappingContext.java:70)\n at org.springframework.data.mapping.model.ClassGeneratingPropertyAccessorFactoryTests.getPersistentPropertyAccessor(ClassGeneratingPropertyAccessorFactoryTests.java:167)\n at org.springframework.data.mapping.model.ClassGeneratingPropertyAccessorFactoryTests.lambda$null$1(ClassGeneratingPropertyAccessorFactoryTests.java:145)\n at org.assertj.core.api.ThrowableAssert.catchThrowable(ThrowableAssert.java:60)\n at org.assertj.core.api.ThrowableTypeAssert.isThrownBy(ThrowableTypeAssert.java:54)\n at org.springframework.data.mapping.model.ClassGeneratingPropertyAccessorFactoryTests.lambda$getPropertyShouldFailOnUnhandledProperty$2(ClassGeneratingPropertyAccessorFactoryTests.java:145)\n at org.assertj.core.api.AbstractAssert.satisfies(AbstractAssert.java:639)\n at org.springframework.data.mapping.model.ClassGeneratingPropertyAccessorFactoryTests.getPropertyShouldFailOnUnhandledProperty(ClassGeneratingPropertyAccessorFactoryTests.java:144)\n at sun.reflect.GeneratedMethodAccessor111.invoke(Unknown Source)\n at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n at java.lang.reflect.Method.invoke(Method.java:498)\n at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\n at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\n at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\n at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\n at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\n at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n at org.junit.runners.Suite.runChild(Suite.java:128)\n at org.junit.runners.Suite.runChild(Suite.java:27)\n at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:367)\n at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:274)\n at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)\n at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:161)\n at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:290)\n at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:242)\n at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)\n\">", 
          "isError": false, 
          "testMethod": "getPropertyShouldFailOnUnhandledProperty[Class in default package]", 
          "testClass": "org.springframework.data.mapping.model.ClassGeneratingPropertyAccessorFactoryTests"
        }
      ], 
      "failingClasses": [
        {
          "numberPassing": 504, 
          "numberRunning": 510, 
          "testClass": "org.springframework.data.mapping.model.ClassGeneratingPropertyAccessorFactoryTests", 
          "numberFailing": 2, 
          "numberErroring": 4, 
          "numberSkipping": 1
        }
      ]
    }, 
    "builds": {
      "fixerBuild": {
        "url": "http://travis-ci.org/spring-projects/spring-data-commons/builds/292475109", 
        "date": "Oct 25, 2017 9:16:22 AM", 
        "id": 292475109
      }, 
      "buggyBuild": {
        "url": "http://travis-ci.org/spring-projects/spring-data-commons/builds/289903133", 
        "date": "Oct 19, 2017 12:24:52 PM", 
        "id": 289903133
      }
    }, 
    "repository": {
      "name": "spring-projects-spring-data-commons", 
      "url": "https://github.com/spring-projects/spring-data-commons", 
      "isFork": false, 
      "pullRequestId": 0, 
      "isPullRequest": false, 
      "original": {
        "url": "", 
        "name": "", 
        "githubId": 0
      }, 
      "githubId": 1072614
    }, 
    "commits": {
      "fixerBuild": {
        "url": "http://github.com/spring-projects/spring-data-commons/commit/edd8c5b8a337cec89e1c16a1e0d4f06825fffa73", 
        "sha": "edd8c5b8a337cec89e1c16a1e0d4f06825fffa73", 
        "branchName": "2.0.x", 
        "date": "Oct 25, 2017 9:10:15 AM", 
        "repoName": "spring-projects/spring-data-commons"
      }, 
      "buggyBuild": {
        "url": "http://github.com/spring-projects/spring-data-commons/commit/26da224081795d6f75144af755c12fd93fdba1bf", 
        "sha": "26da224081795d6f75144af755c12fd93fdba1bf", 
        "branchName": "2.0.x", 
        "date": "Oct 19, 2017 12:15:13 PM", 
        "repoName": "spring-projects/spring-data-commons"
      }
    }, 
    "branchUrl": "https://github.com/bears-bugs/bears-benchmark/tree/spring-projects-spring-data-commons-289903133-292475109", 
    "version": "latest", 
    "patchDiff": {
      "files": {
        "numberAdded": 0, 
        "numberChanged": 1, 
        "numberDeleted": 0
      }, 
      "lines": {
        "numberAdded": 4, 
        "numberDeleted": 1
      }
    }, 
    "type": "passing_passing", 
    "bugId": "Bears_95", 
    "diff": "diff --git a/src/main/java/org/springframework/data/mapping/model/ClassGeneratingPropertyAccessorFactory.java b/src/main/java/org/springframework/data/mapping/model/ClassGeneratingPropertyAccessorFactory.java\nindex 658142a..e55fd89 100644\n--- a/src/main/java/org/springframework/data/mapping/model/ClassGeneratingPropertyAccessorFactory.java\n+++ b/src/main/java/org/springframework/data/mapping/model/ClassGeneratingPropertyAccessorFactory.java\n@@ -133,7 +133,10 @@ public class ClassGeneratingPropertyAccessorFactory implements PersistentPropert\n \t}\n \n \tprivate static boolean isTypeInjectable(PersistentEntity<?, ?> entity) {\n-\t\treturn entity.getType().getClassLoader() != null && !entity.getType().getPackage().getName().startsWith(\"java\");\n+\n+\t\tClass<?> type = entity.getType();\n+\t\treturn type.getClassLoader() != null\n+\t\t\t\t&& (type.getPackage() == null || !type.getPackage().getName().startsWith(\"java\"));\n \t}\n \n \tprivate boolean hasUniquePropertyHashCodes(PersistentEntity<?, ?> entity) {\n", 
    "projectMetrics": {
      "numberSourceFiles": 421, 
      "numberLibrariesFailingModule": 94, 
      "numberTestFiles": 263, 
      "numberModules": 1
    }, 
    "reproductionBuggyBuild": {
      "machineInfo": {
        "freeMemory": 255496896, 
        "hostName": "spirals-bears", 
        "totalMemory": 465043456, 
        "numberCPU": 16
      }, 
      "reproductionDateEnd": "Dec 11, 2018 1:02:40 AM", 
      "projectRootPomPath": "./workspace/spring-projects/spring-data-commons/289903133/pom.xml", 
      "processDurations": {
        "building": {
          "stepDurations": [
            0, 
            3, 
            0, 
            0, 
            209
          ], 
          "stepNames": [
            "CheckoutPatchedBuildCandidate", 
            "ComputeSourceDir", 
            "ComputeTestDir", 
            "CheckoutBuggyBuildCandidateSourceCode", 
            "BuildProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 5, 
          "totalDuration": 212
        }, 
        "testing": {
          "stepDurations": [
            90
          ], 
          "stepNames": [
            "TestProjectBuggyBuildCandidateSourceCode"
          ], 
          "nbSteps": 1, 
          "totalDuration": 90
        }, 
        "cloning": {
          "stepDurations": [
            9
          ], 
          "stepNames": [
            "CloneRepository"
          ], 
          "nbSteps": 1, 
          "totalDuration": 9
        }
      }, 
      "reproductionDateBeginning": "Dec 11, 2018 12:54:18 AM", 
      "totalDuration": 494
    }
  }
]